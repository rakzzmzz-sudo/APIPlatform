module.exports=[63021,(e,t,a)=>{t.exports=e.x("@prisma/client-2c3a283f134fdcb6",()=>require("@prisma/client-2c3a283f134fdcb6"))},22734,(e,t,a)=>{t.exports=e.x("fs",()=>require("fs"))},54799,(e,t,a)=>{t.exports=e.x("crypto",()=>require("crypto"))},34269,e=>{"use strict";var t=e.i(8970),a=e.i(74017),s=e.i(96250),r=e.i(59756),i=e.i(61916),n=e.i(74677),o=e.i(69741),l=e.i(16795),c=e.i(87718),u=e.i(95169),p=e.i(47587),d=e.i(66012),m=e.i(70101),g=e.i(26937),_=e.i(10372),f=e.i(93695);e.i(52474);var h=e.i(220),b=e.i(89171),R=e.i(63021);let v=e.g.prisma||new R.PrismaClient;async function w(t,{params:a}){try{var s;let r,{table:i}=await a,{operation:n,filters:o,data:l,orderBy:c,limit:u,single:p}=await t.json();console.log(`API DB Request: ${i} ${n}`,{filters:o,orderBy:c});let d={users:"user",customers:"customer",industries:"industry",customer_segments:"customerSegment",customer_health_scores:"customerHealthScore",customer_interactions:"customerInteraction",customer_support_tickets:"customerSupportTicket",customer_activities:"customerActivity",customer_notes:"customerNote",customer_revenue_metrics:"customerRevenueMetric",platforms:"platform",campaigns:"campaign",notifications:"notification",pm_projects:"pmProject",pm_issues:"pmIssue",pm_issue_types:"pmIssueType",pm_issue_statuses:"pmIssueStatus",pm_issue_priorities:"pmIssuePriority",pm_sprints:"pmSprint",sms_campaigns:"smsCampaign",sms_templates:"smsTemplate",sms_configurations:"smsConfiguration",sms_messages:"smsMessage",rcs_campaigns:"rcsCampaign",rcs_templates:"rcsTemplate",rcs_messages:"rcsMessage",profiles:"user",menu_access_control:"menuAccessControl",whatsapp_campaigns:"whatsAppCampaign",whatsapp_messages:"whatsAppMessage",whatsapp_templates:"whatsAppTemplate",tenant_whatsapp_configs:"whatsAppConfig",tenant_whatsapp_numbers:"whatsAppNumber",rcs_aggregator_configurations:"rcsAggregatorConfiguration",sample_whatsapp_configs:"sampleWhatsAppConfig",sample_whatsapp_numbers:"sampleWhatsAppNumber",cb_bots:"cbBot",cb_ml_configs:"cbMLConfig",cb_intents:"cbIntent",cb_entities:"cbEntity",cb_conversations:"cbConversation",cb_messages:"cbMessage",cb_knowledge_base:"cbKnowledgeBase",cb_integrations:"cbIntegration",video_api_products:"videoApiProduct",video_api_purchases:"videoApiPurchase",video_templates:"videoTemplate",meeting_ai_configurations:"meetingAIConfiguration",video_api_capabilities:"videoApiCapability",video_recordings:"videoRecording",recording_analytics:"recordingAnalytics",video_recording_configs:"videoRecordingConfig",cloud_storage_configs:"cloudStorageConfig",network_quality_metrics:"networkQualityMetric",video_room_participants:"videoCallParticipant",adaptive_bitrate_configs:"adaptiveBitrateConfig",simulcast_configs:"simulcastConfig",background_processing_configs:"backgroundProcessingConfig",virtual_backgrounds:"virtualBackground",noise_cancellation_configs:"noiseCancellationConfig",transcription_configs:"transcriptionConfig",rtmp_broadcast_configs:"rtmpBroadcastConfig",hls_streaming_configs:"hlsStreamingConfig",broadcast_sessions:"broadcastSession",ai_processing_analytics:"aiProcessingAnalytics",meetings:"meeting",meeting_ai_configuration_links:"meetingAIConfigurationLink",meeting_participants:"meetingParticipant",meeting_transcripts:"meetingTranscript",meeting_action_items:"meetingActionItem",meeting_summaries:"meetingSummary",meeting_analytics:"meetingAnalytics",meeting_ai_insights:"meetingAIInsight",video_rooms:"videoRoom",video_room_signals:"videoRoomSignal",cart_items:"cartItem",email_campaigns:"emailCampaign",email_templates:"emailTemplate",email_contact_lists:"emailContactList",email_contacts:"emailContact",email_contact_list_members:"emailContactListMember",email_automation_sequences:"emailAutomationSequence",email_provider_configs:"emailProviderConfig",email_campaign_analytics:"emailCampaignAnalytics",email_sending_quotas:"emailSendingQuota",email_campaign_recipients:"emailCampaignRecipient",products:"product",product_tiers:"productTier",payment_methods:"paymentMethod",transactions:"transaction",api_marketplace_keys:"apiMarketplaceKey",orders:"order",user_subscriptions:"userSubscription",user_offers:"userOffer",product_documentation:"productDocumentation"}[s=i]||s,m=v[d];if(!m){let t=e.r(22734),a=new Date().toISOString(),s=Object.keys(v).filter(e=>!e.startsWith("_")&&!e.startsWith("$"));try{t.appendFileSync("prisma_debug.log",`${a} - API Match Fail! Table: ${i}, Model: ${d}. Client: 63021. Available: ${s.length} models.
`)}catch(e){}console.error(`Table ${i} (model ${d}) not found in shared Prisma instance. Attempting fresh instantiation...`);try{let{PrismaClient:s}=e.r(63021),r=new s;if(r[d])console.log(`Found ${d} in fresh Prisma instance. Using it for this request.`),m=r[d];else{let e=Object.keys(r).filter(e=>!e.startsWith("_")&&!e.startsWith("$"));console.error(`Model ${d} STILL NOT FOUND in fresh instance. Available: ${e.join(", ")}`);try{t.appendFileSync("prisma_debug.log",`${a} - Fresh Instance FAIL! Model: ${d}. Available: ${e.join(", ")}
`)}catch(e){}}}catch(e){console.error(`Failed to create fresh Prisma instance: ${e.message}`)}}if(!m){if(["products","product_tiers","cart_items","payment_methods","transactions","api_marketplace_keys","orders","user_subscriptions","user_offers","product_documentation"].includes(i)){console.warn(`Model ${d} not found. Attempting raw SQL fallback for table ${i}.`);try{let t;if("insert"===n){let a=e.r(54799),s=Array.isArray(l)?l:[l],r=Object.keys(s[0]);r.includes("id")||r.unshift("id"),r.includes("created_at")||r.push("created_at"),r.includes("updated_at")||r.push("updated_at"),r.includes("status")||"cart_items"!==i||r.push("status");let n=r.map(e=>`"${e}"`).join(", "),o=[],c=[];for(let e of s){e.id||(e.id=a.randomUUID()),e.created_at||(e.created_at=new Date().toISOString()),e.updated_at||(e.updated_at=new Date().toISOString()),e.status||"cart_items"!==i||(e.status="active");let t=[];r.forEach(a=>{t.push(`$${c.length+1}`);let s=e[a];"object"!=typeof s||null===s||s instanceof Date||(s=JSON.stringify(s)),c.push(s)}),o.push(`(${t.join(", ")})`)}let u=`INSERT INTO "${i}" (${n}) VALUES ${o.join(", ")}`;console.log(`Executing Raw SQL INSERT Fallback: ${u}`,c),await v.$executeRawUnsafe(u,...c),t=Array.isArray(l)?s:s[0]}else{let e=`SELECT * FROM "${i}"`,a=[];if(o&&o.length>0){let t=[];o.forEach(e=>{"eq"===e.operator&&(t.push(`"${e.column}" = $${a.length+1}`),a.push(e.value))}),t.length>0&&(e+=` WHERE ${t.join(" AND ")}`)}if(c){let t=Object.entries(c);if(t.length>0){let[a,s]=t[0],r="DESC"===String(s).toUpperCase()?"DESC":"ASC";e+=` ORDER BY "${a}" ${r}`}}u&&(e+=` LIMIT ${parseInt(String(u))}`),console.log(`Executing Raw SQL SELECT Fallback: ${e}`,a),t=await v.$queryRawUnsafe(e,...a)}return b.NextResponse.json({data:t,error:null})}catch(e){return console.error("Raw SQL Fallback Failed:",e),b.NextResponse.json({error:`Table ${i} (model ${d}) not found and raw fallback failed: ${e.message}`},{status:500})}}return b.NextResponse.json({error:`Table ${i} (model ${d}) not found`},{status:400})}if("select"===n){let e={where:y(o)};c&&(e.orderBy=c),u&&(e.take=parseInt(u)),r=p?await m.findFirst(e):await m.findMany(e)}else if("insert"===n)try{return r=Array.isArray(l)?await m.createMany({data:l}):await m.create({data:l}),b.NextResponse.json({data:r,error:null})}catch(e){return console.error(`Prisma INSERT Error on table ${i}:`,e),b.NextResponse.json({data:null,error:{message:e.message,code:e.code}},{status:500})}else if("update"===n)r=await m.updateMany({where:y(o),data:l});else{if("delete"!==n)return b.NextResponse.json({error:"Invalid operation"},{status:400});r=await m.deleteMany({where:y(o)})}return b.NextResponse.json({data:r,error:null})}catch(e){return console.error("Database API Error:",e),b.NextResponse.json({data:null,error:{message:e.message}},{status:500})}}function y(e){if(!e||0===e.length)return{};let t={};return e.forEach(e=>{let{column:a,operator:s,value:r}=e;"eq"===s?t[a]=r:"neq"===s?t[a]={not:r}:"gt"===s?t[a]={gt:r}:"gte"===s?t[a]={gte:r}:"lt"===s?t[a]={lt:r}:"lte"===s?t[a]={lte:r}:"like"===s||"ilike"===s?t[a]={contains:r.replace(/%/g,"")}:"in"===s&&(t[a]={in:r})}),t}e.s(["POST",()=>w],57650);var C=e.i(57650);let A=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/db/[table]/route",pathname:"/api/db/[table]",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/db/[table]/route.ts",nextConfigOutput:"",userland:C}),{workAsyncStorage:E,workUnitAsyncStorage:S,serverHooks:$}=A;function x(){return(0,s.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:S})}async function I(e,t,s){A.isDev&&(0,r.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let b="/api/db/[table]/route";b=b.replace(/\/index$/,"")||"/";let R=await A.prepare(e,t,{srcPage:b,multiZoneDraftMode:!1});if(!R)return t.statusCode=400,t.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve()),null;let{buildId:v,params:w,nextConfig:y,parsedUrl:C,isDraftMode:E,prerenderManifest:S,routerServerContext:$,isOnDemandRevalidate:x,revalidateOnlyGenerated:I,resolvedPathname:T,clientReferenceManifest:N,serverActionsManifest:P}=R,k=(0,o.normalizeAppPath)(b),O=!!(S.dynamicRoutes[k]||S.routes[T]),M=async()=>((null==$?void 0:$.render404)?await $.render404(e,t,C,!1):t.end("This page could not be found"),null);if(O&&!E){let e=!!S.routes[T],t=S.dynamicRoutes[k];if(t&&!1===t.fallback&&!e){if(y.experimental.adapterPath)return await M();throw new f.NoFallbackError}}let j=null;!O||A.isDev||E||(j="/index"===(j=T)?"/":j);let q=!0===A.isDev||!O,D=O&&!q;P&&N&&(0,n.setManifestsSingleton)({page:b,clientReferenceManifest:N,serverActionsManifest:P});let U=e.method||"GET",F=(0,i.getTracer)(),L=F.getActiveScopeSpan(),H={params:w,prerenderManifest:S,renderOpts:{experimental:{authInterrupts:!!y.experimental.authInterrupts},cacheComponents:!!y.cacheComponents,supportsDynamicResponse:q,incrementalCache:(0,r.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:y.cacheLife,waitUntil:s.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,s,r)=>A.onRequestError(e,t,s,r,$)},sharedContext:{buildId:v}},B=new l.NodeNextRequest(e),K=new l.NodeNextResponse(t),W=c.NextRequestAdapter.fromNodeNextRequest(B,(0,c.signalFromNodeResponse)(t));try{let n=async e=>A.handle(W,H).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=F.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=a.get("next.route");if(s){let t=`${U} ${s}`;e.setAttributes({"next.route":s,"http.route":s,"next.span_name":t}),e.updateName(t)}else e.updateName(`${U} ${b}`)}),o=!!(0,r.getRequestMeta)(e,"minimalMode"),l=async r=>{var i,l;let c=async({previousCacheEntry:a})=>{try{if(!o&&x&&I&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await n(r);e.fetchMetrics=H.renderOpts.fetchMetrics;let l=H.renderOpts.pendingWaitUntil;l&&s.waitUntil&&(s.waitUntil(l),l=void 0);let c=H.renderOpts.collectedTags;if(!O)return await (0,d.sendResponse)(B,K,i,H.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,m.toNodeOutgoingHttpHeaders)(i.headers);c&&(t[_.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==H.renderOpts.collectedRevalidate&&!(H.renderOpts.collectedRevalidate>=_.INFINITE_CACHE)&&H.renderOpts.collectedRevalidate,s=void 0===H.renderOpts.collectedExpire||H.renderOpts.collectedExpire>=_.INFINITE_CACHE?void 0:H.renderOpts.collectedExpire;return{value:{kind:h.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:s}}}}catch(t){throw(null==a?void 0:a.isStale)&&await A.onRequestError(e,t,{routerKind:"App Router",routePath:b,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:x})},!1,$),t}},u=await A.handleResponse({req:e,nextConfig:y,cacheKey:j,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:S,isRoutePPREnabled:!1,isOnDemandRevalidate:x,revalidateOnlyGenerated:I,responseGenerator:c,waitUntil:s.waitUntil,isMinimalMode:o});if(!O)return null;if((null==u||null==(i=u.value)?void 0:i.kind)!==h.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",x?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),E&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,m.fromNodeOutgoingHttpHeaders)(u.value.headers);return o&&O||f.delete(_.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,g.getCacheControlHeader)(u.cacheControl)),await (0,d.sendResponse)(B,K,new Response(u.value.body,{headers:f,status:u.value.status||200})),null};L?await l(L):await F.withPropagatedContext(e.headers,()=>F.trace(u.BaseServerSpan.handleRequest,{spanName:`${U} ${b}`,kind:i.SpanKind.SERVER,attributes:{"http.method":U,"http.target":e.url}},l))}catch(t){if(t instanceof f.NoFallbackError||await A.onRequestError(e,t,{routerKind:"App Router",routePath:k,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:x})},!1,$),O)throw t;return await (0,d.sendResponse)(B,K,new Response(null,{status:500})),null}}e.s(["handler",()=>I,"patchFetch",()=>x,"routeModule",()=>A,"serverHooks",()=>$,"workAsyncStorage",()=>E,"workUnitAsyncStorage",()=>S],34269)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__a1effda5._.js.map