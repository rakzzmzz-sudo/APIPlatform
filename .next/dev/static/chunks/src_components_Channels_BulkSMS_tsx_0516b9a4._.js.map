{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Channels/BulkSMS.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  MessageSquare, Send, Upload, Users, Calendar, Save, X,\n  CheckCircle, AlertCircle, Clock, FileText, Smartphone, Battery, Signal,\n  ChevronDown, ChevronUp, Search, Settings, Pause, Play, Edit, Trash2, Filter\n} from 'lucide-react';\nimport { db } from '../../lib/db';\nimport { useAuth } from '../../contexts/AuthContext';\nimport SMSConfiguration from './SMSConfiguration';\n\ninterface Campaign {\n  id: string;\n  campaign_name: string;\n  status: string;\n  total_recipients: number;\n  sent_recipients: number;\n  insent_recipients: number;\n  duplicate_numbers: number;\n  success_rate: number;\n  route_type: string;\n  sender_id: string;\n  message: string;\n  template_id: string;\n  recipient_source: string;\n  created_by: string;\n  created_at: string;\n  updated_at: string;\n}\n\ninterface Template {\n  id: string;\n  template_name: string;\n  content: string;\n  category: string;\n  description: string;\n  variables: string[];\n  use_case: string;\n  is_default: boolean;\n}\n\ninterface Message {\n  id: string;\n  phone_number: string;\n  message: string;\n  status: string;\n  error_message: string | null;\n  sent_at: string | null;\n  delivered_at: string | null;\n  created_at: string;\n}\n\nexport default function BulkSMS() {\n  const { user } = useAuth();\n  const [activeView, setActiveView] = useState<'compose' | 'campaigns' | 'templates' | 'configuration'>('compose');\n  const [statusFilter, setStatusFilter] = useState<'all' | 'draft' | 'scheduled' | 'in_progress' | 'completed' | 'paused'>('all');\n\n  const [campaignName, setCampaignName] = useState('');\n  const [routeType, setRouteType] = useState('');\n  const [senderId, setSenderId] = useState('');\n  const [selectedTemplate, setSelectedTemplate] = useState('');\n  const [message, setMessage] = useState('');\n  const [recipientMode, setRecipientMode] = useState<'paste' | 'upload' | 'phonebook'>('paste');\n  const [pastedNumbers, setPastedNumbers] = useState('');\n  const [sendMode, setSendMode] = useState<'now' | 'schedule'>('now');\n\n  const [campaigns, setCampaigns] = useState<Campaign[]>([]);\n  const [templates, setTemplates] = useState<Template[]>([]);\n  const [stats, setStats] = useState({\n    totalSent: 0,\n    delivered: 0,\n    pending: 0,\n    failed: 0\n  });\n\n  const [numberValidation, setNumberValidation] = useState({\n    valid: 0,\n    duplicates: 0,\n    invalid: 0\n  });\n\n  const [loading, setLoading] = useState(true);\n  const [isMounted, setIsMounted] = useState(false);\n  const [showTemplateModal, setShowTemplateModal] = useState(false);\n  const [newTemplate, setNewTemplate] = useState({\n    name: '',\n    category: 'promotional',\n    description: '',\n    content: '',\n    use_case: '',\n    is_default: false\n  });\n  const [expandedCampaign, setExpandedCampaign] = useState<string | null>(null);\n  const [campaignMessages, setCampaignMessages] = useState<Record<string, Message[]>>({});\n  const [loadingMessages, setLoadingMessages] = useState<Record<string, boolean>>({});\n\n  useEffect(() => {\n    if (user) {\n      Promise.all([\n        loadCampaigns(),\n        loadTemplates(),\n      ]).finally(() => setLoading(false));\n    }\n  }, [user]);\n\n  useEffect(() => {\n    // Independent load for templates\n    console.log('BulkSMS MOUNTED. Calling loadTemplates...');\n    loadTemplates();\n  }, []);\n\n  useEffect(() => {\n    // Set mounted flag for client-side only rendering\n    setIsMounted(true);\n  }, []);\n\n  useEffect(() => {\n    // Load campaigns whenever filter changes (or on mount)\n    // Independent of 'user' state to prevent auth race conditions\n    console.log('Loading campaigns (Filter changed or User loaded)');\n    loadCampaigns();\n  }, [statusFilter]);\n\n  useEffect(() => {\n    if (pastedNumbers) {\n      validateNumbers(pastedNumbers);\n    } else {\n      setNumberValidation({ valid: 0, duplicates: 0, invalid: 0 });\n    }\n  }, [pastedNumbers]);\n\n  const loadCampaigns = async () => {\n    console.log('Loading SMS campaigns, filter:', statusFilter);\n    let query = db\n      .from('sms_campaigns')\n      .select('*')\n      .order('created_at', { ascending: false });\n\n    if (statusFilter !== 'all') {\n      query = query.eq('status', statusFilter);\n    }\n\n    const { data, error } = await query;\n\n    console.log('SMS Campaigns loaded:', { data, error, count: data?.length });\n\n    if (!error && data) {\n      setCampaigns(data);\n    } else if (error) {\n      console.error('Error loading SMS campaigns:', error);\n    }\n  };\n\n  const loadTemplates = async () => {\n    try {\n      const { data, error } = await db\n        .from('sms_templates')\n        .select('*')\n        .order('template_name');\n\n      if (!error && data) {\n        // Parse variables JSON string to array\n        const parsedData = data.map((t: any) => {\n          let vars = t.variables;\n          if (typeof vars === 'string') {\n            try {\n              if (vars.startsWith('[')) {\n                vars = JSON.parse(vars);\n              } else {\n                vars = vars.split(',').map((v: string) => v.trim());\n              }\n            } catch (e) {\n              console.error('Error parsing template variables:', e);\n              vars = [];\n            }\n          }\n          return { ...t, variables: vars };\n        });\n        setTemplates(parsedData);\n      }\n    } catch (err: any) {\n        console.error('Error in loadTemplates', err);\n    }\n  };\n\n  const handleSaveTemplate = async () => {\n    if (!newTemplate.name || !newTemplate.content) {\n      alert('Please fill in Template Name and Content');\n      return;\n    }\n\n    // Extract variables from content {{var}}\n    const variableRegex = /{{([^}]+)}}/g;\n    const variables: string[] = [];\n    let match;\n    while ((match = variableRegex.exec(newTemplate.content)) !== null) {\n      variables.push(match[1].trim());\n    }\n\n    try {\n      const { error } = await db\n        .from('sms_templates')\n        .insert({\n          template_name: newTemplate.name,\n          category: newTemplate.category,\n          description: newTemplate.description,\n          content: newTemplate.content,\n          variables: JSON.stringify(variables),\n          use_case: newTemplate.use_case,\n          is_default: newTemplate.is_default\n        });\n\n      if (error) throw error;\n\n      alert('Template created successfully!');\n      setShowTemplateModal(false);\n      setNewTemplate({ name: '', category: 'promotional', description: '', content: '', use_case: '', is_default: false });\n      loadTemplates();\n    } catch (error) {\n      console.error('Error creating template:', error);\n      alert('Failed to create template');\n    }\n  };\n\n  // Compute stats reactively from loaded campaigns\n  useEffect(() => {\n    if (campaigns.length > 0) {\n      const totalSent = campaigns.reduce((acc: number, c: any) => acc + (c.sent_recipients || 0), 0);\n      const delivered = campaigns.filter((c: any) => c.status === 'completed').reduce((acc: number, c: any) => acc + (c.sent_recipients || 0), 0);\n      const pending = campaigns.filter((c: any) => c.status === 'in_progress').reduce((acc: number, c: any) => acc + (c.sent_recipients || 0), 0);\n\n      setStats({\n        totalSent,\n        delivered,\n        pending,\n        failed: totalSent - delivered - pending\n      });\n    }\n  }, [campaigns]);\n\n  const loadCampaignMessages = async (campaignId: string) => {\n    setLoadingMessages(prev => ({ ...prev, [campaignId]: true }));\n\n    const { data, error } = await db\n      .from('sms_messages')\n      .select('*')\n      .eq('campaign_id', campaignId)\n      .order('created_at', { ascending: false })\n      .limit(100);\n\n    if (!error && data) {\n      setCampaignMessages(prev => ({ ...prev, [campaignId]: data }));\n    }\n\n    setLoadingMessages(prev => ({ ...prev, [campaignId]: false }));\n  };\n\n  const toggleCampaignExpand = async (campaignId: string) => {\n    if (expandedCampaign === campaignId) {\n      setExpandedCampaign(null);\n    } else {\n      setExpandedCampaign(campaignId);\n      if (!campaignMessages[campaignId]) {\n        await loadCampaignMessages(campaignId);\n      }\n    }\n  };\n\n  const getMessageStatusColor = (status: string) => {\n    switch (status) {\n      case 'delivered': return 'text-[#39FF14]';\n      case 'sent': return 'text-[#39FF14]';\n      case 'pending': return 'text-[#39FF14]';\n      case 'failed': return 'text-[#39FF14]';\n      case 'invalid': return 'text-[#39FF14]';\n      default: return 'text-slate-400';\n    }\n  };\n\n  const getMessageStatusIcon = (status: string) => {\n    switch (status) {\n      case 'delivered': return <CheckCircle className=\"w-4 h-4\" />;\n      case 'sent': return <Send className=\"w-4 h-4\" />;\n      case 'pending': return <Clock className=\"w-4 h-4\" />;\n      case 'failed': return <AlertCircle className=\"w-4 h-4\" />;\n      case 'invalid': return <X className=\"w-4 h-4\" />;\n      default: return <Clock className=\"w-4 h-4\" />;\n    }\n  };\n\n  const validateNumbers = (text: string) => {\n    const lines = text.split('\\n').filter(line => line.trim());\n    const numbers = lines.map(line => line.trim());\n\n    const phoneRegex = /^[\\d\\s+()-]{10,}$/;\n    const validNums = numbers.filter(n => phoneRegex.test(n));\n    const unique = new Set(validNums);\n    const duplicates = validNums.length - unique.size;\n    const invalid = numbers.length - validNums.length;\n\n    setNumberValidation({\n      valid: unique.size,\n      duplicates,\n      invalid\n    });\n  };\n\n  const handleTemplateChange = (templateId: string) => {\n    setSelectedTemplate(templateId);\n    const template = templates.find(t => t.id === templateId);\n    if (template) {\n      setMessage(template.content);\n    }\n  };\n\n  const handleSendCampaign = async () => {\n    if (!campaignName || !routeType || !senderId || !message || !user) {\n      alert('Please fill in all required fields');\n      return;\n    }\n\n    if (numberValidation.valid === 0) {\n      alert('Please add valid phone numbers');\n      return;\n    }\n\n    try {\n      const { data: campaign, error } = await db\n        .from('sms_campaigns')\n        .insert({\n          user_id: user.id,\n          campaign_name: campaignName,\n          route_type: routeType,\n          sender_id: senderId,\n          message,\n          template_id: selectedTemplate || null,\n          recipient_source: recipientMode,\n          total_recipients: pastedNumbers.split('\\n').filter(l => l.trim()).length,\n          sent_recipients: numberValidation.valid,\n          insent_recipients: numberValidation.invalid,\n          duplicate_numbers: numberValidation.duplicates,\n          status: sendMode === 'now' ? 'in_progress' : 'scheduled',\n          created_by: user.id\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      alert('Campaign created successfully!');\n      resetForm();\n      loadCampaigns();\n    } catch (error) {\n      console.error('Error creating campaign:', error);\n      alert('Failed to create campaign');\n    }\n  };\n\n  const handlePauseCampaign = async (campaignId: string) => {\n    try {\n      const { error } = await db\n        .from('sms_campaigns')\n        .update({ status: 'paused' })\n        .eq('id', campaignId);\n\n      if (error) throw error;\n\n      alert('Campaign paused successfully');\n      loadCampaigns();\n    } catch (error) {\n      console.error('Error pausing campaign:', error);\n      alert('Failed to pause campaign');\n    }\n  };\n\n  const handleResumeCampaign = async (campaignId: string) => {\n    try {\n      const { error } = await db\n        .from('sms_campaigns')\n        .update({ status: 'in_progress' })\n        .eq('id', campaignId);\n\n      if (error) throw error;\n\n      alert('Campaign resumed successfully');\n      loadCampaigns();\n    } catch (error) {\n      console.error('Error resuming campaign:', error);\n      alert('Failed to resume campaign');\n    }\n  };\n\n  const handleDeleteCampaign = async (campaignId: string) => {\n    if (!confirm('Are you sure you want to delete this campaign?')) {\n      return;\n    }\n\n    try {\n      const { error } = await db\n        .from('sms_campaigns')\n        .delete()\n        .eq('id', campaignId);\n\n      if (error) throw error;\n\n      alert('Campaign deleted successfully');\n      loadCampaigns();\n    } catch (error) {\n      console.error('Error deleting campaign:', error);\n      alert('Failed to delete campaign');\n    }\n  };\n\n  const resetForm = () => {\n    setCampaignName('');\n    setRouteType('');\n    setSenderId('');\n    setSelectedTemplate('');\n    setMessage('');\n    setPastedNumbers('');\n    setRecipientMode('paste');\n    setSendMode('now');\n  };\n\n  const getCharCount = () => message.length;\n  const getSMSCount = () => Math.ceil(message.length / 160) || 1;\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'completed': return 'bg-green-500/20 text-green-400 border-green-500/30';\n      case 'in_progress': return 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30';\n      case 'scheduled': return 'bg-[#39FF14]/20/20 text-[#39FF14] border-[#39FF14]/30';\n      case 'paused': return 'bg-[#39FF14]/20 text-[#39FF14] border-[#39FF14]/30';\n      case 'failed': return 'bg-red-500/20 text-red-400 border-red-500/30';\n      default: return 'bg-slate-500/20 text-slate-400 border-slate-500/30';\n    }\n  };\n\n  const getCurrentTime = () => {\n    return new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\n  };\n\n\n  return (\n    <div className=\"flex-1 overflow-auto bg-[#012419]\">\n      <div className=\"p-8\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-2xl p-6\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div>\n                <p className=\"text-slate-400 text-sm font-medium mb-1\">Total Sent</p>\n                <p className=\"text-3xl font-bold text-white\">{stats.totalSent.toLocaleString()}</p>\n              </div>\n              <div className=\"bg-green-500/20 p-3 rounded-xl\">\n                <Send className=\"w-6 h-6 text-brand-lime\" />\n              </div>\n            </div>\n            <p className=\"text-slate-400 text-sm\">All time messages</p>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-2xl p-6\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div>\n                <p className=\"text-slate-400 text-sm font-medium mb-1\">Delivered</p>\n                <p className=\"text-3xl font-bold text-white\">{stats.delivered.toLocaleString()}</p>\n              </div>\n              <div className=\"bg-green-500/20 p-3 rounded-xl\">\n                <CheckCircle className=\"w-6 h-6 text-brand-lime\" />\n              </div>\n            </div>\n            <p className=\"text-green-400 text-sm\">{stats.totalSent ? Math.round((stats.delivered / stats.totalSent) * 100) : 0}% delivery rate</p>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-2xl p-6\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div>\n                <p className=\"text-slate-400 text-sm font-medium mb-1\">Pending</p>\n                <p className=\"text-3xl font-bold text-white\">{stats.pending.toLocaleString()}</p>\n              </div>\n              <div className=\"bg-[#39FF14]/20 p-3 rounded-xl\">\n                <Clock className=\"w-6 h-6 text-[#39FF14]\" />\n              </div>\n            </div>\n            <p className=\"text-slate-400 text-sm\">In queue</p>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-2xl p-6\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div>\n                <p className=\"text-slate-400 text-sm font-medium mb-1\">Failed</p>\n                <p className=\"text-3xl font-bold text-white\">{stats.failed.toLocaleString()}</p>\n              </div>\n              <div className=\"bg-[#39FF14]/20 p-3 rounded-xl\">\n                <AlertCircle className=\"w-6 h-6 text-[#39FF14]\" />\n              </div>\n            </div>\n            <p className=\"text-slate-400 text-sm\">Requires attention</p>\n          </div>\n        </div>\n\n        <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-1 mb-8 inline-flex\">\n          <button\n            onClick={() => setActiveView('compose')}\n            className={`px-6 py-2 rounded-lg transition-colors ${\n              activeView === 'compose'\n                ? 'bg-[#39FF14] text-black shadow-[0_0_15px_rgba(57,255,20,0.3)]'\n                : 'text-slate-400 hover:text-white'\n            }`}\n          >\n            Compose\n          </button>\n          <button\n            onClick={() => setActiveView('campaigns')}\n            className={`px-6 py-2 rounded-lg transition-colors ${\n              activeView === 'campaigns'\n                ? 'bg-[#39FF14] text-black shadow-[0_0_15px_rgba(57,255,20,0.3)]'\n                : 'text-slate-400 hover:text-white'\n            }`}\n          >\n            Campaigns\n          </button>\n          <button\n            onClick={() => setActiveView('templates')}\n            className={`px-6 py-2 rounded-lg transition-colors ${\n              activeView === 'templates'\n                ? 'bg-[#39FF14] text-black shadow-[0_0_15px_rgba(57,255,20,0.3)]'\n                : 'text-slate-400 hover:text-white'\n            }`}\n          >\n            Templates\n          </button>\n          <button\n            onClick={() => setActiveView('configuration')}\n            className={`px-6 py-2 rounded-lg transition-colors flex items-center gap-2 ${\n              activeView === 'configuration'\n                ? 'bg-[#39FF14] text-black shadow-[0_0_15px_rgba(57,255,20,0.3)]'\n                : 'text-slate-400 hover:text-white'\n            }`}\n          >\n            <Settings className=\"w-4 h-4\" />\n            Configuration\n          </button>\n        </div>\n\n        {activeView === 'compose' && (\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            <div className=\"lg:col-span-2\">\n              <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-6\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h2 className=\"text-2xl font-bold text-white\">Compose SMS API Message</h2>\n                  <button className=\"text-[#39FF14] hover:text-[#32e012] text-sm flex items-center gap-2 transition-colors\">\n                    <FileText className=\"w-4 h-4\" />\n                    Templates\n                  </button>\n                </div>\n\n                <div className=\"space-y-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Campaign Name <span className=\"text-red-400\">*</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={campaignName}\n                      onChange={(e) => setCampaignName(e.target.value)}\n                      placeholder=\"Enter campaign name\"\n                      className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-[#39FF14] transition-colors\"\n                    />\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                        Route Type <span className=\"text-red-400\">*</span>\n                      </label>\n                      <select\n                        value={routeType}\n                        onChange={(e) => setRouteType(e.target.value)}\n                        className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-[#39FF14]\"\n                      >\n                        <option value=\"\">Select Route Type</option>\n                        <option value=\"promotional\">Promotional</option>\n                        <option value=\"transactional\">Transactional</option>\n                        <option value=\"otp\">OTP</option>\n                      </select>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                        Sender ID <span className=\"text-red-400\">*</span>\n                      </label>\n                      <select\n                        value={senderId}\n                        onChange={(e) => setSenderId(e.target.value)}\n                        className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-[#39FF14]\"\n                      >\n                        <option value=\"\">Select Sender ID</option>\n                        <option value=\"NRGDIC\">NRGDIC</option>\n                        <option value=\"MYBRAND\">MYBRAND</option>\n                        <option value=\"COMPANY\">COMPANY</option>\n                      </select>\n                    </div>\n                  </div>\n\n                  <div>\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <label className=\"block text-sm font-medium text-slate-300\">\n                        Message Template\n                      </label>\n                      <button\n                        onClick={() => setActiveView('templates')}\n                        className=\"text-[#39FF14] hover:text-[#32e012] text-xs flex items-center gap-1 transition-colors\"\n                      >\n                        <FileText className=\"w-3 h-3\" />\n                        Browse Templates\n                      </button>\n                    </div>\n                    <select\n                      value={selectedTemplate}\n                      onChange={(e) => handleTemplateChange(e.target.value)}\n                      className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-[#39FF14]\"\n                    >\n                      <option value=\"\">Select Template</option>\n                      {templates.map(template => (\n                        <option key={template.id} value={template.id}>{template.template_name}</option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Message <span className=\"text-red-400\">*</span>\n                    </label>\n                    <textarea\n                      value={message}\n                      onChange={(e) => setMessage(e.target.value)}\n                      placeholder=\"Enter your Message\"\n                      rows={6}\n                      className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-[#39FF14] transition-colors\"\n                    />\n                    <p className=\"text-xs text-slate-500 mt-2\">\n                      Limit up to: 2400 | Characters: {getCharCount()} | Total SMS: {getSMSCount()}\n                    </p>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-3\">\n                      Send messages to <span className=\"text-red-400\">*</span>\n                    </label>\n                    <div className=\"flex gap-4 mb-4\">\n                      <label className=\"flex items-center gap-2 cursor-pointer\">\n                        <input\n                          type=\"radio\"\n                          checked={recipientMode === 'paste'}\n                          onChange={() => setRecipientMode('paste')}\n                          className=\"w-4 h-4 text-[#39FF14]\"\n                        />\n                        <span className=\"text-slate-300\">Paste Numbers</span>\n                      </label>\n                      <label className=\"flex items-center gap-2 cursor-pointer\">\n                        <input\n                          type=\"radio\"\n                          checked={recipientMode === 'upload'}\n                          onChange={() => setRecipientMode('upload')}\n                          className=\"w-4 h-4 text-[#39FF14]\"\n                        />\n                        <span className=\"text-slate-300\">Upload XLS or CSV</span>\n                      </label>\n                      <label className=\"flex items-center gap-2 cursor-pointer\">\n                        <input\n                          type=\"radio\"\n                          checked={recipientMode === 'phonebook'}\n                          onChange={() => setRecipientMode('phonebook')}\n                          className=\"w-4 h-4 text-[#39FF14]\"\n                        />\n                        <span className=\"text-slate-300\">Choose From Phonebook</span>\n                      </label>\n                    </div>\n\n                    {recipientMode === 'paste' && (\n                      <>\n                        <textarea\n                          value={pastedNumbers}\n                          onChange={(e) => setPastedNumbers(e.target.value)}\n                          placeholder=\"Paste your numbers here\"\n                          rows={8}\n                          className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:border-[#39FF14]\"\n                        />\n                        <div className=\"flex items-center justify-between mt-2\">\n                          <p className=\"text-xs text-slate-500\">\n                            Limit up to: 150000 | Count: {pastedNumbers.split('\\n').filter(l => l.trim()).length}\n                          </p>\n                          <div className=\"flex gap-4 text-xs\">\n                            <span className=\"text-green-400\">● Valid Numbers: {numberValidation.valid}</span>\n                            <span className=\"text-yellow-400\">● Duplicates: {numberValidation.duplicates}</span>\n                            <span className=\"text-red-400\">● Invalid Numbers: {numberValidation.invalid}</span>\n                          </div>\n                        </div>\n                      </>\n                    )}\n\n                    {recipientMode === 'upload' && (\n                      <div className=\"border-2 border-dashed border-slate-700 rounded-lg p-8 text-center\">\n                        <Upload className=\"w-12 h-12 text-slate-500 mx-auto mb-4\" />\n                        <p className=\"text-slate-400 mb-2\">Drop your XLS or CSV file here</p>\n                        <button className=\"bg-[#39FF14] hover:bg-[#32e012] text-black font-bold px-4 py-2 rounded-lg shadow-[0_0_10px_rgba(57,255,20,0.3)] transition-all\">\n                          Choose File\n                        </button>\n                      </div>\n                    )}\n\n                    {recipientMode === 'phonebook' && (\n                      <select className=\"w-full bg-slate-900/50 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-[#39FF14]\">\n                        <option value=\"\">Select Phonebook</option>\n                        <option value=\"customers\">Customers</option>\n                        <option value=\"leads\">Leads</option>\n                        <option value=\"subscribers\">Subscribers</option>\n                      </select>\n                    )}\n                  </div>\n\n                  <div>\n                    <div className=\"flex gap-4 mb-4\">\n                      <label className=\"flex items-center gap-2 cursor-pointer\">\n                        <input\n                          type=\"radio\"\n                          checked={sendMode === 'now'}\n                          onChange={() => setSendMode('now')}\n                          className=\"w-4 h-4 text-[#39FF14]\"\n                        />\n                        <span className=\"text-slate-300\">Send Now <span className=\"text-red-400\">*</span></span>\n                      </label>\n                      <label className=\"flex items-center gap-2 cursor-pointer\">\n                        <input\n                          type=\"radio\"\n                          checked={sendMode === 'schedule'}\n                          onChange={() => setSendMode('schedule')}\n                          className=\"w-4 h-4 text-[#39FF14]\"\n                        />\n                        <span className=\"text-slate-300\">Schedule</span>\n                      </label>\n                    </div>\n                  </div>\n\n                  <div className=\"flex gap-4\">\n                    <button\n                      onClick={resetForm}\n                      className=\"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg transition-colors\"\n                    >\n                      Cancel\n                    </button>\n                    <button\n                      onClick={handleSendCampaign}\n                      className=\"flex-1 bg-[#39FF14] hover:bg-[#32e012] text-black px-6 py-3 rounded-lg flex items-center justify-center gap-2 transition-all shadow-[0_0_15px_rgba(57,255,20,0.4)] hover:shadow-[0_0_20px_rgba(57,255,20,0.6)] font-bold\"\n                    >\n                      <Send className=\"w-5 h-5\" />\n                      Send Now\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-6 mb-6\">\n                <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                  <Smartphone className=\"w-5 h-5\" />\n                  Mobile Preview\n                </h3>\n\n                <div className=\"bg-slate-900 rounded-[2.5rem] p-4 border-4 border-slate-800 shadow-2xl\">\n                  <div className=\"bg-white rounded-[2rem] overflow-hidden\">\n                    <div className=\"bg-slate-100 px-4 py-2 flex items-center justify-between border-b border-slate-200\">\n                      <span className=\"text-xs font-medium\">{isMounted ? getCurrentTime() : '--:--'}</span>\n                      <span className=\"text-xs font-semibold\">{senderId || 'NRGDIC'}</span>\n                      <div className=\"flex items-center gap-1\">\n                        <Signal className=\"w-3 h-3\" />\n                        <Battery className=\"w-5 h-3\" />\n                      </div>\n                    </div>\n\n                    <div className=\"h-[400px] bg-gradient-to-b from-slate-50 to-slate-100 p-4 overflow-y-auto\">\n                      <div className=\"flex justify-end mb-4\">\n                        <div className=\"max-w-[85%]\">\n                          <div className=\"text-xs text-slate-500 mb-1 text-right\">Today, {isMounted ? getCurrentTime() : '--:--'}</div>\n                          {message ? (\n                            <div className=\"bg-[#39FF14]/20 text-white rounded-2xl rounded-tr-sm px-4 py-3 shadow-sm\">\n                              <p className=\"text-sm whitespace-pre-wrap\">{message}</p>\n                            </div>\n                          ) : (\n                            <div className=\"bg-[#39FF14]/20 text-[#39FF14] rounded-2xl rounded-tr-sm px-4 py-3 border border-dashed border-[#39FF14]/30\">\n                              <p className=\"text-sm\">Your message will appear here</p>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"bg-white border-t border-slate-200 p-3\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"flex-1 bg-slate-100 rounded-full px-4 py-2\">\n                          <span className=\"text-xs text-slate-400\">Text Message</span>\n                        </div>\n                        <button className=\"bg-[#39FF14] text-black p-2 rounded-full shadow-[0_0_10px_rgba(57,255,20,0.3)] hover:shadow-[0_0_15px_rgba(57,255,20,0.5)] transition-all\">\n                          <Send className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-4 space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-slate-400\">Characters:</span>\n                    <span className=\"text-white font-medium\">{getCharCount()}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-slate-400\">SMS Parts:</span>\n                    <span className=\"text-white font-medium\">{getSMSCount()}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-slate-400\">Recipients:</span>\n                    <span className=\"text-white font-medium\">{numberValidation.valid}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-6\">\n                <h3 className=\"text-lg font-semibold text-white mb-4\">Recent Campaigns</h3>\n                <div className=\"space-y-3\">\n                  {campaigns.slice(0, 3).map(campaign => (\n                    <div key={campaign.id} className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-3\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h4 className=\"text-white font-medium text-sm\">{campaign.campaign_name}</h4>\n                        <span className={`px-2 py-1 rounded-full text-xs font-medium border ${getStatusColor(campaign.status)}`}>\n                          {campaign.status === 'completed' ? 'Completed' \n                            : campaign.status === 'in_progress' ? 'In Progress' \n                            : campaign.status === 'paused' ? 'Paused'\n                            : campaign.status === 'draft' ? 'Draft'\n                            : 'Scheduled'}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between text-xs text-slate-400\">\n                        <span>Sent: {campaign.sent_recipients?.toLocaleString() || 0}</span>\n                        <span>Delivered: {campaign.sent_recipients?.toLocaleString() || 0}</span>\n                      </div>\n                      <p className=\"text-xs text-slate-500 mt-1\">{isMounted ? new Date(campaign.created_at).toLocaleString() : '-'}</p>\n                    </div>\n                  ))}\n                </div>\n                {campaigns.length > 3 && (\n                  <button\n                    onClick={() => setActiveView('campaigns')}\n                    className=\"w-full mt-3 text-[#39FF14] hover:text-[#32e012] text-sm py-2 transition-colors\"\n                  >\n                    View All\n                  </button>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeView === 'campaigns' && (\n          <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-2xl font-bold text-white\">Campaign History</h2>\n              <button\n                onClick={() => setActiveView('compose')}\n                className=\"bg-[#39FF14] hover:bg-[#32e012] text-black px-4 py-2 rounded-lg inline-flex items-center gap-2 font-bold shadow-[0_0_15px_rgba(57,255,20,0.3)] hover:shadow-[0_0_20px_rgba(57,255,20,0.5)] transition-all\"\n              >\n                <Send className=\"w-4 h-4\" />\n                New Campaign\n              </button>\n            </div>\n\n            <div className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-1 mb-6 inline-flex\">\n              <button\n                onClick={() => setStatusFilter('all')}\n                className={`px-4 py-2 rounded-lg transition-colors text-sm ${\n                  statusFilter === 'all'\n                    ? 'bg-[#39FF14] text-white'\n                    : 'text-slate-400 hover:text-white'\n                }`}\n              >\n                All\n              </button>\n              <button\n                onClick={() => setStatusFilter('draft')}\n                className={`px-4 py-2 rounded-lg transition-colors text-sm ${\n                  statusFilter === 'draft'\n                    ? 'bg-[#39FF14] text-white'\n                    : 'text-slate-400 hover:text-white'\n                }`}\n              >\n                Draft\n              </button>\n              <button\n                onClick={() => setStatusFilter('scheduled')}\n                className={`px-4 py-2 rounded-lg transition-colors text-sm ${\n                  statusFilter === 'scheduled'\n                    ? 'bg-[#39FF14] text-white'\n                    : 'text-slate-400 hover:text-white'\n                }`}\n              >\n                Scheduled\n              </button>\n              <button\n                onClick={() => setStatusFilter('in_progress')}\n                className={`px-4 py-2 rounded-lg transition-colors text-sm ${\n                  statusFilter === 'in_progress'\n                    ? 'bg-[#39FF14] text-white'\n                    : 'text-slate-400 hover:text-white'\n                }`}\n              >\n                Active\n              </button>\n              <button\n                onClick={() => setStatusFilter('paused')}\n                className={`px-4 py-2 rounded-lg transition-colors text-sm ${\n                  statusFilter === 'paused'\n                    ? 'bg-[#39FF14] text-white'\n                    : 'text-slate-400 hover:text-white'\n                }`}\n              >\n                Paused\n              </button>\n              <button\n                onClick={() => setStatusFilter('completed')}\n                className={`px-4 py-2 rounded-lg transition-colors text-sm ${\n                  statusFilter === 'completed'\n                    ? 'bg-[#39FF14] text-white'\n                    : 'text-slate-400 hover:text-white'\n                }`}\n              >\n                Completed\n              </button>\n            </div>\n            {campaigns.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <MessageSquare className=\"w-16 h-16 text-slate-600 mx-auto mb-4\" />\n                <p className=\"text-slate-400 text-lg mb-2\">No campaigns found</p>\n                <p className=\"text-slate-500 text-sm mb-4\">Create your first SMS campaign to get started</p>\n                <button\n                  onClick={() => setActiveView('compose')}\n                  className=\"bg-[#39FF14] hover:bg-[#32e012] text-black px-6 py-3 rounded-lg inline-flex items-center gap-2 font-bold shadow-[0_0_15px_rgba(57,255,20,0.3)] hover:shadow-[0_0_20px_rgba(57,255,20,0.5)] transition-all\"\n                >\n                  <Send className=\"w-4 h-4\" />\n                  Create Campaign\n                </button>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {campaigns.map(campaign => {\n                  const messages = campaignMessages[campaign.id] || [];\n                  const isExpanded = expandedCampaign === campaign.id;\n                  const isLoadingMessages = loadingMessages[campaign.id];\n\n                  const messageStats = messages.reduce((acc, msg) => {\n                    acc[msg.status] = (acc[msg.status] || 0) + 1;\n                    return acc;\n                  }, {} as Record<string, number>);\n\n                  return (\n                    <div key={campaign.id} className=\"bg-slate-900/50 border border-slate-700 rounded-lg overflow-hidden\">\n                      <div className=\"p-6\">\n                        <div className=\"flex items-start justify-between mb-4\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-3 mb-2\">\n                              <h3 className=\"text-xl font-semibold text-white\">{campaign.campaign_name}</h3>\n                              <span className={`px-3 py-1 rounded-full text-xs font-medium border ${getStatusColor(campaign.status)}`}>\n                                {campaign.status === 'completed' ? 'Completed' \n                                  : campaign.status === 'in_progress' ? 'In Progress' \n                                  : campaign.status === 'paused' ? 'Paused'\n                                  : campaign.status === 'draft' ? 'Draft'\n                                  : 'Scheduled'}\n                              </span>\n                            </div>\n                            <p className=\"text-slate-400 text-sm\">{isMounted ? new Date(campaign.created_at).toLocaleString() : '-'}</p>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            {campaign.status === 'in_progress' && (\n                              <button\n                                onClick={() => handlePauseCampaign(campaign.id)}\n                                className=\"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded-lg flex items-center gap-2 transition-colors\"\n                                title=\"Pause Campaign\"\n                              >\n                                <Pause className=\"w-4 h-4\" />\n                              </button>\n                            )}\n                            {campaign.status === 'paused' && (\n                              <button\n                                onClick={() => handleResumeCampaign(campaign.id)}\n                                className=\"bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg flex items-center gap-2 transition-colors\"\n                                title=\"Resume Campaign\"\n                              >\n                                <Play className=\"w-4 h-4\" />\n                              </button>\n                            )}\n                            <button\n                              onClick={() => handleDeleteCampaign(campaign.id)}\n                              className=\"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg flex items-center gap-2 transition-colors\"\n                              title=\"Delete Campaign\"\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                              onClick={() => toggleCampaignExpand(campaign.id)}\n                              className=\"bg-slate-800 hover:bg-slate-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors\"\n                            >\n                              {isExpanded ? (\n                                <>\n                                  <ChevronUp className=\"w-4 h-4\" />\n                                  Hide Details\n                                </>\n                              ) : (\n                                <>\n                                  <ChevronDown className=\"w-4 h-4\" />\n                                  View Details\n                                </>\n                              )}\n                            </button>\n                          </div>\n                        </div>\n                        <div className=\"grid grid-cols-4 gap-4\">\n                          <div>\n                            <p className=\"text-slate-500 text-xs mb-1\">Total Recipients</p>\n                            <p className=\"text-white text-lg font-semibold\">{campaign.total_recipients.toLocaleString()}</p>\n                          </div>\n                          <div>\n                            <p className=\"text-slate-500 text-xs mb-1\">Valid Numbers</p>\n                            <p className=\"text-[#39FF14] text-lg font-semibold\">\n                              {(campaign.total_recipients - (campaign.duplicate_numbers || 0)).toLocaleString()}\n                            </p>\n                          </div>\n                          <div>\n                            <p className=\"text-slate-500 text-xs mb-1\">Status</p>\n                            <p className=\"text-white text-lg font-semibold capitalize\">{campaign.status.replace('_', ' ')}</p>\n                          </div>\n                          <div>\n                            <p className=\"text-slate-500 text-xs mb-1\">Success Rate</p>\n                            <p className=\"text-white text-lg font-semibold\">\n                              {campaign.success_rate ? campaign.success_rate.toFixed(1) : 0}%\n                            </p>\n                          </div>\n                        </div>\n                      </div>\n\n                      {isExpanded && (\n                        <div className=\"border-t border-slate-700 bg-slate-800/30 p-6\">\n                          {isLoadingMessages ? (\n                            <div className=\"text-center py-8\">\n                              <Clock className=\"w-8 h-8 text-slate-500 mx-auto mb-2 animate-spin\" />\n                              <p className=\"text-slate-400\">Loading message details...</p>\n                            </div>\n                          ) : messages.length === 0 ? (\n                            <div className=\"text-center py-8\">\n                              <MessageSquare className=\"w-8 h-8 text-slate-500 mx-auto mb-2\" />\n                              <p className=\"text-slate-400\">No messages found for this campaign</p>\n                            </div>\n                          ) : (\n                            <>\n                              <div className=\"flex items-center justify-between mb-4\">\n                                <h4 className=\"text-lg font-semibold text-white\">Message Details</h4>\n                                <div className=\"flex gap-4 text-sm\">\n                                  <span className=\"flex items-center gap-1 text-[#39FF14]\">\n                                    <CheckCircle className=\"w-4 h-4\" />\n                                    Delivered: {messageStats.delivered || 0}\n                                  </span>\n                                  <span className=\"flex items-center gap-1 text-[#39FF14]\">\n                                    <Send className=\"w-4 h-4\" />\n                                    Sent: {messageStats.sent || 0}\n                                  </span>\n                                  <span className=\"flex items-center gap-1 text-[#39FF14]\">\n                                    <Clock className=\"w-4 h-4\" />\n                                    Pending: {messageStats.pending || 0}\n                                  </span>\n                                  <span className=\"flex items-center gap-1 text-[#39FF14]\">\n                                    <AlertCircle className=\"w-4 h-4\" />\n                                    Failed: {messageStats.failed || 0}\n                                  </span>\n                                </div>\n                              </div>\n\n                              <div className=\"bg-slate-900/50 border border-slate-700 rounded-lg overflow-hidden\">\n                                <div className=\"overflow-x-auto\">\n                                  <table className=\"w-full\">\n                                    <thead className=\"bg-slate-800/50 border-b border-slate-700\">\n                                      <tr>\n                                        <th className=\"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase\">Phone Number</th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase\">Status</th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase\">Sent At</th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase\">Delivered At</th>\n                                        <th className=\"px-4 py-3 text-left text-xs font-medium text-slate-400 uppercase\">Error</th>\n                                      </tr>\n                                    </thead>\n                                    <tbody className=\"divide-y divide-slate-700\">\n                                      {messages.map(message => (\n                                        <tr key={message.id} className=\"hover:bg-slate-800/30 transition-colors\">\n                                          <td className=\"px-4 py-3 text-sm text-white font-mono\">{message.phone_number}</td>\n                                          <td className=\"px-4 py-3\">\n                                            <div className={`flex items-center gap-2 text-sm font-medium ${getMessageStatusColor(message.status)}`}>\n                                              {getMessageStatusIcon(message.status)}\n                                              <span className=\"capitalize\">{message.status}</span>\n                                            </div>\n                                          </td>\n                                          <td className=\"px-4 py-3 text-sm text-slate-300\">\n                                            {isMounted && message.sent_at ? new Date(message.sent_at).toLocaleString() : '-'}\n                                          </td>\n                                          <td className=\"px-4 py-3 text-sm text-slate-300\">\n                                            {isMounted && message.delivered_at ? new Date(message.delivered_at).toLocaleString() : '-'}\n                                          </td>\n                                          <td className=\"px-4 py-3 text-sm\">\n                                            {message.error_message ? (\n                                              <div className=\"flex items-start gap-2\">\n                                                <AlertCircle className=\"w-4 h-4 text-red-400 flex-shrink-0 mt-0.5\" />\n                                                <span className=\"text-red-400 text-xs\">{message.error_message}</span>\n                                              </div>\n                                            ) : (\n                                              <span className=\"text-slate-500\">-</span>\n                                            )}\n                                          </td>\n                                        </tr>\n                                      ))}\n                                    </tbody>\n                                  </table>\n                                </div>\n                                {messages.length === 100 && (\n                                  <div className=\"bg-slate-800/30 border-t border-slate-700 px-4 py-3 text-center\">\n                                    <p className=\"text-slate-400 text-sm\">Showing first 100 messages</p>\n                                  </div>\n                                )}\n                              </div>\n                            </>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeView === 'templates' && (\n          <div className=\"bg-slate-800/50 border border-slate-700 rounded-xl p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-2xl font-bold text-white\">Message Templates</h2>\n              <button \n                onClick={() => setShowTemplateModal(true)}\n                className=\"bg-[#39FF14] hover:bg-[#32e012] text-white px-4 py-2 rounded-lg flex items-center gap-2\"\n              >\n                <FileText className=\"w-4 h-4\" />\n                Create Template\n              </button>\n            </div>\n            {templates.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <FileText className=\"w-16 h-16 text-slate-600 mx-auto mb-4\" />\n                <p className=\"text-slate-400 text-lg mb-2\">No templates found</p>\n                <p className=\"text-slate-500 text-sm\">Create your first template to get started</p>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {templates.map(template => (\n                  <div key={template.id} className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-5 hover:border-[#39FF14]/50 transition-all\">\n                    <div className=\"flex items-start justify-between mb-3\">\n                      <h3 className=\"text-white font-bold text-lg\">{template.template_name}</h3>\n                      {template.is_default && (\n                        <span className=\"px-2 py-1 bg-[#39FF14]/20/20 text-[#39FF14] text-xs rounded-full border border-[#39FF14]/30\">\n                          Default\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"mb-3\">\n                      <span className={`inline-block px-2 py-1 text-xs rounded-full ${\n                        template.category === 'promotional' ? 'bg-[#39FF14]/20 text-[#39FF14] border border-[#39FF14]/30' :\n                        template.category === 'transactional' ? 'bg-green-500/20 text-green-400 border border-green-500/30' :\n                        template.category === 'otp' ? 'bg-[#39FF14]/20 text-[#39FF14] border border-[#39FF14]/30' :\n                        template.category === 'reminder' ? 'bg-yellow-500/20 text-yellow-400 border border-yellow-500/30' :\n                        'bg-slate-500/20 text-slate-400 border border-slate-500/30'\n                      }`}>\n                        {template.category}\n                      </span>\n                    </div>\n                    <p className=\"text-slate-400 text-sm mb-3 line-clamp-2\">{template.description}</p>\n                    <div className=\"bg-slate-800 rounded p-3 mb-3\">\n                      <p className=\"text-slate-300 text-xs line-clamp-3 font-mono\">{template.content}</p>\n                    </div>\n                    {template.variables && template.variables.length > 0 && (\n                      <div className=\"mb-3\">\n                        <p className=\"text-slate-500 text-xs mb-1\">Variables:</p>\n                        <div className=\"flex flex-wrap gap-1\">\n                          {template.variables.map((variable, idx) => (\n                            <span key={idx} className=\"px-2 py-0.5 bg-slate-800 text-slate-400 text-xs rounded border border-slate-700\">\n                              {variable}\n                            </span>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                    <p className=\"text-slate-500 text-xs mb-4 italic\">{template.use_case}</p>\n                    <button\n                      onClick={() => {\n                        setActiveView('compose');\n                        handleTemplateChange(template.id);\n                      }}\n                      className=\"w-full bg-[#39FF14] hover:bg-[#32e012] text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors\"\n                    >\n                      Use Template\n                    </button>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {activeView === 'configuration' && (\n          <SMSConfiguration />\n        )}\n\n        {/* Template Creation Modal */}\n        {showTemplateModal && (\n          <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-slate-900 border border-slate-700 rounded-xl w-full max-w-5xl h-[90vh] flex flex-col overflow-hidden shadow-2xl\">\n              \n              {/* Header */}\n              <div className=\"flex items-center justify-between p-6 border-b border-slate-800 bg-slate-900\">\n                <div>\n                  <h3 className=\"text-xl font-bold text-white\">Create New Template</h3>\n                  <p className=\"text-slate-400 text-sm\">Design your SMS template with variables and preview</p>\n                </div>\n                <button onClick={() => setShowTemplateModal(false)} className=\"text-slate-400 hover:text-white transition-colors\">\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n\n              {/* Body calling flex-1 to scroll content if needed */}\n              <div className=\"flex-1 flex overflow-hidden\">\n                \n                {/* Left Panel: Form */}\n                <div className=\"w-1/2 p-6 overflow-y-auto border-r border-slate-800 space-y-6\">\n                  \n                  {/* Basic Info */}\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-slate-300 mb-1\">\n                        Template Name <span className=\"text-red-400\">*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={newTemplate.name}\n                        onChange={(e) => setNewTemplate({ ...newTemplate, name: e.target.value })}\n                        className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-[#39FF14]\"\n                        placeholder=\"e.g. Order Confirmation\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-slate-300 mb-1\">Category</label>\n                      <select\n                        value={newTemplate.category}\n                        onChange={(e) => setNewTemplate({ ...newTemplate, category: e.target.value })}\n                        className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-[#39FF14]\"\n                      >\n                        <option value=\"promotional\">Promotional</option>\n                        <option value=\"transactional\">Transactional</option>\n                        <option value=\"otp\">OTP</option>\n                        <option value=\"alert\">Alert</option>\n                        <option value=\"reminder\">Reminder</option>\n                        <option value=\"survey\">Survey</option>\n                      </select>\n                    </div>\n                  </div>\n\n                  {/* Use Case & Toggle */}\n                  <div className=\"grid grid-cols-2 gap-4 items-center\">\n                     <div>\n                      <label className=\"block text-sm font-medium text-slate-300 mb-1\">Use Case / Tag</label>\n                      <input\n                        type=\"text\"\n                        value={newTemplate.use_case}\n                        onChange={(e) => setNewTemplate({ ...newTemplate, use_case: e.target.value })}\n                        className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-[#39FF14]\"\n                        placeholder=\"e.g. Retail, Banking\"\n                      />\n                    </div>\n                    <div className=\"flex items-center gap-3 pt-6\">\n                      <div \n                        onClick={() => setNewTemplate({ ...newTemplate, is_default: !newTemplate.is_default })}\n                        className={`w-12 h-6 rounded-full cursor-pointer relative transition-colors ${newTemplate.is_default ? 'bg-[#39FF14]' : 'bg-slate-700'}`}\n                      >\n                        <div className={`absolute top-1 w-4 h-4 bg-white rounded-full transition-all ${newTemplate.is_default ? 'left-7' : 'left-1'}`} />\n                      </div>\n                      <span className=\"text-sm text-slate-300 cursor-pointer\" onClick={() => setNewTemplate({ ...newTemplate, is_default: !newTemplate.is_default })}>\n                        Set as Default\n                      </span>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-1\">Description</label>\n                    <input\n                      type=\"text\"\n                      value={newTemplate.description}\n                      onChange={(e) => setNewTemplate({ ...newTemplate, description: e.target.value })}\n                      className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:outline-none focus:border-[#39FF14]\"\n                      placeholder=\"Brief description of when to use this template\"\n                    />\n                  </div>\n\n                  <div className=\"border-t border-slate-800 pt-4\">\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                       Content <span className=\"text-red-400\">*</span>\n                    </label>\n                    <div className=\"relative\">\n                      <textarea\n                        value={newTemplate.content}\n                        onChange={(e) => setNewTemplate({ ...newTemplate, content: e.target.value })}\n                        rows={8}\n                        className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-[#39FF14] font-mono text-sm\"\n                        placeholder=\"Hi {{name}}, your order {{order_id}} has been shipped...\"\n                      />\n                      <div className=\"absolute bottom-3 right-3 text-xs text-slate-500 bg-slate-900/80 px-2 py-1 rounded\">\n                        {newTemplate.content.length} chars | {Math.ceil(newTemplate.content.length / 160) || 1} SMS\n                      </div>\n                    </div>\n                    \n                    {/* Variable Chips */}\n                    <div className=\"mt-3\">\n                      <p className=\"text-xs text-slate-400 mb-2\">Click to insert variable:</p>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {['name', 'date', 'time', 'amount', 'link', 'otp', 'id'].map(v => (\n                          <button\n                            key={v}\n                            onClick={() => setNewTemplate({ ...newTemplate, content: newTemplate.content + ` {{${v}}}` })}\n                            className=\"px-2 py-1 bg-slate-800 hover:bg-slate-700 border border-slate-700 hover:border-[#39FF14] text-[#39FF14] text-xs rounded transition-colors\"\n                          >\n                            {`{{${v}}}`}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Right Panel: Preview */}\n                <div className=\"w-1/2 bg-[#012419] p-8 flex flex-col items-center justify-center border-l border-slate-800\">\n                  <h4 className=\"text-slate-500 text-sm mb-4 uppercase tracking-wider font-semibold\">Live Preview</h4>\n                  \n                  {/* Phone Mockup */}\n                  <div className=\"w-[300px] h-[580px] bg-slate-900 border-4 border-slate-800 rounded-[3rem] p-4 relative shadow-2xl\">\n                    <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-32 h-6 bg-slate-800 rounded-b-xl z-10\"></div>\n                    <div className=\"h-full bg-[#012419] rounded-[2.2rem] overflow-hidden flex flex-col\">\n                      {/* Mobile Header */}\n                      <div className=\"bg-slate-900 p-4 pt-8 flex items-center gap-3 border-b border-slate-800\">\n                        <div className=\"w-8 h-8 rounded-full bg-[#39FF14] flex items-center justify-center text-white font-bold text-xs\">\n                          {newTemplate.category === 'promotional' ? 'BR' : 'CP'}\n                        </div>\n                        <div>\n                          <p className=\"text-white text-sm font-medium\">BrandName</p>\n                          <p className=\"text-slate-500 text-[10px]\">Just now via SMS</p>\n                        </div>\n                      </div>\n                      \n                      {/* Message Bubble */}\n                      <div className=\"flex-1 p-4 bg-[#012419]/50\">\n                        <div className=\"bg-slate-800 rounded-2xl rounded-tl-sm p-3 max-w-[85%] mb-2\">\n                          <p className=\"text-slate-200 text-sm leading-relaxed whitespace-pre-wrap break-words\">\n                            {newTemplate.content || \"Your message preview will appear here...\"}\n                          </p>\n                        </div>\n                        {newTemplate.content && (\n                           <p className=\"text-slate-600 text-[10px] ml-1\">Delivered</p>\n                        )}\n                      </div>\n\n                       {/* Mobile Footer input mock */}\n                       <div className=\"p-3 bg-slate-900 border-t border-slate-800\">\n                          <div className=\"h-8 bg-slate-800 border border-slate-700 rounded-full w-full\"></div>\n                       </div>\n                    </div>\n                  </div>\n                  <p className=\"text-slate-500 text-xs mt-6\">Preview represents how the message might appear on a mobile device.</p>\n                </div>\n\n              </div>\n\n              {/* Footer Actions */}\n              <div className=\"p-6 border-t border-slate-800 bg-slate-900 flex justify-between items-center\">\n                 <div className=\"text-xs text-slate-500\">\n                    <p>Fields marked with <span className=\"text-red-400\">*</span> are required.</p>\n                 </div>\n                 <div className=\"flex gap-3\">\n                  <button \n                    onClick={() => setShowTemplateModal(false)}\n                    className=\"px-6 py-2.5 text-slate-300 hover:text-white transition-colors\"\n                  >\n                    Cancel\n                  </button>\n                  <button \n                    onClick={handleSaveTemplate}\n                    className=\"bg-[#39FF14] hover:bg-[#32e012] text-white px-8 py-2.5 rounded-lg font-medium shadow-lg shadow-[#39FF14]/20 hover:shadow-[#39FF14]/20 transition-all\"\n                  >\n                    Save Template\n                  </button>\n                </div>\n              </div>\n\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}