{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/UserManagement.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport { UserPlus, Search, MoreVertical, Shield, Mail, Calendar, Edit2, Trash2, CheckCircle, XCircle, X } from 'lucide-react';\n\ntype User = {\n  id: string;\n  email: string;\n  full_name: string | null;\n  role: string;\n  balance: number;\n  created_at: string;\n};\n\nexport default function UserManagement() {\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedRole, setSelectedRole] = useState<string>('all');\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    full_name: '',\n    role: 'user',\n    balance: '0'\n  });\n  const [notification, setNotification] = useState<{\n    type: 'success' | 'error';\n    message: string;\n  } | null>(null);\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  useEffect(() => {\n    if (notification) {\n      const timer = setTimeout(() => setNotification(null), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [notification]);\n\n  const fetchUsers = async () => {\n    setLoading(true);\n    \n    // Hardcoded predefined users (matching login credentials)\n    const predefinedUsers: User[] = [\n      {\n        id: 'admin@cpaas.com',\n        email: 'admin@cpaas.com',\n        full_name: 'Admin User',\n        role: 'admin',\n        balance: 1000.00,\n        created_at: new Date().toISOString(),\n      },\n      {\n        id: 'presales@cpaas.com',\n        email: 'presales@cpaas.com',\n        full_name: 'Presales User',\n        role: 'user',\n        balance: 1000.00,\n        created_at: new Date().toISOString(),\n      },\n      {\n        id: 'sales@cpaas.com',\n        email: 'sales@cpaas.com',\n        full_name: 'Sales User',\n        role: 'user',\n        balance: 1000.00,\n        created_at: new Date().toISOString(),\n      },\n    ];\n\n    try {\n      const { data, error } = await db\n        .from('profiles')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (error) {\n        // If database is not available, just use predefined users\n        console.log('Database not available, showing predefined users only');\n        setUsers(predefinedUsers);\n      } else {\n        // Merge predefined users with database users (avoid duplicates)\n        const dbUsers = data || [];\n        const allUsers = [...predefinedUsers];\n        \n        // Add database users that aren't in the predefined list\n        dbUsers.forEach((dbUser: User) => {\n          if (!predefinedUsers.find(pu => pu.email === dbUser.email)) {\n            allUsers.push(dbUser);\n          }\n        });\n        \n        setUsers(allUsers);\n      }\n    } catch (err) {\n      console.log('Error fetching users, showing predefined users only:', err);\n      setUsers(predefinedUsers);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    try {\n      const { data: authData, error: authError } = await db.auth.signUp({\n        email: formData.email,\n        password: formData.password,\n        options: {\n          data: {\n            full_name: formData.full_name,\n          }\n        }\n      });\n\n      if (authError) throw authError;\n\n      if (authData.user) {\n        const { error: profileError } = await db\n          .from('profiles')\n          .update({\n            full_name: formData.full_name,\n            role: formData.role,\n            balance: parseFloat(formData.balance)\n          })\n          .eq('id', authData.user.id);\n\n        if (profileError) throw profileError;\n      }\n\n      setNotification({\n        type: 'success',\n        message: 'User added successfully'\n      });\n\n      setShowAddModal(false);\n      setFormData({\n        email: '',\n        password: '',\n        full_name: '',\n        role: 'user',\n        balance: '0'\n      });\n\n      await fetchUsers();\n    } catch (error: any) {\n      console.error('Error adding user:', error);\n      setNotification({\n        type: 'error',\n        message: error.message || 'Failed to add user'\n      });\n    }\n  };\n\n  const filteredUsers = users.filter(user => {\n    const matchesSearch = user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         user.full_name?.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesRole = selectedRole === 'all' || user.role === selectedRole;\n    return matchesSearch && matchesRole;\n  });\n\n  const getRoleBadgeColor = (role: string) => {\n    switch (role) {\n      case 'admin': return 'bg-red-500/20 text-red-400 border-red-500/50';\n      case 'developer': return 'bg-[#39FF14]/20/20 text-[#39FF14] border-[#39FF14]/50';\n      case 'user': return 'bg-slate-500/20 text-slate-400 border-slate-500/50';\n      default: return 'bg-slate-500/20 text-slate-400 border-slate-500/50';\n    }\n  };\n\n  const deleteUser = async (userId: string) => {\n    if (!confirm('Are you sure you want to delete this user?')) return;\n\n    const { error } = await db\n      .from('profiles')\n      .delete()\n      .eq('id', userId);\n\n    if (error) {\n      console.error('Error deleting user:', error);\n      alert('Failed to delete user');\n    } else {\n      fetchUsers();\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">User Management</h2>\n          <p className=\"text-slate-400\">Manage user accounts, roles, and permissions</p>\n        </div>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-4 py-2 rounded-lg font-semibold transition-all\"\n        >\n          <UserPlus className=\"w-4 h-4\" />\n          Add User\n        </button>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n        <div className=\"flex items-center gap-4 mb-6\">\n          <div className=\"relative flex-1\">\n            <Search className=\"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search by email or name...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            />\n          </div>\n          <select\n            value={selectedRole}\n            onChange={(e) => setSelectedRole(e.target.value)}\n            className=\"bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n          >\n            <option value=\"all\">All Roles</option>\n            <option value=\"admin\">Admin</option>\n            <option value=\"developer\">Developer</option>\n            <option value=\"user\">User</option>\n          </select>\n        </div>\n\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-8 h-8 border-4 border-[#39FF14] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-slate-400\">Loading users...</p>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"border-b border-slate-700\">\n                  <th className=\"text-left py-3 px-4 text-sm font-semibold text-slate-400\">User</th>\n                  <th className=\"text-left py-3 px-4 text-sm font-semibold text-slate-400\">Role</th>\n                  <th className=\"text-right py-3 px-4 text-sm font-semibold text-slate-400\">Balance</th>\n                  <th className=\"text-left py-3 px-4 text-sm font-semibold text-slate-400\">Joined</th>\n                  <th className=\"text-center py-3 px-4 text-sm font-semibold text-slate-400\">Status</th>\n                  <th className=\"text-center py-3 px-4 text-sm font-semibold text-slate-400\">Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredUsers.map((user) => (\n                  <tr key={user.id} className=\"border-b border-slate-800 hover:bg-slate-800/30 transition-colors\">\n                    <td className=\"py-4 px-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 rounded-full bg-gradient-to-r from-[#39FF14] to-[#32e012] flex items-center justify-center\">\n                          <span className=\"text-white font-semibold text-sm\">\n                            {user.full_name?.charAt(0) || user.email.charAt(0).toUpperCase()}\n                          </span>\n                        </div>\n                        <div>\n                          <div className=\"text-white font-medium\">{user.full_name || 'N/A'}</div>\n                          <div className=\"text-slate-400 text-sm flex items-center gap-2\">\n                            <Mail className=\"w-3 h-3\" />\n                            {user.email}\n                          </div>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"py-4 px-4\">\n                      <span className={`inline-flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-semibold border ${getRoleBadgeColor(user.role)}`}>\n                        <Shield className=\"w-3 h-3\" />\n                        {user.role.toUpperCase()}\n                      </span>\n                    </td>\n                    <td className=\"py-4 px-4 text-right\">\n                      <span className=\"text-emerald-400 font-semibold\">RM {user.balance.toFixed(2)}</span>\n                    </td>\n                    <td className=\"py-4 px-4\">\n                      <div className=\"flex items-center gap-2 text-slate-400 text-sm\">\n                        <Calendar className=\"w-4 h-4\" />\n                        {new Date(user.created_at).toLocaleDateString()}\n                      </div>\n                    </td>\n                    <td className=\"py-4 px-4 text-center\">\n                      <span className=\"inline-flex items-center gap-2 px-3 py-1 rounded-lg text-xs font-semibold bg-emerald-500/20 text-emerald-400 border border-emerald-500/50\">\n                        <CheckCircle className=\"w-3 h-3\" />\n                        ACTIVE\n                      </span>\n                    </td>\n                    <td className=\"py-4 px-4\">\n                      <div className=\"flex items-center justify-center gap-2\">\n                        <button className=\"p-2 hover:bg-slate-700 rounded-lg transition-colors group\">\n                          <Edit2 className=\"w-4 h-4 text-slate-400 group-hover:text-[#39FF14]\" />\n                        </button>\n                        <button\n                          onClick={() => deleteUser(user.id)}\n                          className=\"p-2 hover:bg-slate-700 rounded-lg transition-colors group\"\n                        >\n                          <Trash2 className=\"w-4 h-4 text-slate-400 group-hover:text-red-400\" />\n                        </button>\n                        <button className=\"p-2 hover:bg-slate-700 rounded-lg transition-colors\">\n                          <MoreVertical className=\"w-4 h-4 text-slate-400\" />\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n\n            {filteredUsers.length === 0 && (\n              <div className=\"text-center py-12\">\n                <p className=\"text-slate-400\">No users found</p>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-6\">\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <Shield className=\"w-5 h-5 text-[#39FF14]\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Total Users</p>\n              <p className=\"text-2xl font-bold text-white\">{users.length}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">All registered users</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-red-500/20 p-3 rounded-lg\">\n              <Shield className=\"w-5 h-5 text-red-400\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Admins</p>\n              <p className=\"text-2xl font-bold text-white\">{users.filter(u => u.role === 'admin').length}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">Full access users</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-emerald-500/20 p-3 rounded-lg\">\n              <CheckCircle className=\"w-5 h-5 text-emerald-400\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Active Users</p>\n              <p className=\"text-2xl font-bold text-white\">{users.length}</p>\n            </div>\n          </div>\n          <p className=\"text-emerald-400 text-sm\">100% active</p>\n        </div>\n      </div>\n\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-slate-900 border border-slate-700 rounded-xl p-6 max-w-md w-full\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-2xl font-bold text-white\">Add New User</h2>\n              <button\n                onClick={() => {\n                  setShowAddModal(false);\n                  setFormData({\n                    email: '',\n                    password: '',\n                    full_name: '',\n                    role: 'user',\n                    balance: '0'\n                  });\n                }}\n                className=\"text-slate-400 hover:text-white\"\n              >\n                <X className=\"w-6 h-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleAddUser} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Email *</label>\n                <input\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  placeholder=\"user@example.com\"\n                  required\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Password *</label>\n                <input\n                  type=\"password\"\n                  value={formData.password}\n                  onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                  placeholder=\"Minimum 6 characters\"\n                  required\n                  minLength={6}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Full Name</label>\n                <input\n                  type=\"text\"\n                  value={formData.full_name}\n                  onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\n                  placeholder=\"John Doe\"\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Role</label>\n                <select\n                  value={formData.role}\n                  onChange={(e) => setFormData({ ...formData, role: e.target.value })}\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                >\n                  <option value=\"user\">User</option>\n                  <option value=\"developer\">Developer</option>\n                  <option value=\"admin\">Admin</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Initial Balance (RM)</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  value={formData.balance}\n                  onChange={(e) => setFormData({ ...formData, balance: e.target.value })}\n                  placeholder=\"0.00\"\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                />\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowAddModal(false);\n                    setFormData({\n                      email: '',\n                      password: '',\n                      full_name: '',\n                      role: 'user',\n                      balance: '0'\n                    });\n                  }}\n                  className=\"flex-1 bg-slate-800 hover:bg-slate-700 text-white px-4 py-2 rounded-lg transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"flex-1 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-4 py-2 rounded-lg font-semibold transition-all\"\n                >\n                  Add User\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {notification && (\n        <div className=\"fixed top-4 right-4 z-50 animate-slide-in\">\n          <div className={`${\n            notification.type === 'success' ? 'bg-green-500/20 border-green-500/50' : 'bg-red-500/20 border-red-500/50'\n          } border backdrop-blur-sm rounded-lg p-4 max-w-md`}>\n            <div className=\"flex items-start gap-3\">\n              <div className={`${\n                notification.type === 'success' ? 'bg-green-500' : 'bg-red-500'\n              } rounded-full p-1`}>\n                {notification.type === 'success' ? (\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path d=\"M5 13l4 4L19 7\"></path>\n                  </svg>\n                ) : (\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path d=\"M6 18L18 6M6 6l12 12\"></path>\n                  </svg>\n                )}\n              </div>\n              <div className=\"flex-1\">\n                <p className={`font-semibold ${notification.type === 'success' ? 'text-green-400' : 'text-red-400'}`}>\n                  {notification.type === 'success' ? 'Success!' : 'Error'}\n                </p>\n                <p className=\"text-white text-sm mt-1\">{notification.message}</p>\n              </div>\n              <button\n                onClick={() => setNotification(null)}\n                className=\"text-slate-400 hover:text-white\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path d=\"M6 18L18 6M6 6l12 12\"></path>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1299, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/AccessManagement.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport { Key, Plus, Shield, Lock, CheckCircle, XCircle, Copy, Eye, EyeOff, Trash2 } from 'lucide-react';\n\ntype ApiKey = {\n  id: string;\n  name: string;\n  key_prefix: string;\n  permissions: Record<string, unknown>;\n  last_used_at: string | null;\n  expires_at: string | null;\n  is_active: boolean;\n  created_at: string;\n};\n\ntype Permission = {\n  id: string;\n  resource: string;\n  actions: string[];\n};\n\nexport default function AccessManagement() {\n  const [apiKeys, setApiKeys] = useState<ApiKey[]>([]);\n  const [permissions, setPermissions] = useState<Permission[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showNewKeyForm, setShowNewKeyForm] = useState(false);\n  const [newKeyName, setNewKeyName] = useState('');\n  const [selectedPermissions, setSelectedPermissions] = useState({\n    send_messages: false,\n    read_analytics: false,\n    manage_campaigns: false,\n    manage_webhooks: false\n  });\n  const [notification, setNotification] = useState<{\n    type: 'success' | 'error';\n    message: string;\n  } | null>(null);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (notification) {\n      const timer = setTimeout(() => setNotification(null), 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [notification]);\n\n  const generateApiKey = () => {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let key = 'sk_';\n    for (let i = 0; i < 32; i++) {\n      key += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return key;\n  };\n\n  const handleGenerateKey = async () => {\n    if (!newKeyName.trim()) {\n      setNotification({\n        type: 'error',\n        message: 'Please enter a key name'\n      });\n      return;\n    }\n\n    try {\n      const { data: { user } } = await db.auth.getUser();\n      if (!user) throw new Error('Not authenticated');\n\n      const fullKey = generateApiKey();\n      const keyPrefix = fullKey.substring(0, 7);\n\n      const { error } = await db.from('api_keys').insert({\n        user_id: user.id,\n        name: newKeyName,\n        key_prefix: keyPrefix,\n        key_hash: fullKey,\n        permissions: selectedPermissions,\n        is_active: true\n      });\n\n      if (error) throw error;\n\n      setNotification({\n        type: 'success',\n        message: `API key generated: ${fullKey}`\n      });\n\n      setNewKeyName('');\n      setSelectedPermissions({\n        send_messages: false,\n        read_analytics: false,\n        manage_campaigns: false,\n        manage_webhooks: false\n      });\n      setShowNewKeyForm(false);\n      fetchData();\n    } catch (error: any) {\n      console.error('Error generating API key:', error);\n      setNotification({\n        type: 'error',\n        message: error.message || 'Failed to generate API key'\n      });\n    }\n  };\n\n  const sampleApiKeys: ApiKey[] = [\n    { id: 'ak1', name: 'Production Main API Key', key_prefix: 'sk_prod', permissions: { send_messages: true, read_analytics: true, manage_campaigns: true, manage_webhooks: true }, last_used_at: new Date(Date.now() - 5 * 60000).toISOString(), expires_at: null, is_active: true, created_at: new Date(Date.now() - 30 * 86400000).toISOString() },\n    { id: 'ak2', name: 'Staging / QA Key', key_prefix: 'sk_stag', permissions: { send_messages: true, read_analytics: true, manage_campaigns: false, manage_webhooks: false }, last_used_at: new Date(Date.now() - 2 * 3600000).toISOString(), expires_at: new Date(Date.now() + 60 * 86400000).toISOString(), is_active: true, created_at: new Date(Date.now() - 60 * 86400000).toISOString() },\n    { id: 'ak3', name: 'Postman / API Testing', key_prefix: 'sk_test', permissions: { send_messages: false, read_analytics: true, manage_campaigns: false, manage_webhooks: false }, last_used_at: new Date(Date.now() - 3 * 86400000).toISOString(), expires_at: null, is_active: true, created_at: new Date(Date.now() - 15 * 86400000).toISOString() },\n    { id: 'ak4', name: 'Legacy Integration (Deprecated)', key_prefix: 'sk_legc', permissions: { send_messages: true, read_analytics: false, manage_campaigns: false, manage_webhooks: false }, last_used_at: new Date(Date.now() - 45 * 86400000).toISOString(), expires_at: new Date(Date.now() - 5 * 86400000).toISOString(), is_active: false, created_at: new Date(Date.now() - 180 * 86400000).toISOString() },\n  ];\n\n  const fetchData = async () => {\n    setLoading(true);\n\n    try {\n      const [keysResult, permsResult] = await Promise.all([\n        db.from('api_keys').select('*').order('created_at', { ascending: false }),\n        db.from('user_permissions').select('*')\n      ]);\n\n      const keys = keysResult.data && keysResult.data.length > 0 ? keysResult.data : sampleApiKeys;\n      setApiKeys(keys);\n      if (permsResult.data) setPermissions(permsResult.data);\n    } catch {\n      setApiKeys(sampleApiKeys);\n    }\n    setLoading(false);\n  };\n\n  const toggleApiKey = async (keyId: string, currentStatus: boolean) => {\n    const { error } = await db\n      .from('api_keys')\n      .update({ is_active: !currentStatus })\n      .eq('id', keyId);\n\n    if (!error) {\n      fetchData();\n    }\n  };\n\n  const deleteApiKey = async (keyId: string) => {\n    if (!confirm('Are you sure you want to delete this API key?')) return;\n\n    const { error } = await db\n      .from('api_keys')\n      .delete()\n      .eq('id', keyId);\n\n    if (!error) {\n      fetchData();\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Access Management</h2>\n          <p className=\"text-slate-400\">Manage API keys, permissions, and access controls</p>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-6\">\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <Key className=\"w-5 h-5 text-[#39FF14]\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Total API Keys</p>\n              <p className=\"text-2xl font-bold text-white\">{apiKeys.length}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">Active and inactive</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-emerald-500/20 p-3 rounded-lg\">\n              <CheckCircle className=\"w-5 h-5 text-emerald-400\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Active Keys</p>\n              <p className=\"text-2xl font-bold text-white\">{apiKeys.filter(k => k.is_active).length}</p>\n            </div>\n          </div>\n          <p className=\"text-emerald-400 text-sm\">Currently active</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <Shield className=\"w-5 h-5 text-[#39FF14]\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Permissions</p>\n              <p className=\"text-2xl font-bold text-white\">{permissions.length}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">Custom permissions</p>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h3 className=\"text-xl font-bold text-white\">API Keys</h3>\n          <button\n            onClick={() => setShowNewKeyForm(!showNewKeyForm)}\n            className=\"flex items-center gap-2 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-4 py-2 rounded-lg font-semibold transition-all\"\n          >\n            <Plus className=\"w-4 h-4\" />\n            Generate New Key\n          </button>\n        </div>\n\n        {showNewKeyForm && (\n          <div className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-6 mb-6\">\n            <h4 className=\"text-white font-semibold mb-4\">Generate New API Key</h4>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Key Name</label>\n                <input\n                  type=\"text\"\n                  value={newKeyName}\n                  onChange={(e) => setNewKeyName(e.target.value)}\n                  placeholder=\"Production API Key\"\n                  className=\"w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n                />\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-slate-300 mb-2\">Permissions</label>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <label className=\"flex items-center gap-2 text-slate-300 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedPermissions.send_messages}\n                      onChange={(e) => setSelectedPermissions({ ...selectedPermissions, send_messages: e.target.checked })}\n                      className=\"rounded bg-slate-800 border-slate-700 text-[#39FF14]\"\n                    />\n                    <span className=\"text-sm\">Send Messages</span>\n                  </label>\n                  <label className=\"flex items-center gap-2 text-slate-300 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedPermissions.read_analytics}\n                      onChange={(e) => setSelectedPermissions({ ...selectedPermissions, read_analytics: e.target.checked })}\n                      className=\"rounded bg-slate-800 border-slate-700 text-[#39FF14]\"\n                    />\n                    <span className=\"text-sm\">Read Analytics</span>\n                  </label>\n                  <label className=\"flex items-center gap-2 text-slate-300 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedPermissions.manage_campaigns}\n                      onChange={(e) => setSelectedPermissions({ ...selectedPermissions, manage_campaigns: e.target.checked })}\n                      className=\"rounded bg-slate-800 border-slate-700 text-[#39FF14]\"\n                    />\n                    <span className=\"text-sm\">Manage Campaigns</span>\n                  </label>\n                  <label className=\"flex items-center gap-2 text-slate-300 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedPermissions.manage_webhooks}\n                      onChange={(e) => setSelectedPermissions({ ...selectedPermissions, manage_webhooks: e.target.checked })}\n                      className=\"rounded bg-slate-800 border-slate-700 text-[#39FF14]\"\n                    />\n                    <span className=\"text-sm\">Manage Webhooks</span>\n                  </label>\n                </div>\n              </div>\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={handleGenerateKey}\n                  className=\"flex-1 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-4 py-2 rounded-lg font-semibold transition-all\"\n                >\n                  Generate Key\n                </button>\n                <button\n                  onClick={() => {\n                    setShowNewKeyForm(false);\n                    setNewKeyName('');\n                    setSelectedPermissions({\n                      send_messages: false,\n                      read_analytics: false,\n                      manage_campaigns: false,\n                      manage_webhooks: false\n                    });\n                  }}\n                  className=\"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg font-medium transition-all\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"space-y-3\">\n          {apiKeys.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <Key className=\"w-12 h-12 text-slate-600 mx-auto mb-4\" />\n              <p className=\"text-slate-400\">No API keys generated yet</p>\n              <p className=\"text-slate-500 text-sm mt-2\">Create your first API key to get started</p>\n            </div>\n          ) : (\n            apiKeys.map((key) => (\n              <div key={key.id} className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <h4 className=\"text-white font-semibold\">{key.name}</h4>\n                      <span className={`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold ${\n                        key.is_active\n                          ? 'bg-emerald-500/20 text-emerald-400 border border-emerald-500/50'\n                          : 'bg-slate-500/20 text-slate-400 border border-slate-500/50'\n                      }`}>\n                        {key.is_active ? <CheckCircle className=\"w-3 h-3\" /> : <XCircle className=\"w-3 h-3\" />}\n                        {key.is_active ? 'Active' : 'Inactive'}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-4 text-sm text-slate-400\">\n                      <span className=\"font-mono\">{key.key_prefix}••••••••••••••••</span>\n                      <span>Created: {new Date(key.created_at).toLocaleDateString()}</span>\n                      {key.last_used_at && (\n                        <span>Last used: {new Date(key.last_used_at).toLocaleDateString()}</span>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <button className=\"p-2 hover:bg-slate-700 rounded-lg transition-colors group\">\n                      <Copy className=\"w-4 h-4 text-slate-400 group-hover:text-[#39FF14]\" />\n                    </button>\n                    <button\n                      onClick={() => toggleApiKey(key.id, key.is_active)}\n                      className=\"p-2 hover:bg-slate-700 rounded-lg transition-colors group\"\n                    >\n                      {key.is_active ? (\n                        <EyeOff className=\"w-4 h-4 text-slate-400 group-hover:text-[#39FF14]\" />\n                      ) : (\n                        <Eye className=\"w-4 h-4 text-slate-400 group-hover:text-emerald-400\" />\n                      )}\n                    </button>\n                    <button\n                      onClick={() => deleteApiKey(key.id)}\n                      className=\"p-2 hover:bg-slate-700 rounded-lg transition-colors group\"\n                    >\n                      <Trash2 className=\"w-4 h-4 text-slate-400 group-hover:text-red-400\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n        <h3 className=\"text-xl font-bold text-white mb-6\">Role Permissions</h3>\n        <div className=\"space-y-4\">\n          {['admin', 'developer', 'user'].map((role) => (\n            <div key={role} className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-4\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"flex items-center gap-3\">\n                  <div className={`p-2 rounded-lg ${\n                    role === 'admin' ? 'bg-red-500/20' :\n                    role === 'developer' ? 'bg-[#39FF14]/20' : 'bg-slate-500/20'\n                  }`}>\n                    <Shield className={`w-5 h-5 ${\n                      role === 'admin' ? 'text-red-400' :\n                      role === 'developer' ? 'text-[#39FF14]' : 'text-slate-400'\n                    }`} />\n                  </div>\n                  <div>\n                    <h4 className=\"text-white font-semibold capitalize\">{role}</h4>\n                    <p className=\"text-slate-400 text-sm\">\n                      {role === 'admin' && 'Full system access'}\n                      {role === 'developer' && 'API and campaign management'}\n                      {role === 'user' && 'Basic read access'}\n                    </p>\n                  </div>\n                </div>\n                <button className=\"text-[#39FF14] hover:text-[#39FF14] text-sm font-medium\">\n                  Edit Permissions\n                </button>\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                {role === 'admin' && (\n                  <>\n                    <span className=\"px-3 py-1 bg-emerald-500/20 text-emerald-400 text-xs rounded-full border border-emerald-500/30\">All Permissions</span>\n                  </>\n                )}\n                {role === 'developer' && (\n                  <>\n                    <span className=\"px-3 py-1 bg-[#39FF14]/20/20 text-[#39FF14] text-xs rounded-full border border-[#39FF14]/30\">Campaigns</span>\n                    <span className=\"px-3 py-1 bg-[#39FF14]/20/20 text-[#39FF14] text-xs rounded-full border border-[#39FF14]/30\">Channels</span>\n                    <span className=\"px-3 py-1 bg-[#39FF14]/20/20 text-[#39FF14] text-xs rounded-full border border-[#39FF14]/30\">API Keys</span>\n                    <span className=\"px-3 py-1 bg-[#39FF14]/20/20 text-[#39FF14] text-xs rounded-full border border-[#39FF14]/30\">Messages</span>\n                  </>\n                )}\n                {role === 'user' && (\n                  <>\n                    <span className=\"px-3 py-1 bg-slate-500/20 text-slate-400 text-xs rounded-full border border-slate-500/30\">View Campaigns</span>\n                    <span className=\"px-3 py-1 bg-slate-500/20 text-slate-400 text-xs rounded-full border border-slate-500/30\">View Messages</span>\n                  </>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {notification && (\n        <div className=\"fixed top-4 right-4 z-50\">\n          <div className={`${\n            notification.type === 'success' ? 'bg-green-500/20 border-green-500/50' : 'bg-red-500/20 border-red-500/50'\n          } border backdrop-blur-sm rounded-lg p-4 max-w-md`}>\n            <div className=\"flex items-start gap-3\">\n              <div className={`${\n                notification.type === 'success' ? 'bg-green-500' : 'bg-red-500'\n              } rounded-full p-1`}>\n                {notification.type === 'success' ? (\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path d=\"M5 13l4 4L19 7\"></path>\n                  </svg>\n                ) : (\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path d=\"M6 18L18 6M6 6l12 12\"></path>\n                  </svg>\n                )}\n              </div>\n              <div className=\"flex-1\">\n                <p className={`font-semibold ${notification.type === 'success' ? 'text-green-400' : 'text-red-400'}`}>\n                  {notification.type === 'success' ? 'Success!' : 'Error'}\n                </p>\n                <p className=\"text-white text-sm mt-1 break-all\">{notification.message}</p>\n              </div>\n              <button\n                onClick={() => setNotification(null)}\n                className=\"text-slate-400 hover:text-white\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path d=\"M6 18L18 6M6 6l12 12\"></path>\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2533, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/IntegrationsManagement.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport {\n  CheckCircle, XCircle, Settings, RefreshCw, ChevronDown, ChevronRight,\n  Code, MessageSquare, Shield, Database, Network, Zap, AlertCircle, Copy,\n  Eye, EyeOff, Plus, Info, Save, X, Wifi, Loader2, Terminal\n} from 'lucide-react';\n\ntype IntegrationStatus = 'connected' | 'disconnected' | 'error' | 'pending' | 'testing';\n\ntype FieldDef = {\n  key: string;\n  label: string;\n  type: 'text' | 'password' | 'number' | 'select' | 'url';\n  placeholder?: string;\n  options?: string[];\n  required?: boolean;\n  hint?: string;\n};\n\ntype IntegrationItem = {\n  id: string;\n  name: string;\n  description: string;\n  status: IntegrationStatus;\n  version?: string;\n  features: string[];\n  fields: FieldDef[];\n  defaultConfig: Record<string, string>;\n  lastSync?: string;\n  throughput?: string;\n};\n\ntype IntegrationCategory = {\n  id: string;\n  label: string;\n  icon: any;\n  color: string;\n  description: string;\n  integrations: IntegrationItem[];\n};\n\n// ------------------------------------------------------------------\n// Integration schema (fields define the edit form, defaultConfig the initial values)\n// ------------------------------------------------------------------\nconst integrationSchema: IntegrationCategory[] = [\n  {\n    id: 'messaging-protocols',\n    label: 'Messaging Protocols',\n    icon: MessageSquare,\n    color: '#39FF14',\n    description: 'Core messaging transport and relay protocols',\n    integrations: [\n      {\n        id: 'smpp',\n        name: 'SMPP',\n        description: 'Short Message Peer-to-Peer — high-throughput SMS delivery to carrier networks via SMPP v3.4.',\n        status: 'connected',\n        version: 'SMPP v3.4',\n        features: ['Bulk SMS dispatch', 'DLR callbacks', 'Session binding (TX/RX/TRX)', 'Throttling control', 'Enquire link keepalive'],\n        fields: [\n          { key: 'host', label: 'Host', type: 'text', placeholder: 'smpp.carrier.example.com', required: true },\n          { key: 'port', label: 'Port', type: 'number', placeholder: '2775', required: true },\n          { key: 'system_id', label: 'System ID', type: 'text', placeholder: 'your_system_id', required: true },\n          { key: 'password', label: 'Password', type: 'password', placeholder: 'SMPP password', required: true },\n          { key: 'system_type', label: 'System Type', type: 'text', placeholder: 'VMA' },\n          { key: 'bind_type', label: 'Bind Type', type: 'select', options: ['Transmitter (TX)', 'Receiver (RX)', 'Transceiver (TRX)'] },\n          { key: 'window_size', label: 'Window Size', type: 'number', placeholder: '10', hint: 'Max outstanding PDUs' },\n          { key: 'enquire_link_interval', label: 'Enquire Link Interval', type: 'text', placeholder: '30s' },\n        ],\n        defaultConfig: { host: 'smpp.carrier.cpaas.io', port: '2775', system_id: 'cpaas_prod_01', password: '', system_type: 'VMA', bind_type: 'Transceiver (TRX)', window_size: '10', enquire_link_interval: '30s' },\n        lastSync: new Date(Date.now() - 8 * 60000).toISOString(), throughput: '1,200 msg/sec'\n      },\n      {\n        id: 'smtp',\n        name: 'SMTP',\n        description: 'Simple Mail Transfer Protocol — transactional and bulk email delivery via relay servers.',\n        status: 'connected',\n        version: 'SMTP / ESMTP',\n        features: ['TLS/STARTTLS support', 'DKIM signing', 'SPF validation', 'Bounce handling', 'AUTH LOGIN / PLAIN'],\n        fields: [\n          { key: 'host', label: 'SMTP Host', type: 'text', placeholder: 'smtp.relay.example.com', required: true },\n          { key: 'port', label: 'Port', type: 'number', placeholder: '587', required: true },\n          { key: 'username', label: 'Username / Email', type: 'text', placeholder: 'user@yourdomain.com', required: true },\n          { key: 'password', label: 'Password', type: 'password', required: true },\n          { key: 'encryption', label: 'Encryption', type: 'select', options: ['STARTTLS', 'SSL/TLS', 'None'] },\n          { key: 'from_domain', label: 'From Domain', type: 'text', placeholder: 'yourdomain.com' },\n          { key: 'dkim_selector', label: 'DKIM Selector', type: 'text', placeholder: 'k1' },\n          { key: 'timeout', label: 'Timeout', type: 'text', placeholder: '30s' },\n        ],\n        defaultConfig: { host: 'smtp.relay.cpaas.io', port: '587', username: '', password: '', encryption: 'STARTTLS', from_domain: '', dkim_selector: 'k1', timeout: '30s' },\n        lastSync: new Date(Date.now() - 12 * 60000).toISOString(), throughput: '500 emails/min'\n      }\n    ]\n  },\n  {\n    id: 'directory-auth',\n    label: 'Directory & Authentication',\n    icon: Shield,\n    color: '#22d3ee',\n    description: 'Identity providers and directory services',\n    integrations: [\n      {\n        id: 'ldap',\n        name: 'LDAP / Active Directory',\n        description: 'LDAPv3 directory for enterprise SSO, user provisioning, and role mapping to platform roles.',\n        status: 'connected',\n        version: 'LDAPv3',\n        features: ['LDAPS (SSL/TLS)', 'Group-based role mapping', 'User sync & provisioning', 'Nested group support', 'Start TLS'],\n        fields: [\n          { key: 'host', label: 'LDAP Host', type: 'text', placeholder: 'ldap.corp.example.com', required: true },\n          { key: 'port', label: 'Port', type: 'number', placeholder: '636 (LDAPS) or 389', required: true },\n          { key: 'bind_dn', label: 'Bind DN', type: 'text', placeholder: 'cn=svc-account,dc=corp,dc=com', required: true },\n          { key: 'bind_password', label: 'Bind Password', type: 'password', required: true },\n          { key: 'base_dn', label: 'Base DN', type: 'text', placeholder: 'dc=corp,dc=com', required: true },\n          { key: 'user_filter', label: 'User Filter', type: 'text', placeholder: '(sAMAccountName={{username}})' },\n          { key: 'group_dn', label: 'Group DN', type: 'text', placeholder: 'ou=Groups,dc=corp,dc=com' },\n          { key: 'tls', label: 'TLS Mode', type: 'select', options: ['LDAPS', 'StartTLS', 'None'] },\n        ],\n        defaultConfig: { host: 'ldap.corp.cpaas.io', port: '636', bind_dn: '', bind_password: '', base_dn: 'dc=corp,dc=io', user_filter: '(sAMAccountName={{username}})', group_dn: '', tls: 'LDAPS' },\n        lastSync: new Date(Date.now() - 25 * 60000).toISOString()\n      }\n    ]\n  },\n  {\n    id: 'api-integrations',\n    label: 'API & Web Services',\n    icon: Code,\n    color: '#a78bfa',\n    description: 'REST, GraphQL, and API platform connectors',\n    integrations: [\n      {\n        id: 'rest-api',\n        name: 'REST API',\n        description: 'RESTful API connector for webhooks, callbacks, and third-party service integration via HTTP/S.',\n        status: 'connected',\n        version: 'HTTP/1.1 + HTTP/2',\n        features: ['OAuth 2.0 auth', 'JWT bearer tokens', 'Webhook delivery', 'Retry logic with backoff', 'OpenAPI 3.0 spec'],\n        fields: [\n          { key: 'base_url', label: 'Base URL', type: 'url', placeholder: 'https://api.example.com/v1', required: true },\n          { key: 'auth_type', label: 'Auth Type', type: 'select', options: ['OAuth 2.0 (Client Credentials)', 'Bearer Token', 'API Key', 'Basic Auth', 'None'] },\n          { key: 'client_id', label: 'Client ID', type: 'text', placeholder: 'your_client_id' },\n          { key: 'client_secret', label: 'Client Secret', type: 'password', placeholder: 'your_client_secret' },\n          { key: 'token_url', label: 'Token Endpoint', type: 'url', placeholder: 'https://auth.example.com/oauth/token' },\n          { key: 'api_key', label: 'API Key (if used)', type: 'password', placeholder: 'Bearer or X-API-Key value' },\n          { key: 'rate_limit', label: 'Rate Limit', type: 'text', placeholder: '1000 req/hour' },\n          { key: 'timeout', label: 'Timeout', type: 'text', placeholder: '30s' },\n        ],\n        defaultConfig: { base_url: 'https://api.platform.cpaas.io/v3', auth_type: 'OAuth 2.0 (Client Credentials)', client_id: '', client_secret: '', token_url: '', api_key: '', rate_limit: '1000 req/hour', timeout: '30s' },\n        lastSync: new Date(Date.now() - 2 * 60000).toISOString(), throughput: '1,000 req/hour'\n      },\n      {\n        id: 'graph-api',\n        name: 'Graph API',\n        description: 'Microsoft & Meta Graph API connector for Office 365, Teams, WhatsApp Business, and social integrations.',\n        status: 'connected',\n        version: 'Graph API v18 / MS Graph v1.0',\n        features: ['MS Teams messaging', 'WhatsApp Business API', 'Calendar & email access', 'User directory sync', 'Webhooks (change notifications)'],\n        fields: [\n          { key: 'provider', label: 'Provider', type: 'select', options: ['Microsoft + Meta', 'Microsoft Only', 'Meta Only'] },\n          { key: 'ms_tenant_id', label: 'MS Tenant ID', type: 'text', placeholder: 'corp.onmicrosoft.com' },\n          { key: 'ms_client_id', label: 'MS App (Client) ID', type: 'text', placeholder: 'xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx' },\n          { key: 'ms_client_secret', label: 'MS Client Secret', type: 'password' },\n          { key: 'meta_app_id', label: 'Meta App ID', type: 'text', placeholder: '123456789' },\n          { key: 'meta_token', label: 'Meta Permanent Token', type: 'password' },\n          { key: 'webhook_verify_token', label: 'Webhook Verify Token', type: 'password', hint: 'Used for Meta webhook verification' },\n          { key: 'scope', label: 'MS Scopes', type: 'text', placeholder: 'Chat.ReadWrite Mail.Send User.Read' },\n        ],\n        defaultConfig: { provider: 'Microsoft + Meta', ms_tenant_id: '', ms_client_id: '', ms_client_secret: '', meta_app_id: '', meta_token: '', webhook_verify_token: '', scope: 'Chat.ReadWrite Mail.Send User.Read' },\n        lastSync: new Date(Date.now() - 5 * 60000).toISOString()\n      },\n      {\n        id: 'postman',\n        name: 'Postman / API Testing',\n        description: 'Postman workspace sync for automated API testing, collection running, and CI/CD integration.',\n        status: 'connected',\n        version: 'Postman API v10',\n        features: ['Collection sync', 'Automated test runs (Newman)', 'Environment variables', 'CI/CD webhook triggers', 'API monitoring', 'Mock server'],\n        fields: [\n          { key: 'api_key', label: 'Postman API Key (PMAK)', type: 'password', required: true, placeholder: 'PMAK-xxxxxxxxxx' },\n          { key: 'workspace_id', label: 'Workspace ID', type: 'text', placeholder: 'ws_xxxxxxxx' },\n          { key: 'collection_id', label: 'Collection ID', type: 'text', placeholder: 'col_xxxxxxxx' },\n          { key: 'environment', label: 'Environment', type: 'select', options: ['Production', 'Staging', 'Development', 'Local'] },\n          { key: 'monitor_id', label: 'Monitor ID', type: 'text', placeholder: 'mon_xxxxxxxx' },\n          { key: 'schedule', label: 'Run Schedule', type: 'select', options: ['Every 5 minutes', 'Every 15 minutes', 'Every 30 minutes', 'Hourly', 'Daily', 'Manual'] },\n        ],\n        defaultConfig: { api_key: '', workspace_id: '', collection_id: '', environment: 'Production', monitor_id: '', schedule: 'Every 15 minutes' },\n        lastSync: new Date(Date.now() - 15 * 60000).toISOString()\n      },\n      {\n        id: 'general-api',\n        name: 'General API Gateway',\n        description: 'Centralized API gateway managing rate limits, versioning, and access control across all platform APIs.',\n        status: 'connected',\n        version: 'Kong Gateway v3.5',\n        features: ['JWT / API key auth', 'Rate limiting (global + per-consumer)', 'Request transformation', 'Canary releases', 'Plugin ecosystem'],\n        fields: [\n          { key: 'host', label: 'Gateway Host', type: 'text', placeholder: 'gateway.example.com', required: true },\n          { key: 'admin_port', label: 'Admin Port', type: 'number', placeholder: '8001' },\n          { key: 'proxy_port', label: 'Proxy Port', type: 'number', placeholder: '8000' },\n          { key: 'auth_plugin', label: 'Auth Plugin', type: 'select', options: ['JWT + Key-Auth', 'OAuth 2.0', 'Basic Auth', 'HMAC', 'Key Auth Only'] },\n          { key: 'rate_limit_global', label: 'Global Rate Limit', type: 'text', placeholder: '10,000 req/min' },\n          { key: 'upstream', label: 'Upstream URL', type: 'url', placeholder: 'http://internal-api:3000' },\n          { key: 'tls', label: 'TLS', type: 'select', options: ['Enabled (wildcard cert)', 'Enabled (custom cert)', 'Disabled'] },\n          { key: 'load_balancer', label: 'Load Balancer', type: 'select', options: ['Round-Robin', 'Least Connections', 'Hash (IP)', 'Random'] },\n        ],\n        defaultConfig: { host: 'gateway.cpaas.io', admin_port: '8001', proxy_port: '8000', auth_plugin: 'JWT + Key-Auth', rate_limit_global: '10,000 req/min', upstream: '', tls: 'Enabled (wildcard cert)', load_balancer: 'Round-Robin' },\n        lastSync: new Date(Date.now() - 10 * 60000).toISOString(), throughput: '10,000 req/min'\n      }\n    ]\n  },\n  {\n    id: 'bss-oss',\n    label: 'BSS / OSS Systems',\n    icon: Database,\n    color: '#f59e0b',\n    description: 'Business and Operational Support Systems',\n    integrations: [\n      {\n        id: 'bss',\n        name: 'BSS (Business Support System)',\n        description: 'Billing, mediation, and customer management system integration for telco-grade monetization.',\n        status: 'connected',\n        version: 'TM Forum Open API',\n        features: ['Real-time CDR mediation', 'Prepaid / postpaid billing', 'Product catalog sync', 'Invoice generation', 'Usage-based charging'],\n        fields: [\n          { key: 'bss_endpoint', label: 'BSS Endpoint', type: 'url', required: true, placeholder: 'https://bss.example.com/api/v2' },\n          { key: 'api_key', label: 'API Key', type: 'password', required: true },\n          { key: 'mediation_type', label: 'Mediation Type', type: 'select', options: ['Real-time CDR', 'Batch CDR', 'Event-based'] },\n          { key: 'billing_model', label: 'Billing Model', type: 'select', options: ['Prepaid + Postpaid', 'Prepaid Only', 'Postpaid Only'] },\n          { key: 'cdr_format', label: 'CDR Format', type: 'select', options: ['ASN.1 / CSV', 'JSON', 'XML', 'Diameter'] },\n          { key: 'sync_interval', label: 'Sync Interval', type: 'select', options: ['Real-time', 'Every 1 minute', 'Every 5 minutes', 'Every 15 minutes'] },\n        ],\n        defaultConfig: { bss_endpoint: '', api_key: '', mediation_type: 'Real-time CDR', billing_model: 'Prepaid + Postpaid', cdr_format: 'ASN.1 / CSV', sync_interval: 'Real-time' },\n        lastSync: new Date(Date.now() - 1 * 60000).toISOString(), throughput: '5,000 CDR/sec'\n      },\n      {\n        id: 'oss',\n        name: 'OSS (Operational Support System)',\n        description: 'Network inventory, provisioning, fault management, and performance monitoring integration.',\n        status: 'connected',\n        version: 'ETSI NFV / TM Forum',\n        features: ['Network inventory management', 'Service provisioning automation', 'Fault & alarm management (SNMP)', 'Performance KPI collection', 'NETCONF/YANG config'],\n        fields: [\n          { key: 'oss_endpoint', label: 'OSS Endpoint', type: 'url', required: true, placeholder: 'https://oss.example.com/api/v1' },\n          { key: 'api_key', label: 'API Key', type: 'password', required: true },\n          { key: 'fault_protocol', label: 'Fault Protocol', type: 'select', options: ['SNMP v3 + Syslog', 'SNMP v2c', 'Syslog Only', 'OpenConfig'] },\n          { key: 'config_protocol', label: 'Config Protocol', type: 'select', options: ['NETCONF / YANG', 'RESTCONF', 'SNMP Set', 'CLI (SSH)'] },\n          { key: 'performance_collector', label: 'Metrics Collector', type: 'select', options: ['Prometheus + Grafana', 'InfluxDB + Grafana', 'ELK Stack', 'Custom'] },\n          { key: 'discovery_interval', label: 'Discovery Interval', type: 'select', options: ['Real-time', '1 minute', '5 minutes', '15 minutes', '1 hour'] },\n        ],\n        defaultConfig: { oss_endpoint: '', api_key: '', fault_protocol: 'SNMP v3 + Syslog', config_protocol: 'NETCONF / YANG', performance_collector: 'Prometheus + Grafana', discovery_interval: '5 minutes' },\n        lastSync: new Date(Date.now() - 3 * 60000).toISOString()\n      }\n    ]\n  },\n  {\n    id: 'gateways',\n    label: 'Communication Gateways',\n    icon: Network,\n    color: '#f97316',\n    description: 'Carrier-grade messaging, voice, and media gateways',\n    integrations: [\n      {\n        id: 'sms-gateway',\n        name: 'SMS Gateway',\n        description: 'Carrier-grade SMS aggregator gateway with multi-route failover, DLR tracking, and number masking.',\n        status: 'connected',\n        version: 'SMPP v3.4 / HTTP',\n        features: ['Multi-carrier routing', 'Automatic failover', 'DLR tracking', 'Number masking / SenderID', 'Two-way SMS (MO/MT)', 'Flash SMS support'],\n        fields: [\n          { key: 'host', label: 'Gateway Host', type: 'text', required: true, placeholder: 'sms-gw.carrier.example.com' },\n          { key: 'port', label: 'Port', type: 'number', placeholder: '2776' },\n          { key: 'primary_route', label: 'Primary Route', type: 'text', placeholder: 'Telco A — MY' },\n          { key: 'fallback_route', label: 'Fallback Route', type: 'text', placeholder: 'Telco B — SG' },\n          { key: 'sender_id', label: 'Sender ID / Mask', type: 'text', placeholder: 'YourBrand', required: true },\n          { key: 'dlr_url', label: 'DLR Webhook URL', type: 'url', placeholder: 'https://yourapp.com/dlr/sms' },\n          { key: 'max_tps', label: 'Max TPS', type: 'text', placeholder: '500 msg/sec' },\n          { key: 'username', label: 'Username', type: 'text' },\n          { key: 'password', label: 'Password', type: 'password' },\n        ],\n        defaultConfig: { host: 'sms-gw.carrier.cpaas.io', port: '2776', primary_route: 'Telco A — MY', fallback_route: 'Telco B — SG', sender_id: 'CPaaSBiz', dlr_url: '', max_tps: '500 msg/sec', username: '', password: '' },\n        lastSync: new Date(Date.now() - 1 * 60000).toISOString(), throughput: '500 msg/sec'\n      },\n      {\n        id: 'rcs-gateway',\n        name: 'RCS Gateway',\n        description: 'Rich Communication Services gateway for verified sender messaging with carousels and quick replies.',\n        status: 'connected',\n        version: 'GSMA Universal Profile 2.4',\n        features: ['Verified sender (blue tick)', 'Rich cards & carousels', 'Suggested replies / actions', 'File sharing', 'Read receipts', 'Fallback to SMS'],\n        fields: [\n          { key: 'rcs_gateway', label: 'RCS Gateway URL', type: 'url', required: true, placeholder: 'https://rcs-gw.carrier.example.com' },\n          { key: 'api_key', label: 'API Key', type: 'password', required: true },\n          { key: 'sender_id', label: 'Verified Sender ID', type: 'text', required: true, placeholder: 'YourBrand_Verified' },\n          { key: 'fallback', label: 'Fallback Channel', type: 'select', options: ['SMS (automatic)', 'SMS (manual trigger)', 'None'] },\n          { key: 'profile', label: 'RCS Profile', type: 'select', options: ['Universal Profile 2.4', 'Universal Profile 2.3', 'Custom'] },\n          { key: 'dlr_webhook', label: 'DLR Webhook URL', type: 'url', placeholder: 'https://yourapp.com/dlr/rcs' },\n          { key: 'max_message_size', label: 'Max Message Size', type: 'text', placeholder: '100KB' },\n        ],\n        defaultConfig: { rcs_gateway: 'https://rcs-gw.carrier.cpaas.io', api_key: '', sender_id: 'CPaaS_Verified', fallback: 'SMS (automatic)', profile: 'Universal Profile 2.4', dlr_webhook: '', max_message_size: '100KB' },\n        lastSync: new Date(Date.now() - 7 * 60000).toISOString(), throughput: '200 msg/sec'\n      },\n      {\n        id: 'webrtc-gateway',\n        name: 'WebRTC Gateway',\n        description: 'Browser-based real-time communication gateway for HD audio/video calls and data channels.',\n        status: 'connected',\n        version: 'WebRTC W3C / RFC 8829',\n        features: ['STUN/TURN/ICE server', 'E2E encrypted media (SRTP/DTLS)', 'SFU media server (Janus)', 'NAT traversal', 'Screen sharing', 'Recording (S3)'],\n        fields: [\n          { key: 'signaling', label: 'Signaling (WSS)', type: 'url', required: true, placeholder: 'wss://webrtc.example.com/signal' },\n          { key: 'stun', label: 'STUN Server', type: 'text', placeholder: 'stun:stun.example.com:3478' },\n          { key: 'turn', label: 'TURN Server', type: 'text', placeholder: 'turn:turn.example.com:3478' },\n          { key: 'turn_username', label: 'TURN Username', type: 'text' },\n          { key: 'turn_password', label: 'TURN Password', type: 'password' },\n          { key: 'sfu', label: 'SFU Engine', type: 'select', options: ['Janus Gateway', 'mediasoup', 'Kurento', 'Ant Media', 'Custom'] },\n          { key: 'record_bucket', label: 'Recording Bucket (S3)', type: 'text', placeholder: 's3://your-bucket/recordings' },\n          { key: 'codec', label: 'Preferred Codec', type: 'select', options: ['VP9 + Opus', 'VP8 + Opus', 'H.264 + Opus', 'AV1 + Opus'] },\n        ],\n        defaultConfig: { signaling: 'wss://webrtc.media.cpaas.io/signal', stun: 'stun:stun.cpaas.io:3478', turn: 'turn:turn.cpaas.io:3478', turn_username: '', turn_password: '', sfu: 'Janus Gateway', record_bucket: '', codec: 'VP9 + Opus' },\n        lastSync: new Date(Date.now() - 3 * 60000).toISOString(), throughput: '500 concurrent calls'\n      },\n      {\n        id: 'sip-gateway',\n        name: 'SIP Gateway / Trunk',\n        description: 'Session Initiation Protocol gateway for carrier SIP trunking, PSTN interconnect, and IVR integration.',\n        status: 'connected',\n        version: 'SIP RFC 3261 / RTP',\n        features: ['SIP trunk registration', 'PSTN breakout (inbound/outbound)', 'G.711/G.722/Opus codec', 'DTMF (RFC 2833)', 'TLS/SRTP encryption', 'CDR generation'],\n        fields: [\n          { key: 'sip_proxy', label: 'SIP Proxy Host', type: 'text', required: true, placeholder: 'sip.trunk.example.com' },\n          { key: 'port', label: 'Port', type: 'number', placeholder: '5060 (UDP) or 5061 (TLS)' },\n          { key: 'username', label: 'SIP Username', type: 'text', required: true, placeholder: 'trunk_account_01' },\n          { key: 'password', label: 'SIP Password', type: 'password', required: true },\n          { key: 'domain', label: 'SIP Domain', type: 'text', placeholder: 'sip.example.com' },\n          { key: 'codec_preference', label: 'Codec Preference', type: 'select', options: ['G.722 > G.711u > Opus', 'G.711u > G.722', 'Opus > G.722 > G.711u', 'G.711u Only'] },\n          { key: 'registration_ttl', label: 'Registration TTL', type: 'text', placeholder: '3600s' },\n          { key: 'did_number', label: 'DID / DDI Number', type: 'text', placeholder: '+60123456789' },\n          { key: 'transport', label: 'Transport', type: 'select', options: ['UDP', 'TCP', 'TLS', 'Auto'] },\n        ],\n        defaultConfig: { sip_proxy: 'sip.trunk.cpaas.io', port: '5060', username: '', password: '', domain: 'sip.cpaas.io', codec_preference: 'G.722 > G.711u > Opus', registration_ttl: '3600s', did_number: '', transport: 'UDP' },\n        lastSync: new Date(Date.now() - 0 * 60000).toISOString(), throughput: '1,000 concurrent calls'\n      }\n    ]\n  },\n  {\n    id: 'payment-gateways',\n    label: 'Payment Gateways',\n    icon: Database,\n    color: '#818cf8',\n    description: 'Payment processing, recurring billing, and financial transaction gateways',\n    integrations: [\n      {\n        id: 'stripe',\n        name: 'Stripe',\n        description: 'Global card payments, subscriptions, invoicing, and financial infrastructure.',\n        status: 'disconnected',\n        version: 'Stripe API v2024',\n        features: ['Card payments (Visa/MC/Amex)', 'Recurring subscriptions', 'Webhooks', 'Refunds & disputes', 'Invoice generation', 'Multi-currency'],\n        fields: [\n          { key: 'publishable_key', label: 'Publishable Key', type: 'text', required: true, placeholder: 'pk_live_...' },\n          { key: 'secret_key', label: 'Secret Key', type: 'password', required: true, placeholder: 'sk_live_...' },\n          { key: 'webhook_secret', label: 'Webhook Signing Secret', type: 'password', placeholder: 'whsec_...' },\n          { key: 'webhook_url', label: 'Webhook Endpoint URL', type: 'url', placeholder: 'https://yourapp.com/webhooks/stripe' },\n          { key: 'currency', label: 'Default Currency', type: 'select', options: ['MYR', 'USD', 'SGD', 'EUR', 'GBP'] },\n          { key: 'mode', label: 'Mode', type: 'select', options: ['Live', 'Test'] },\n        ],\n        defaultConfig: { publishable_key: '', secret_key: '', webhook_secret: '', webhook_url: '', currency: 'MYR', mode: 'Test' },\n      },\n      {\n        id: 'paypal',\n        name: 'PayPal',\n        description: 'PayPal Checkout, PayPal Commerce Platform, and PayPal Subscriptions API.',\n        status: 'disconnected',\n        version: 'PayPal REST API v2',\n        features: ['PayPal Checkout button', 'Credit/debit card vault', 'Subscriptions', 'Payouts', 'Invoicing', 'Fraud protection'],\n        fields: [\n          { key: 'client_id', label: 'Client ID', type: 'text', required: true, placeholder: 'AaBbCcDd...' },\n          { key: 'client_secret', label: 'Client Secret', type: 'password', required: true },\n          { key: 'webhook_id', label: 'Webhook ID', type: 'text', placeholder: 'WH-xxxx' },\n          { key: 'webhook_url', label: 'Webhook URL', type: 'url', placeholder: 'https://yourapp.com/webhooks/paypal' },\n          { key: 'currency', label: 'Currency', type: 'select', options: ['MYR', 'USD', 'SGD', 'EUR'] },\n          { key: 'mode', label: 'Mode', type: 'select', options: ['Live', 'Sandbox'] },\n        ],\n        defaultConfig: { client_id: '', client_secret: '', webhook_id: '', webhook_url: '', currency: 'MYR', mode: 'Sandbox' },\n      },\n      {\n        id: 'billplz',\n        name: 'Billplz',\n        description: 'Malaysian payment gateway with FPX online banking, credit cards, and direct debit.',\n        status: 'disconnected',\n        version: 'Billplz API v3',\n        features: ['FPX online banking (MY)', 'Credit/debit card', 'Direct debit (CIMB, Maybank)', 'Bill & collection pages', 'Webhooks', 'Instant transfer'],\n        fields: [\n          { key: 'api_key', label: 'API Key', type: 'password', required: true, placeholder: 'Your Billplz API Key' },\n          { key: 'collection_id', label: 'Collection ID', type: 'text', required: true, placeholder: 'Your Billplz Collection ID' },\n          { key: 'x_signature_key', label: 'X-Signature Key', type: 'password', placeholder: 'For webhook verification' },\n          { key: 'callback_url', label: 'Callback URL', type: 'url', placeholder: 'https://yourapp.com/payment/billplz/callback' },\n          { key: 'redirect_url', label: 'Redirect URL', type: 'url', placeholder: 'https://yourapp.com/payment/success' },\n          { key: 'mode', label: 'Mode', type: 'select', options: ['Production', 'Sandbox'] },\n        ],\n        defaultConfig: { api_key: '', collection_id: '', x_signature_key: '', callback_url: '', redirect_url: '', mode: 'Sandbox' },\n      },\n      {\n        id: 'toyyibpay',\n        name: 'toyyibPay',\n        description: 'Malaysian payment gateway supporting FPX, credit/debit cards, and e-wallets.',\n        status: 'disconnected',\n        version: 'toyyibPay API v1',\n        features: ['FPX (all MY banks)', 'Credit/debit card', 'E-wallets (Touch n Go, GrabPay)', 'Auto-refund', 'Webhook callbacks', 'Custom bill pages'],\n        fields: [\n          { key: 'user_secret_key', label: 'User Secret Key', type: 'password', required: true },\n          { key: 'category_code', label: 'Category Code', type: 'text', required: true, placeholder: 'Your toyyibPay category code' },\n          { key: 'callback_url', label: 'Callback URL', type: 'url', placeholder: 'https://yourapp.com/payment/toyyib/callback' },\n          { key: 'return_url', label: 'Return URL', type: 'url', placeholder: 'https://yourapp.com/payment/result' },\n          { key: 'mode', label: 'Mode', type: 'select', options: ['Production', 'Development'] },\n        ],\n        defaultConfig: { user_secret_key: '', category_code: '', callback_url: '', return_url: '', mode: 'Development' },\n      },\n      {\n        id: 'ipay88',\n        name: 'iPay88',\n        description: 'Malaysian payment gateway with FPX, credit/debit cards, and regional payment methods across SEA.',\n        status: 'disconnected',\n        version: 'iPay88 API v2',\n        features: ['FPX online banking', 'Visa / Mastercard', 'AmexCard', 'E-wallets', 'Recurring billing', 'SEA multi-currency'],\n        fields: [\n          { key: 'merchant_code', label: 'Merchant Code', type: 'text', required: true, placeholder: 'iPayXXXXXX' },\n          { key: 'merchant_key', label: 'Merchant Key', type: 'password', required: true },\n          { key: 'response_url', label: 'Response URL', type: 'url', placeholder: 'https://yourapp.com/payment/ipay88/response' },\n          { key: 'backend_url', label: 'Backend URL', type: 'url', placeholder: 'https://yourapp.com/payment/ipay88/backend' },\n          { key: 'currency', label: 'Currency', type: 'select', options: ['MYR', 'USD', 'SGD', 'THB', 'IDR'] },\n          { key: 'mode', label: 'Environment', type: 'select', options: ['Production', 'Staging'] },\n        ],\n        defaultConfig: { merchant_code: '', merchant_key: '', response_url: '', backend_url: '', currency: 'MYR', mode: 'Staging' },\n      },\n      {\n        id: 'adyen',\n        name: 'Adyen',\n        description: 'Enterprise payment platform used by global businesses for card acquiring and alternative payment methods.',\n        status: 'disconnected',\n        version: 'Adyen API v69',\n        features: ['Card acquiring (global)', 'Alternative payment methods', 'Tokenization & vaulting', 'Fraud & risk management', '3DS2 authentication', 'POS + eCommerce'],\n        fields: [\n          { key: 'api_key', label: 'API Key', type: 'password', required: true, placeholder: 'AQE...xxx' },\n          { key: 'merchant_account', label: 'Merchant Account', type: 'text', required: true, placeholder: 'YourCompanyECOM' },\n          { key: 'client_key', label: 'Client Key (Drop-in)', type: 'text', placeholder: 'test_XXXXXXXXX or live_XXXXXXXXX' },\n          { key: 'webhook_hmac', label: 'Webhook HMAC Key', type: 'password', placeholder: 'For notification validation' },\n          { key: 'webhook_url', label: 'Webhook URL', type: 'url', placeholder: 'https://yourapp.com/webhooks/adyen' },\n          { key: 'environment', label: 'Environment', type: 'select', options: ['Live (EU)', 'Live (US)', 'Live (AU)', 'Test'] },\n          { key: 'currency', label: 'Default Currency', type: 'select', options: ['MYR', 'USD', 'EUR', 'GBP', 'SGD'] },\n        ],\n        defaultConfig: { api_key: '', merchant_account: '', client_key: '', webhook_hmac: '', webhook_url: '', environment: 'Test', currency: 'MYR' },\n      }\n    ]\n  }\n];\n\n// ------------------------------------------------------------------\n// Helpers\n// ------------------------------------------------------------------\nconst STORAGE_KEY = 'cpaas_integration_configs';\n\nfunction loadConfigs(): Record<string, Record<string, string>> {\n  try {\n    return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');\n  } catch {\n    return {};\n  }\n}\n\nfunction saveConfigs(configs: Record<string, Record<string, string>>) {\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(configs));\n}\n\nconst statusConfig: Record<IntegrationStatus, { label: string; color: string; dot: string }> = {\n  connected:    { label: 'Connected',    color: 'bg-[#39FF14]/15 text-[#39FF14] border-[#39FF14]/30',   dot: 'bg-[#39FF14]' },\n  disconnected: { label: 'Disconnected', color: 'bg-slate-500/15 text-slate-400 border-slate-500/30',   dot: 'bg-slate-400' },\n  error:        { label: 'Error',        color: 'bg-red-500/15 text-red-400 border-red-500/30',         dot: 'bg-red-400' },\n  pending:      { label: 'Pending',      color: 'bg-amber-500/15 text-amber-400 border-amber-500/30',   dot: 'bg-amber-400' },\n  testing:      { label: 'Testing…',    color: 'bg-cyan-500/15 text-cyan-400 border-cyan-500/30',      dot: 'bg-cyan-400 animate-pulse' },\n};\n\n// ------------------------------------------------------------------\n// Edit Modal\n// ------------------------------------------------------------------\ntype TestLog = { ts: string; msg: string; ok: boolean };\n\nfunction EditModal({\n  item, config, onSave, onClose\n}: {\n  item: IntegrationItem;\n  config: Record<string, string>;\n  onSave: (id: string, newConfig: Record<string, string>) => void;\n  onClose: () => void;\n}) {\n  const [form, setForm] = useState<Record<string, string>>({ ...config });\n  const [reveal, setReveal] = useState<Record<string, boolean>>({});\n  const [testing, setTesting] = useState(false);\n  const [testResult, setTestResult] = useState<{ success: boolean; details?: string; latency?: number } | null>(null);\n  const [logs, setLogs] = useState<TestLog[]>([]);\n  const [saved, setSaved] = useState(false);\n\n  const addLog = (msg: string, ok: boolean) =>\n    setLogs(prev => [{ ts: new Date().toLocaleTimeString(), msg, ok }, ...prev]);\n\n  const handleTest = async () => {\n    setTesting(true);\n    setTestResult(null);\n    addLog(`Testing ${item.name}…`, true);\n\n    try {\n      const res = await fetch('/api/integrations/test', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ integrationId: item.id, integrationName: item.name, config: form })\n      });\n      const data = await res.json();\n      setTestResult(data);\n      addLog(\n        data.success\n          ? `✓ Connected — ${data.details || 'OK'} (${data.latency}ms)`\n          : `✗ Failed — ${data.details || data.error}`,\n        data.success\n      );\n    } catch (err: any) {\n      setTestResult({ success: false, details: err.message });\n      addLog(`✗ Network error — ${err.message}`, false);\n    }\n    setTesting(false);\n  };\n\n  const handleSave = () => {\n    onSave(item.id, form);\n    setSaved(true);\n    addLog('✓ Configuration saved', true);\n    setTimeout(() => setSaved(false), 2000);\n  };\n\n  const isValid = item.fields\n    .filter(f => f.required)\n    .every(f => (form[f.key] || '').trim().length > 0);\n\n  return (\n    <div className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4\" onClick={onClose}>\n      <div\n        className=\"bg-[#011a12] border border-[#024d30] rounded-2xl w-full max-w-2xl max-h-[90vh] flex flex-col shadow-2xl shadow-black/60\"\n        onClick={e => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-[#024d30]\">\n          <div>\n            <h2 className=\"text-white font-black text-lg tracking-tight\">Configure {item.name}</h2>\n            <p className=\"text-slate-500 text-xs\">{item.version}</p>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-[#024d30] rounded-xl transition-colors\">\n            <X className=\"w-5 h-5 text-slate-400\" />\n          </button>\n        </div>\n\n        {/* Form */}\n        <div className=\"overflow-y-auto flex-1 px-6 py-5 space-y-4\">\n          <div className=\"grid grid-cols-2 gap-4\">\n            {item.fields.map(field => (\n              <div key={field.key} className={field.type === 'url' || (field.key === 'signaling' || field.key === 'base_url' || field.key === 'bss_endpoint' || field.key === 'oss_endpoint' || field.key === 'rcs_gateway') ? 'col-span-2' : ''}>\n                <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-widest mb-1.5\">\n                  {field.label}\n                  {field.required && <span className=\"text-[#39FF14] ml-1\">*</span>}\n                </label>\n\n                {field.type === 'select' ? (\n                  <select\n                    value={form[field.key] || ''}\n                    onChange={e => setForm(prev => ({ ...prev, [field.key]: e.target.value }))}\n                    className=\"w-full bg-[#012419] border border-[#024d30] focus:border-[#39FF14] focus:ring-1 focus:ring-[#39FF14]/30 rounded-xl px-3 py-2.5 text-white text-sm outline-none transition-all\"\n                  >\n                    {field.options?.map(opt => <option key={opt} value={opt}>{opt}</option>)}\n                  </select>\n                ) : (\n                  <div className=\"relative\">\n                    <input\n                      type={field.type === 'password' && !reveal[field.key] ? 'password' : field.type === 'number' ? 'number' : 'text'}\n                      value={form[field.key] || ''}\n                      onChange={e => setForm(prev => ({ ...prev, [field.key]: e.target.value }))}\n                      placeholder={field.placeholder}\n                      className=\"w-full bg-[#012419] border border-[#024d30] focus:border-[#39FF14] focus:ring-1 focus:ring-[#39FF14]/30 rounded-xl px-3 py-2.5 text-white text-sm outline-none transition-all font-mono pr-9\"\n                    />\n                    {field.type === 'password' && (\n                      <button\n                        type=\"button\"\n                        onClick={() => setReveal(prev => ({ ...prev, [field.key]: !prev[field.key] }))}\n                        className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 hover:text-[#39FF14] transition-colors\"\n                      >\n                        {reveal[field.key] ? <EyeOff className=\"w-3.5 h-3.5\" /> : <Eye className=\"w-3.5 h-3.5\" />}\n                      </button>\n                    )}\n                  </div>\n                )}\n                {field.hint && <p className=\"text-slate-600 text-[10px] mt-1\">{field.hint}</p>}\n              </div>\n            ))}\n          </div>\n\n          {/* Test Console */}\n          {(logs.length > 0 || testResult !== null) && (\n            <div className=\"bg-black/60 border border-[#024d30]/60 rounded-xl p-4 space-y-2\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <Terminal className=\"w-3.5 h-3.5 text-[#39FF14]\" />\n                <span className=\"text-[10px] font-black uppercase tracking-widest text-slate-500\">Connection Log</span>\n              </div>\n              {testResult !== null && (\n                <div className={`flex items-start gap-3 p-3 rounded-xl ${\n                  testResult.success ? 'bg-[#39FF14]/10 border border-[#39FF14]/20' : 'bg-red-500/10 border border-red-500/20'\n                }`}>\n                  {testResult.success\n                    ? <CheckCircle className=\"w-4 h-4 text-[#39FF14] shrink-0 mt-0.5\" />\n                    : <XCircle className=\"w-4 h-4 text-red-400 shrink-0 mt-0.5\" />}\n                  <div>\n                    <p className={`text-xs font-black uppercase tracking-widest ${testResult.success ? 'text-[#39FF14]' : 'text-red-400'}`}>\n                      {testResult.success ? 'Connection Successful' : 'Connection Failed'}\n                      {testResult.latency !== undefined && ` · ${testResult.latency}ms`}\n                    </p>\n                    {testResult.details && <p className=\"text-slate-300 text-xs mt-1\">{testResult.details}</p>}\n                  </div>\n                </div>\n              )}\n              <div className=\"space-y-1 max-h-28 overflow-y-auto\">\n                {logs.map((l, i) => (\n                  <div key={i} className=\"flex items-start gap-2 text-[11px] font-mono\">\n                    <span className=\"text-slate-600 shrink-0\">{l.ts}</span>\n                    <span className={l.ok ? 'text-slate-300' : 'text-red-400'}>{l.msg}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer actions */}\n        <div className=\"flex items-center gap-3 px-6 py-4 border-t border-[#024d30]\">\n          <button\n            onClick={handleTest}\n            disabled={testing || !isValid}\n            className=\"flex items-center gap-2 px-4 py-2.5 bg-[#024d30]/60 hover:bg-[#024d30] border border-[#024d30] text-slate-300 hover:text-white rounded-xl text-xs font-black uppercase tracking-widest transition-all disabled:opacity-40\"\n          >\n            {testing ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Wifi className=\"w-3.5 h-3.5\" />}\n            {testing ? 'Testing…' : 'Test Connection'}\n          </button>\n\n          <div className=\"ml-auto flex items-center gap-3\">\n            <button onClick={onClose} className=\"px-4 py-2.5 text-slate-400 hover:text-white text-xs font-black uppercase tracking-widest transition-colors\">\n              Cancel\n            </button>\n            <button\n              onClick={handleSave}\n              disabled={!isValid}\n              className={`flex items-center gap-2 px-5 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all disabled:opacity-40 ${\n                saved\n                  ? 'bg-[#39FF14]/20 text-[#39FF14] border border-[#39FF14]/30'\n                  : 'bg-[#39FF14] hover:bg-[#32e012] text-black'\n              }`}\n            >\n              {saved ? <CheckCircle className=\"w-3.5 h-3.5\" /> : <Save className=\"w-3.5 h-3.5\" />}\n              {saved ? 'Saved!' : 'Save Config'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ------------------------------------------------------------------\n// Integration Card\n// ------------------------------------------------------------------\nfunction IntegrationCard({\n  item, onEdit\n}: {\n  item: IntegrationItem;\n  onEdit: () => void;\n}) {\n  const [expanded, setExpanded] = useState(false);\n  const st = statusConfig[item.status];\n\n  return (\n    <div className={`bg-[#012419]/60 border rounded-2xl overflow-hidden transition-all ${expanded ? 'border-[#39FF14]/30' : 'border-[#024d30] hover:border-[#39FF14]/20'}`}>\n      <div className=\"flex items-center justify-between p-5 cursor-pointer\" onClick={() => setExpanded(!expanded)}>\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex items-center gap-2\">\n            <span className={`w-2 h-2 rounded-full ${st.dot}`} />\n            <span className={`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${st.color}`}>\n              {st.label}\n            </span>\n          </div>\n          <div>\n            <h4 className=\"text-white font-bold text-base\">{item.name}</h4>\n            <p className=\"text-slate-500 text-xs\">{item.version}</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          {item.throughput && <span className=\"text-[10px] font-bold text-slate-400 bg-[#024d30]/40 px-2 py-1 rounded-lg\">{item.throughput}</span>}\n          {item.lastSync && <span className=\"text-[10px] text-slate-500 hidden md:block\">Synced {new Date(item.lastSync).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}</span>}\n          <button\n            onClick={e => { e.stopPropagation(); onEdit(); }}\n            className=\"flex items-center gap-1.5 px-3 py-1.5 bg-[#39FF14]/10 hover:bg-[#39FF14] text-[#39FF14] hover:text-black border border-[#39FF14]/20 hover:border-[#39FF14] rounded-xl text-[10px] font-black uppercase tracking-widest transition-all\"\n          >\n            <Settings className=\"w-3 h-3\" /> Edit\n          </button>\n          {expanded ? <ChevronDown className=\"w-4 h-4 text-[#39FF14]\" /> : <ChevronRight className=\"w-4 h-4 text-slate-500\" />}\n        </div>\n      </div>\n\n      {expanded && (\n        <div className=\"px-5 pb-5 border-t border-[#024d30]/50 pt-5 space-y-4\">\n          <p className=\"text-slate-400 text-sm leading-relaxed\">{item.description}</p>\n          <div>\n            <h5 className=\"text-[10px] font-black uppercase tracking-[0.2em] text-slate-500 mb-3 flex items-center gap-2\">\n              <Zap className=\"w-3 h-3 text-[#39FF14]\" /> Features & Capabilities\n            </h5>\n            <div className=\"flex flex-wrap gap-2\">\n              {item.features.map((f, i) => (\n                <span key={i} className=\"flex items-center gap-1.5 px-3 py-1 bg-[#024d30]/40 border border-[#024d30] rounded-full text-xs text-slate-300\">\n                  <CheckCircle className=\"w-3 h-3 text-[#39FF14] shrink-0\" /> {f}\n                </span>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ------------------------------------------------------------------\n// Add Integration Modal (gateway / type picker)\n// ------------------------------------------------------------------\nconst ADD_CATALOG: { id: string; name: string; category: string; icon: string; description: string }[] = [\n  { id: 'stripe', name: 'Stripe', category: 'payment-gateways', icon: '💳', description: 'Global card payments & subscriptions' },\n  { id: 'paypal', name: 'PayPal', category: 'payment-gateways', icon: '🅿️', description: 'PayPal Checkout & Commerce Platform' },\n  { id: 'billplz', name: 'Billplz', category: 'payment-gateways', icon: '🇲🇾', description: 'Malaysian FPX + card gateway' },\n  { id: 'toyyibpay', name: 'toyyibPay', category: 'payment-gateways', icon: '💰', description: 'FPX, cards & e-wallets (MY)' },\n  { id: 'ipay88', name: 'iPay88', category: 'payment-gateways', icon: '💵', description: 'SEA multi-currency gateway' },\n  { id: 'adyen', name: 'Adyen', category: 'payment-gateways', icon: '🌐', description: 'Enterprise global acquiring' },\n  { id: 'smpp', name: 'SMPP', category: 'messaging-protocols', icon: '📡', description: 'High-throughput SMS carrier relay' },\n  { id: 'smtp', name: 'SMTP', category: 'messaging-protocols', icon: '✉️', description: 'Email relay server' },\n  { id: 'ldap', name: 'LDAP / AD', category: 'directory-auth', icon: '🔒', description: 'Enterprise directory & SSO' },\n  { id: 'rest-api', name: 'REST API', category: 'api-integrations', icon: '🔗', description: 'Generic REST / HTTP connector' },\n  { id: 'graph-api', name: 'Graph API', category: 'api-integrations', icon: '📊', description: 'MS + Meta Graph API' },\n  { id: 'postman', name: 'Postman', category: 'api-integrations', icon: '🧪', description: 'API testing & CI/CD' },\n  { id: 'general-api', name: 'API Gateway', category: 'api-integrations', icon: '⚙️', description: 'Kong API gateway' },\n  { id: 'bss', name: 'BSS', category: 'bss-oss', icon: '📋', description: 'Billing support system' },\n  { id: 'oss', name: 'OSS', category: 'bss-oss', icon: '🖧', description: 'Network ops support system' },\n  { id: 'sms-gateway', name: 'SMS Gateway', category: 'gateways', icon: '💬', description: 'Carrier SMS aggregator' },\n  { id: 'rcs-gateway', name: 'RCS Gateway', category: 'gateways', icon: '📲', description: 'Rich communication services' },\n  { id: 'webrtc-gateway', name: 'WebRTC', category: 'gateways', icon: '🎥', description: 'Real-time audio/video' },\n  { id: 'sip-gateway', name: 'SIP / Trunk', category: 'gateways', icon: '📞', description: 'Carrier SIP trunking' },\n];\n\nconst categoryLabels: Record<string, string> = {\n  'payment-gateways': '💳 Payment Gateways',\n  'messaging-protocols': '📡 Messaging Protocols',\n  'directory-auth': '🔒 Directory & Auth',\n  'api-integrations': '🔗 API & Web Services',\n  'bss-oss': '📋 BSS / OSS',\n  'gateways': '🌐 Communication Gateways',\n};\n\nfunction AddIntegrationModal({\n  onSelect, onClose\n}: {\n  onSelect: (id: string, categoryId: string) => void;\n  onClose: () => void;\n}) {\n  const [search, setSearch] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n\n  const filtered = ADD_CATALOG.filter(item => {\n    const matchSearch = item.name.toLowerCase().includes(search.toLowerCase()) ||\n      item.description.toLowerCase().includes(search.toLowerCase());\n    const matchCat = selectedCategory === 'all' || item.category === selectedCategory;\n    return matchSearch && matchCat;\n  });\n\n  const grouped = Object.entries(categoryLabels).reduce<Record<string, typeof ADD_CATALOG>>((acc, [key]) => {\n    const items = filtered.filter(i => i.category === key);\n    if (items.length) acc[key] = items;\n    return acc;\n  }, {});\n\n  return (\n    <div className=\"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4\" onClick={onClose}>\n      <div className=\"bg-[#011a12] border border-[#024d30] rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl\" onClick={e => e.stopPropagation()}>\n        <div className=\"flex items-center justify-between px-6 py-4 border-b border-[#024d30]\">\n          <div>\n            <h2 className=\"text-white font-black text-lg\">Add Integration</h2>\n            <p className=\"text-slate-500 text-xs\">Choose a gateway or protocol to configure</p>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-[#024d30] rounded-xl transition-colors\">\n            <X className=\"w-5 h-5 text-slate-400\" />\n          </button>\n        </div>\n\n        <div className=\"px-6 pt-4 space-y-3\">\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              value={search}\n              onChange={e => setSearch(e.target.value)}\n              placeholder=\"Search integrations…\"\n              className=\"w-full bg-[#012419] border border-[#024d30] focus:border-[#39FF14] rounded-xl px-4 py-2.5 text-white text-sm outline-none transition-all pl-9\"\n            />\n            <Info className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500\" />\n          </div>\n          <div className=\"flex gap-2 flex-wrap\">\n            {(['all', ...Object.keys(categoryLabels)]).map(cat => (\n              <button\n                key={cat}\n                onClick={() => setSelectedCategory(cat)}\n                className={`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${\n                  selectedCategory === cat ? 'bg-[#39FF14] text-black' : 'bg-[#024d30]/40 text-slate-400 border border-[#024d30]'\n                }`}\n              >\n                {cat === 'all' ? 'All' : categoryLabels[cat].split(' ').slice(1).join(' ')}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"overflow-y-auto flex-1 px-6 py-4 space-y-5\">\n          {Object.entries(grouped).map(([catId, items]) => (\n            <div key={catId}>\n              <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-500 mb-2\">{categoryLabels[catId]}</p>\n              <div className=\"grid grid-cols-2 gap-2\">\n                {items.map(item => (\n                  <button\n                    key={item.id}\n                    onClick={() => onSelect(item.id, item.category)}\n                    className=\"flex items-center gap-3 p-4 bg-[#012419]/80 border border-[#024d30] hover:border-[#39FF14]/40 hover:bg-[#024d30]/40 rounded-xl text-left transition-all group\"\n                  >\n                    <span className=\"text-2xl shrink-0\">{item.icon}</span>\n                    <div>\n                      <p className=\"text-white font-bold text-sm group-hover:text-[#39FF14] transition-colors\">{item.name}</p>\n                      <p className=\"text-slate-500 text-[10px] leading-snug\">{item.description}</p>\n                    </div>\n                  </button>\n                ))}\n              </div>\n            </div>\n          ))}\n          {filtered.length === 0 && (\n            <div className=\"text-center py-10\">\n              <p className=\"text-slate-500 text-sm\">No integrations match your search</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ------------------------------------------------------------------\n// Main Component\n// ------------------------------------------------------------------\nexport default function IntegrationsManagement() {\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(\n    new Set(integrationSchema.map(c => c.id))\n  );\n  const [activeFilter, setActiveFilter] = useState<'all' | IntegrationStatus>('all');\n  const [editingItem, setEditingItem] = useState<IntegrationItem | null>(null);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [configs, setConfigs] = useState<Record<string, Record<string, string>>>({});\n  const [categories, setCategories] = useState<IntegrationCategory[]>(integrationSchema);\n\n  // Load persisted configs from localStorage on mount\n  useEffect(() => {\n    const stored = loadConfigs();\n    setConfigs(stored);\n  }, []);\n\n  const handleSave = useCallback((id: string, newConfig: Record<string, string>) => {\n    const updated = { ...configs, [id]: newConfig };\n    setConfigs(updated);\n    saveConfigs(updated);\n    setCategories(prev => prev.map(cat => ({\n      ...cat,\n      integrations: cat.integrations.map(intg =>\n        intg.id === id\n          ? { ...intg, status: 'connected' as IntegrationStatus, lastSync: new Date().toISOString() }\n          : intg\n      )\n    })));\n  }, [configs]);\n\n  // When user picks an item from Add modal, find it in the schema and open its edit form\n  const handleAddSelect = useCallback((itemId: string, categoryId: string) => {\n    setShowAddModal(false);\n    // Find the integration in any category\n    for (const cat of integrationSchema) {\n      const found = cat.integrations.find(i => i.id === itemId);\n      if (found) {\n        // Ensure it's visible in categories state (mark as pending if not yet configured)\n        setCategories(prev => {\n          // Check if already present\n          const exists = prev.some(c => c.integrations.some(i => i.id === itemId));\n          if (exists) return prev;\n          return prev.map(c =>\n            c.id === categoryId\n              ? { ...c, integrations: [...c.integrations, { ...found, status: 'pending' as IntegrationStatus }] }\n              : c\n          );\n        });\n        // Expand that category\n        setExpandedCategories(prev => new Set([...prev, categoryId]));\n        // Open its edit modal immediately\n        setEditingItem(found);\n        return;\n      }\n    }\n  }, []);\n\n  const getConfig = (item: IntegrationItem) => ({\n    ...item.defaultConfig,\n    ...(configs[item.id] || {})\n  });\n\n  const toggleCategory = (id: string) => setExpandedCategories(prev => {\n    const next = new Set(prev);\n    next.has(id) ? next.delete(id) : next.add(id);\n    return next;\n  });\n\n  const totalConnected = categories.reduce((s, c) => s + c.integrations.filter(i => i.status === 'connected').length, 0);\n  const totalIntegrations = categories.reduce((s, c) => s + c.integrations.length, 0);\n  const totalErrors = categories.reduce((s, c) => s + c.integrations.filter(i => i.status === 'error').length, 0);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-start justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-black text-white mb-1 tracking-tight\">Integrations</h2>\n          <p className=\"text-slate-400 text-sm\">Configure and manage protocol connectors, gateways, and third-party systems</p>\n        </div>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 bg-[#39FF14] hover:bg-[#32e012] text-black px-4 py-2.5 rounded-xl font-black text-xs uppercase tracking-widest transition-all shadow-lg shadow-[#39FF14]/10\"\n        >\n          <Plus className=\"w-4 h-4\" /> Add Integration\n        </button>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n        {[\n          { label: 'Total', value: totalIntegrations, color: '#39FF14', icon: Network },\n          { label: 'Connected', value: totalConnected, color: '#39FF14', icon: CheckCircle },\n          { label: 'Categories', value: categories.length, color: '#22d3ee', icon: Database },\n          { label: 'Errors', value: totalErrors, color: totalErrors > 0 ? '#f87171' : '#39FF14', icon: AlertCircle },\n        ].map(stat => {\n          const Icon = stat.icon;\n          return (\n            <div key={stat.label} className=\"bg-[#012419]/60 border border-[#024d30] rounded-2xl p-5\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <div className=\"p-2.5 bg-[#024d30]/60 rounded-xl\">\n                  <Icon className=\"w-5 h-5\" style={{ color: stat.color }} />\n                </div>\n                <span className=\"text-3xl font-black text-white\">{stat.value}</span>\n              </div>\n              <p className=\"text-slate-500 text-xs uppercase tracking-widest font-bold\">{stat.label}</p>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Filter + info bar */}\n      <div className=\"flex items-center gap-2 flex-wrap\">\n        {(['all', 'connected', 'disconnected', 'error'] as const).map(f => (\n          <button\n            key={f}\n            onClick={() => setActiveFilter(f)}\n            className={`px-4 py-1.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${\n              activeFilter === f ? 'bg-[#39FF14] text-black' : 'bg-[#024d30]/40 text-slate-400 hover:text-white border border-[#024d30]'\n            }`}\n          >\n            {f}\n          </button>\n        ))}\n        <span className=\"ml-auto text-xs text-slate-500 flex items-center gap-1.5\">\n          <Info className=\"w-3.5 h-3.5\" /> Click <strong className=\"text-slate-400\">Edit</strong> to configure and test any integration\n        </span>\n      </div>\n\n      {/* Categories */}\n      <div className=\"space-y-6\">\n        {categories.map(category => {\n          const Icon = category.icon;\n          const isExpanded = expandedCategories.has(category.id);\n          const filtered = activeFilter === 'all'\n            ? category.integrations\n            : category.integrations.filter(i => i.status === activeFilter);\n\n          if (filtered.length === 0) return null;\n\n          return (\n            <div key={category.id} className=\"space-y-3\">\n              <button className=\"w-full flex items-center justify-between group\" onClick={() => toggleCategory(category.id)}>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"p-2 rounded-xl\" style={{ backgroundColor: `${category.color}15` }}>\n                    <Icon className=\"w-5 h-5\" style={{ color: category.color }} />\n                  </div>\n                  <div className=\"text-left\">\n                    <h3 className=\"text-white font-black text-sm tracking-tight\">{category.label}</h3>\n                    <p className=\"text-slate-500 text-xs\">{category.description}</p>\n                  </div>\n                  <span className=\"ml-2 px-2 py-0.5 rounded-full text-[10px] font-black bg-[#024d30]/60 text-slate-400\">{filtered.length}</span>\n                </div>\n                <div className=\"flex items-center gap-2 text-slate-500\">\n                  <span className=\"text-[10px] uppercase tracking-widest font-bold\">{filtered.filter(i => i.status === 'connected').length}/{filtered.length} Connected</span>\n                  {isExpanded ? <ChevronDown className=\"w-4 h-4\" /> : <ChevronRight className=\"w-4 h-4\" />}\n                </div>\n              </button>\n\n              {isExpanded && (\n                <div className=\"space-y-3 pl-4 border-l-2 border-[#024d30]/60\">\n                  {filtered.map(item => (\n                    <IntegrationCard\n                      key={item.id}\n                      item={item}\n                      onEdit={() => setEditingItem(item)}\n                    />\n                  ))}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Edit Modal */}\n      {editingItem && (\n        <EditModal\n          item={editingItem}\n          config={getConfig(editingItem)}\n          onSave={handleSave}\n          onClose={() => setEditingItem(null)}\n        />\n      )}\n\n      {/* Add Integration Modal */}\n      {showAddModal && (\n        <AddIntegrationModal\n          onSelect={handleAddSelect}\n          onClose={() => setShowAddModal(false)}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5672, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/SecurityManagement.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { Shield, Lock, Bell, Globe, Clock, Key, AlertTriangle, CheckCircle } from 'lucide-react';\n\ntype SecuritySettings = {\n  two_factor_enabled: boolean;\n  ip_whitelist: string[];\n  session_timeout: number;\n  login_notifications: boolean;\n  api_rate_limit: number;\n  allowed_domains: string[];\n};\n\nexport default function SecurityManagement() {\n  const { user } = useAuth();\n  const [settings, setSettings] = useState<SecuritySettings>({\n    two_factor_enabled: false,\n    ip_whitelist: [],\n    session_timeout: 60,\n    login_notifications: true,\n    api_rate_limit: 1000,\n    allowed_domains: ['*']\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [newIp, setNewIp] = useState('');\n  const [newDomain, setNewDomain] = useState('');\n\n  useEffect(() => {\n    fetchSecuritySettings();\n  }, []);\n\n  const fetchSecuritySettings = async () => {\n    if (!user) return;\n\n    setLoading(true);\n    const { data, error } = await db\n      .from('security_settings')\n      .select('*')\n      .eq('user_id', user.id)\n      .maybeSingle();\n\n    if (error) {\n      // Table may not exist yet — use default settings silently\n      const errMsg = error?.message || (typeof error === 'string' ? error : '');\n      console.log('Security settings not available, using defaults:', errMsg);\n    } else if (data) {\n      setSettings(data);\n    }\n    setLoading(false);\n  };\n\n  const updateSettings = async (updates: Partial<SecuritySettings>) => {\n    if (!user) return;\n\n    setSaving(true);\n    const newSettings = { ...settings, ...updates };\n\n    const { error } = await db\n      .from('security_settings')\n      .upsert({\n        user_id: user.id,\n        ...newSettings,\n        updated_at: new Date().toISOString()\n      });\n\n    if (error) {\n      const errMsg = error?.message || (typeof error === 'string' ? error : '');\n      console.log('Could not persist security settings (table may not exist):', errMsg);\n      // Still update local state so UI reflects the change\n    } else {\n      setSettings(newSettings);\n    }\n    setSaving(false);\n  };\n\n  const addToWhitelist = () => {\n    if (newIp && !settings.ip_whitelist.includes(newIp)) {\n      updateSettings({ ip_whitelist: [...settings.ip_whitelist, newIp] });\n      setNewIp('');\n    }\n  };\n\n  const removeFromWhitelist = (ip: string) => {\n    updateSettings({ ip_whitelist: settings.ip_whitelist.filter(i => i !== ip) });\n  };\n\n  const addDomain = () => {\n    if (newDomain && !settings.allowed_domains.includes(newDomain)) {\n      updateSettings({ allowed_domains: [...settings.allowed_domains, newDomain] });\n      setNewDomain('');\n    }\n  };\n\n  const removeDomain = (domain: string) => {\n    updateSettings({ allowed_domains: settings.allowed_domains.filter(d => d !== domain) });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"w-8 h-8 border-4 border-[#39FF14] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n        <p className=\"text-slate-400\">Loading security settings...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-2xl font-bold text-white mb-2\">Security Management</h2>\n        <p className=\"text-slate-400\">Configure security settings and access controls</p>\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-6\">\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className={`p-3 rounded-lg ${settings.two_factor_enabled ? 'bg-emerald-500/20' : 'bg-slate-500/20'}`}>\n              <Shield className={`w-5 h-5 ${settings.two_factor_enabled ? 'text-emerald-400' : 'text-slate-400'}`} style={{ color: '#40C706' }} />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">2FA Status</p>\n              <p className=\"text-lg font-bold text-white\">{settings.two_factor_enabled ? 'Enabled' : 'Disabled'}</p>\n            </div>\n          </div>\n          <p className={`text-sm ${settings.two_factor_enabled ? 'text-emerald-400' : 'text-slate-500'}`}>\n            {settings.two_factor_enabled ? 'Protected' : 'Not protected'}\n          </p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <Globe className=\"w-5 h-5 text-[#39FF14]\" style={{ color: '#40C706' }} />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">IP Whitelist</p>\n              <p className=\"text-lg font-bold text-white\">{settings.ip_whitelist.length}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">Allowed IPs</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <Key className=\"w-5 h-5 text-[#39FF14]\" style={{ color: '#40C706' }} />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">API Rate Limit</p>\n              <p className=\"text-lg font-bold text-white\">{settings.api_rate_limit}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">Requests/hour</p>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n        <h3 className=\"text-xl font-bold text-white mb-6\">Authentication Settings</h3>\n\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between p-4 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n                <Shield className=\"w-5 h-5 text-[#39FF14]\" style={{ color: '#40C706' }} />\n              </div>\n              <div>\n                <h4 className=\"text-white font-semibold\">Two-Factor Authentication</h4>\n                <p className=\"text-slate-400 text-sm\">Add an extra layer of security to your account</p>\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={settings.two_factor_enabled}\n                onChange={(e) => updateSettings({ two_factor_enabled: e.target.checked })}\n                className=\"sr-only peer\"\n                disabled={saving}\n              />\n              <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14]\"></div>\n            </label>\n          </div>\n\n          <div className=\"flex items-center justify-between p-4 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n                <Bell className=\"w-5 h-5 text-[#39FF14]\" style={{ color: '#40C706' }} />\n              </div>\n              <div>\n                <h4 className=\"text-white font-semibold\">Login Notifications</h4>\n                <p className=\"text-slate-400 text-sm\">Get notified when someone logs into your account</p>\n              </div>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={settings.login_notifications}\n                onChange={(e) => updateSettings({ login_notifications: e.target.checked })}\n                className=\"sr-only peer\"\n                disabled={saving}\n              />\n              <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14]\"></div>\n            </label>\n          </div>\n\n          <div className=\"p-4 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n            <div className=\"flex items-center gap-4 mb-4\">\n              <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n                <Clock className=\"w-5 h-5 text-[#39FF14]\" style={{ color: '#40C706' }} />\n              </div>\n              <div className=\"flex-1\">\n                <h4 className=\"text-white font-semibold\">Session Timeout</h4>\n                <p className=\"text-slate-400 text-sm\">Automatically log out after period of inactivity</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <input\n                type=\"range\"\n                min=\"15\"\n                max=\"480\"\n                step=\"15\"\n                value={settings.session_timeout}\n                onChange={(e) => updateSettings({ session_timeout: parseInt(e.target.value) })}\n                className=\"flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer\"\n                disabled={saving}\n              />\n              <span className=\"text-white font-semibold min-w-[80px]\">{settings.session_timeout} min</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n        <h3 className=\"text-xl font-bold text-white mb-6\">IP Whitelist</h3>\n\n        <div className=\"mb-4\">\n          <div className=\"flex gap-3\">\n            <input\n              type=\"text\"\n              value={newIp}\n              onChange={(e) => setNewIp(e.target.value)}\n              onKeyDown={(e) => {\n                if (e.key === 'Enter' && newIp && !saving) {\n                  addToWhitelist();\n                }\n              }}\n              placeholder=\"Enter IP address (e.g., 192.168.1.1)\"\n              className=\"flex-1 bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            />\n            <button\n              onClick={addToWhitelist}\n              disabled={!newIp || saving}\n              className=\"bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-6 py-2 rounded-lg font-semibold transition-all disabled:opacity-50\"\n            >\n              Add\n            </button>\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          {settings.ip_whitelist.length === 0 ? (\n            <p className=\"text-slate-400 text-center py-8\">No IP addresses in whitelist</p>\n          ) : (\n            settings.ip_whitelist.map((ip) => (\n              <div key={ip} className=\"flex items-center justify-between p-3 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n                <span className=\"text-white font-mono\">{ip}</span>\n                <button\n                  onClick={() => removeFromWhitelist(ip)}\n                  className=\"text-red-400 hover:text-red-300 text-sm font-medium\"\n                  disabled={saving}\n                >\n                  Remove\n                </button>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n        <h3 className=\"text-xl font-bold text-white mb-6\">CORS Allowed Domains</h3>\n\n        <div className=\"mb-4\">\n          <div className=\"flex gap-3\">\n            <input\n              type=\"text\"\n              value={newDomain}\n              onChange={(e) => setNewDomain(e.target.value)}\n              placeholder=\"Enter domain (e.g., example.com)\"\n              className=\"flex-1 bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            />\n            <button\n              onClick={addDomain}\n              disabled={!newDomain || saving}\n              className=\"bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-6 py-2 rounded-lg font-semibold transition-all disabled:opacity-50\"\n            >\n              Add\n            </button>\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          {settings.allowed_domains.map((domain) => (\n            <div key={domain} className=\"flex items-center justify-between p-3 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n              <div className=\"flex items-center gap-3\">\n                <Globe className=\"w-4 h-4 text-slate-400\" style={{ color: '#40C706' }} />\n                <span className=\"text-white font-mono\">{domain}</span>\n              </div>\n              {domain !== '*' && (\n                <button\n                  onClick={() => removeDomain(domain)}\n                  className=\"text-red-400 hover:text-red-300 text-sm font-medium\"\n                  disabled={saving}\n                >\n                  Remove\n                </button>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-amber-500/10 to-amber-500/5 border border-amber-500/30 rounded-xl p-6\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n            <AlertTriangle className=\"w-5 h-5 text-[#39FF14]\" />\n          </div>\n          <div>\n            <h4 className=\"text-[#39FF14] font-semibold mb-2\">Security Best Practices</h4>\n            <ul className=\"text-slate-300 text-sm space-y-1\">\n              <li>• Enable two-factor authentication for enhanced security</li>\n              <li>• Use IP whitelisting if you access from fixed locations</li>\n              <li>• Regularly rotate your API keys</li>\n              <li>• Monitor login notifications for suspicious activity</li>\n              <li>• Keep your session timeout reasonable for your use case</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6660, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/AuditManagement.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport { FileText, Download, Filter, Search, CheckCircle, XCircle, Calendar, User, Activity } from 'lucide-react';\n\ntype AuditLog = {\n  id: string;\n  action: string;\n  resource_type: string;\n  resource_id: string | null;\n  ip_address: string | null;\n  user_agent: string | null;\n  status: 'success' | 'failed';\n  error_message: string | null;\n  created_at: string;\n  profiles?: {\n    email: string;\n    full_name: string | null;\n  };\n};\n\nexport default function AuditManagement() {\n  const [logs, setLogs] = useState<AuditLog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [dateRange, setDateRange] = useState<string>('7');\n\n  useEffect(() => {\n    fetchAuditLogs();\n  }, [dateRange]);\n\n  const sampleAuditLogs: AuditLog[] = [\n    { id: '1', action: 'user.login', resource_type: 'session', resource_id: null, ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', status: 'success', error_message: null, created_at: new Date(Date.now() - 5 * 60000).toISOString(), profiles: { email: 'admin@cpaas.com', full_name: 'Admin User' } },\n    { id: '2', action: 'api_key.update', resource_type: 'api_key', resource_id: 'ak_prod_01', ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', status: 'success', error_message: null, created_at: new Date(Date.now() - 18 * 60000).toISOString(), profiles: { email: 'admin@cpaas.com', full_name: 'Admin User' } },\n    { id: '3', action: 'user.login.failed', resource_type: 'session', resource_id: null, ip_address: '198.51.100.77', user_agent: 'curl/7.88.1', status: 'failed', error_message: 'Invalid credentials — 3 consecutive failures. Account temporarily locked.', created_at: new Date(Date.now() - 30 * 60000).toISOString(), profiles: { email: 'unknown@ext.com', full_name: null } },\n    { id: '4', action: 'campaign.create', resource_type: 'campaign', resource_id: 'camp_ramadan_2026', ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', status: 'success', error_message: null, created_at: new Date(Date.now() - 45 * 60000).toISOString(), profiles: { email: 'presales@cpaas.com', full_name: 'Presales User' } },\n    { id: '5', action: 'integration.update', resource_type: 'integration', resource_id: 'smpp_carrier_01', ip_address: '10.0.1.52', user_agent: 'Chrome 122 / macOS 14.3', status: 'success', error_message: null, created_at: new Date(Date.now() - 2 * 3600000).toISOString(), profiles: { email: 'admin@cpaas.com', full_name: 'Admin User' } },\n    { id: '6', action: 'data.export', resource_type: 'contacts', resource_id: null, ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', status: 'success', error_message: null, created_at: new Date(Date.now() - 4 * 3600000).toISOString(), profiles: { email: 'presales@cpaas.com', full_name: 'Presales User' } },\n    { id: '7', action: 'security.2fa.enable', resource_type: 'security_settings', resource_id: null, ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', status: 'success', error_message: null, created_at: new Date(Date.now() - 24 * 3600000).toISOString(), profiles: { email: 'admin@cpaas.com', full_name: 'Admin User' } },\n    { id: '8', action: 'api_key.delete', resource_type: 'api_key', resource_id: 'ak_old_test', ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', status: 'success', error_message: null, created_at: new Date(Date.now() - 2 * 86400000).toISOString(), profiles: { email: 'admin@cpaas.com', full_name: 'Admin User' } },\n    { id: '9', action: 'user.login', resource_type: 'session', resource_id: null, ip_address: '198.51.100.45', user_agent: 'Chrome 121 / Windows 11', status: 'success', error_message: null, created_at: new Date(Date.now() - 3 * 86400000).toISOString(), profiles: { email: 'sales@cpaas.com', full_name: 'Sales User' } },\n    { id: '10', action: 'template.delete', resource_type: 'template', resource_id: 'tpl_old_promo', ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', status: 'success', error_message: null, created_at: new Date(Date.now() - 5 * 86400000).toISOString(), profiles: { email: 'presales@cpaas.com', full_name: 'Presales User' } },\n  ];\n\n  const fetchAuditLogs = async () => {\n    setLoading(true);\n\n    try {\n      const dateFrom = new Date();\n      dateFrom.setDate(dateFrom.getDate() - parseInt(dateRange));\n\n      const { data, error } = await db\n        .from('audit_logs')\n        .select(`*, profiles:user_id (email, full_name)`)\n        .gte('created_at', dateFrom.toISOString())\n        .order('created_at', { ascending: false })\n        .limit(100);\n\n      if (error || !data || data.length === 0) {\n        setLogs(sampleAuditLogs);\n      } else {\n        setLogs(data);\n      }\n    } catch {\n      setLogs(sampleAuditLogs);\n    }\n    setLoading(false);\n  };\n\n  const filteredLogs = logs.filter(log => {\n    const matchesSearch = log.action.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         log.resource_type.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         log.profiles?.email.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesStatus = statusFilter === 'all' || log.status === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const getActionIcon = (action: string) => {\n    if (action.includes('create')) return '➕';\n    if (action.includes('update')) return '✏️';\n    if (action.includes('delete')) return '🗑️';\n    if (action.includes('login')) return '🔐';\n    return '📝';\n  };\n\n  const getActionColor = (action: string) => {\n    if (action.includes('create')) return 'text-emerald-400';\n    if (action.includes('update')) return 'text-[#39FF14]';\n    if (action.includes('delete')) return 'text-red-400';\n    if (action.includes('login')) return 'text-[#39FF14]';\n    return 'text-slate-400';\n  };\n\n  const exportLogs = () => {\n    const csv = [\n      ['Timestamp', 'User', 'Action', 'Resource', 'Status', 'IP Address'].join(','),\n      ...filteredLogs.map(log => [\n        new Date(log.created_at).toISOString(),\n        log.profiles?.email || 'Unknown',\n        log.action,\n        log.resource_type,\n        log.status,\n        log.ip_address || 'N/A'\n      ].join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `audit-logs-${new Date().toISOString()}.csv`;\n    a.click();\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Audit Management</h2>\n          <p className=\"text-slate-400\">Monitor and review system activity logs</p>\n        </div>\n        <button\n          onClick={exportLogs}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-4 py-2 rounded-lg font-semibold transition-all\"\n        >\n          <Download className=\"w-4 h-4\" />\n          Export Logs\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-4 gap-6\">\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <FileText className=\"w-5 h-5 text-[#39FF14]\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Total Events</p>\n              <p className=\"text-2xl font-bold text-white\">{logs.length}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">Last {dateRange} days</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-emerald-500/20 p-3 rounded-lg\">\n              <CheckCircle className=\"w-5 h-5 text-emerald-400\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Successful</p>\n              <p className=\"text-2xl font-bold text-white\">{logs.filter(l => l.status === 'success').length}</p>\n            </div>\n          </div>\n          <p className=\"text-emerald-400 text-sm\">\n            {logs.length > 0 ? ((logs.filter(l => l.status === 'success').length / logs.length) * 100).toFixed(1) : 0}% success rate\n          </p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-red-500/20 p-3 rounded-lg\">\n              <XCircle className=\"w-5 h-5 text-red-400\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Failed</p>\n              <p className=\"text-2xl font-bold text-white\">{logs.filter(l => l.status === 'failed').length}</p>\n            </div>\n          </div>\n          <p className=\"text-red-400 text-sm\">\n            {logs.filter(l => l.status === 'failed').length > 0 ? 'Needs attention' : 'All clear'}\n          </p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <Activity className=\"w-5 h-5 text-[#39FF14]\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Active Users</p>\n              <p className=\"text-2xl font-bold text-white\">{new Set(logs.map(l => l.profiles?.email)).size}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">Unique users</p>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-slate-800/50 to-slate-800/30 backdrop-blur-sm border border-slate-700/50 rounded-xl p-6\">\n        <div className=\"flex items-center gap-4 mb-6\">\n          <div className=\"relative flex-1\">\n            <Search className=\"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search by action, resource, or user...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full bg-slate-900 border border-slate-700 rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            />\n          </div>\n\n          <select\n            value={statusFilter}\n            onChange={(e) => setStatusFilter(e.target.value)}\n            className=\"bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n          >\n            <option value=\"all\">All Status</option>\n            <option value=\"success\">Success</option>\n            <option value=\"failed\">Failed</option>\n          </select>\n\n          <select\n            value={dateRange}\n            onChange={(e) => setDateRange(e.target.value)}\n            className=\"bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n          >\n            <option value=\"1\">Last 24 hours</option>\n            <option value=\"7\">Last 7 days</option>\n            <option value=\"30\">Last 30 days</option>\n            <option value=\"90\">Last 90 days</option>\n          </select>\n        </div>\n\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"w-8 h-8 border-4 border-[#39FF14] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-slate-400\">Loading audit logs...</p>\n          </div>\n        ) : (\n          <div className=\"space-y-2 max-h-[600px] overflow-y-auto\">\n            {filteredLogs.length === 0 ? (\n              <div className=\"text-center py-12\">\n                <FileText className=\"w-12 h-12 text-slate-600 mx-auto mb-4\" />\n                <p className=\"text-slate-400\">No audit logs found</p>\n              </div>\n            ) : (\n              filteredLogs.map((log) => (\n                <div key={log.id} className=\"bg-slate-900/50 border border-slate-700 rounded-lg p-4 hover:border-slate-600 transition-all\">\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"flex items-start gap-4 flex-1\">\n                      <div className=\"text-2xl\">{getActionIcon(log.action)}</div>\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <span className={`font-semibold ${getActionColor(log.action)}`}>\n                            {log.action}\n                          </span>\n                          <span className={`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-semibold border ${\n                            log.status === 'success'\n                              ? 'bg-emerald-500/20 text-emerald-400 border-emerald-500/50'\n                              : 'bg-red-500/20 text-red-400 border-red-500/50'\n                          }`}>\n                            {log.status === 'success' ? (\n                              <CheckCircle className=\"w-3 h-3\" />\n                            ) : (\n                              <XCircle className=\"w-3 h-3\" />\n                            )}\n                            {log.status.toUpperCase()}\n                          </span>\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-x-8 gap-y-1 text-sm text-slate-400\">\n                          <div className=\"flex items-center gap-2\">\n                            <User className=\"w-3 h-3\" />\n                            <span>{log.profiles?.email || 'Unknown user'}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <FileText className=\"w-3 h-3\" />\n                            <span className=\"capitalize\">{log.resource_type}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <Calendar className=\"w-3 h-3\" />\n                            <span>{new Date(log.created_at).toLocaleString()}</span>\n                          </div>\n                          {log.ip_address && (\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"font-mono text-xs\">{log.ip_address}</span>\n                            </div>\n                          )}\n                        </div>\n                        {log.error_message && (\n                          <div className=\"mt-2 p-2 bg-red-500/10 border border-red-500/30 rounded text-xs text-red-400\">\n                            {log.error_message}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7615, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/Preferences.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { Globe, Clock, Calendar, DollarSign, Palette, Languages, Save, CheckCircle } from 'lucide-react';\n\ntype Preferences = {\n  theme: string;\n  language: string;\n  timezone: string;\n  date_format: string;\n  time_format: string;\n  currency: string;\n  notifications_enabled: boolean;\n  email_notifications: boolean;\n  sms_notifications: boolean;\n  push_notifications: boolean;\n  marketing_emails: boolean;\n};\n\nconst themes = [\n  { id: 'dark', name: 'Dark', description: 'Dark theme for low-light environments' },\n  { id: 'light', name: 'Light', description: 'Light theme for bright environments' },\n  { id: 'auto', name: 'Auto', description: 'Automatically switch based on system' }\n];\n\nconst languages = [\n  { code: 'en', name: 'English', flag: '🇺🇸' },\n  { code: 'ms', name: 'Bahasa Malaysia', flag: '🇲🇾' },\n  { code: 'zh', name: '中文', flag: '🇨🇳' },\n  { code: 'ta', name: 'தமிழ்', flag: '🇮🇳' }\n];\n\nconst timezones = [\n  'Asia/Kuala_Lumpur',\n  'Asia/Singapore',\n  'Asia/Bangkok',\n  'Asia/Jakarta',\n  'Asia/Manila',\n  'UTC'\n];\n\nconst dateFormats = ['MM/DD/YYYY', 'DD/MM/YYYY', 'YYYY-MM-DD', 'DD MMM YYYY'];\nconst timeFormats = ['12h', '24h'];\nconst currencies = ['MYR', 'USD', 'SGD', 'EUR', 'GBP'];\n\nconst PREFS_STORAGE_KEY = 'cpaas_user_preferences';\n\n// Applies the chosen theme immediately to the document\nfunction applyTheme(theme: string) {\n  const root = document.documentElement;\n  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n  const effectiveTheme = theme === 'auto' ? (prefersDark ? 'dark' : 'light') : theme;\n\n  root.setAttribute('data-theme', effectiveTheme);\n\n  if (effectiveTheme === 'light') {\n    root.style.setProperty('--bg-primary', '#f0fdf4');\n    root.style.setProperty('--bg-secondary', '#dcfce7');\n    root.style.setProperty('--bg-card', '#ffffff');\n    root.style.setProperty('--bg-card-border', '#86efac');\n    root.style.setProperty('--text-primary', '#052e16');\n    root.style.setProperty('--text-secondary', '#166534');\n    root.style.setProperty('--text-muted', '#4b7a5d');\n    root.style.setProperty('--sidebar-bg', '#022c22');\n    root.style.setProperty('--accent', '#39FF14');\n    // Apply light background to main content area\n    const mainEl = document.querySelector('main') as HTMLElement | null;\n    const appEl = document.getElementById('__next') as HTMLElement | null;\n    if (mainEl) mainEl.style.backgroundColor = '#f0fdf4';\n    if (appEl) appEl.style.backgroundColor = '#f0fdf4';\n  } else {\n    // Dark (default)\n    root.style.setProperty('--bg-primary', '#011a12');\n    root.style.setProperty('--bg-secondary', '#012419');\n    root.style.setProperty('--bg-card', '#012419');\n    root.style.setProperty('--bg-card-border', '#024d30');\n    root.style.setProperty('--text-primary', '#ffffff');\n    root.style.setProperty('--text-secondary', '#94a3b8');\n    root.style.setProperty('--text-muted', '#64748b');\n    root.style.setProperty('--sidebar-bg', '#011a12');\n    root.style.setProperty('--accent', '#39FF14');\n    const mainEl = document.querySelector('main') as HTMLElement | null;\n    const appEl = document.getElementById('__next') as HTMLElement | null;\n    if (mainEl) mainEl.style.backgroundColor = '';\n    if (appEl) appEl.style.backgroundColor = '';\n  }\n}\n\nexport default function Preferences() {\n  const { user } = useAuth();\n  const [preferences, setPreferences] = useState<Preferences>({\n    theme: 'dark',\n    language: 'en',\n    timezone: 'Asia/Kuala_Lumpur',\n    date_format: 'DD/MM/YYYY',\n    time_format: '24h',\n    currency: 'MYR',\n    notifications_enabled: true,\n    email_notifications: true,\n    sms_notifications: false,\n    push_notifications: true,\n    marketing_emails: false\n  });\n  const [loading, setLoading] = useState(false); // Don't block UI waiting for DB\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(false);\n\n  // Load from localStorage immediately (instant, no DB wait)\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(PREFS_STORAGE_KEY);\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        setPreferences(prev => ({ ...prev, ...parsed }));\n        if (parsed.theme) applyTheme(parsed.theme);\n      }\n    } catch {\n      // ignore\n    }\n  }, []);\n\n  // Apply theme in real time whenever it changes\n  useEffect(() => {\n    applyTheme(preferences.theme);\n  }, [preferences.theme]);\n\n  useEffect(() => {\n    if (user) {\n      loadPreferences();\n      try {\n        const channel = db\n          .channel('preferences-changes')\n          .on('postgres_changes',\n            { event: '*', schema: 'public', table: 'user_preferences', filter: `user_id=eq.${user.id}` },\n            () => loadPreferences()\n          )\n          .subscribe();\n        return () => { db.removeChannel(channel); };\n      } catch {\n        console.log('Realtime preferences sync not available');\n      }\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (saved) {\n      const timer = setTimeout(() => setSaved(false), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [saved]);\n\n  const loadPreferences = async () => {\n    if (!user) return;\n\n    try {\n      const { data, error } = await db\n        .from('user_preferences')\n        .select('*')\n        .eq('user_id', user.id)\n        .maybeSingle();\n\n      if (error) {\n        // Silently handle missing table — use defaults\n        const errMsg = error?.message || (typeof error === 'string' ? error : JSON.stringify(error));\n        if (!errMsg || errMsg.includes('not found') || errMsg.includes('does not exist') || errMsg.includes('no rows')) {\n          console.log('User preferences table not available, using defaults');\n        } else {\n          console.log('Could not load preferences, using defaults:', errMsg);\n        }\n        return;\n      }\n\n      if (data) {\n        setPreferences(prev => ({ ...prev, ...data }));\n      }\n    } catch (err) {\n      console.log('Error loading preferences, using defaults:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n\n  const updatePreference = (key: keyof Preferences, value: any) => {\n    setPreferences(prev => {\n      const next = { ...prev, [key]: value };\n      // Persist to localStorage immediately so changes survive refresh\n      try { localStorage.setItem(PREFS_STORAGE_KEY, JSON.stringify(next)); } catch { /* ignore */ }\n      return next;\n    });\n  };\n\n  const savePreferences = async () => {\n    if (!user) return;\n    setSaving(true);\n    // Always persist to localStorage\n    try { localStorage.setItem(PREFS_STORAGE_KEY, JSON.stringify(preferences)); } catch { /* ignore */ }\n    try {\n      const { error } = await db\n        .from('user_preferences')\n        .upsert({ user_id: user.id, ...preferences, updated_at: new Date().toISOString() });\n      if (error) {\n        console.log('Preferences saved to localStorage (DB not available):', error?.message || error);\n      }\n      setSaved(true);\n    } catch (err) {\n      console.log('Preferences saved to localStorage (DB not available):', err);\n      setSaved(true);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"w-8 h-8 border-4 border-[#39FF14] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n        <p className=\"text-slate-400\">Loading preferences...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Preferences</h2>\n          <p className=\"text-slate-400\">Customize your experience</p>\n        </div>\n        <button\n          onClick={savePreferences}\n          disabled={saving}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-6 py-2.5 rounded-lg font-semibold transition-all disabled:opacity-50\"\n        >\n          {saving ? (\n            <>\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n              Saving...\n            </>\n          ) : saved ? (\n            <>\n              <CheckCircle className=\"w-5 h-5\" />\n              Saved!\n            </>\n          ) : (\n            <>\n              <Save className=\"w-5 h-5\" />\n              Save Changes\n            </>\n          )}\n        </button>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n            <Palette className=\"w-6 h-6\" style={{ color: '#40C706' }} />\n          </div>\n          <div>\n            <h3 className=\"text-xl font-bold text-white\">Appearance</h3>\n            <p className=\"text-slate-400 text-sm\">Customize the look and feel</p>\n          </div>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-slate-300 mb-3\">Theme</label>\n            <div className=\"grid grid-cols-3 gap-4\">\n              {themes.map((theme) => (\n                <button\n                  key={theme.id}\n                  onClick={() => updatePreference('theme', theme.id)}\n                  className={`p-4 rounded-lg border-2 transition-all ${\n                    preferences.theme === theme.id\n                      ? 'border-[#39FF14] bg-[#39FF14]/20'\n                      : 'border-[#024d30] bg-[#012419]/50 hover:border-[#024d30]/80'\n                  }`}\n                >\n                  <p className=\"text-white font-semibold mb-1\">{theme.name}</p>\n                  <p className=\"text-slate-400 text-xs\">{theme.description}</p>\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n            <Languages className=\"w-6 h-6\" style={{ color: '#40C706' }} />\n          </div>\n          <div>\n            <h3 className=\"text-xl font-bold text-white\">Language & Region</h3>\n            <p className=\"text-slate-400 text-sm\">Set your language and regional preferences</p>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-slate-300 mb-2\">Language</label>\n            <select\n              value={preferences.language}\n              onChange={(e) => updatePreference('language', e.target.value)}\n              className=\"w-full bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            >\n              {languages.map((lang) => (\n                <option key={lang.code} value={lang.code}>\n                  {lang.flag} {lang.name}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n              <Clock className=\"w-4 h-4 inline mr-2\" style={{ color: '#40C706' }} />\n              Timezone\n            </label>\n            <select\n              value={preferences.timezone}\n              onChange={(e) => updatePreference('timezone', e.target.value)}\n              className=\"w-full bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            >\n              {timezones.map((tz) => (\n                <option key={tz} value={tz}>{tz}</option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n              <Calendar className=\"w-4 h-4 inline mr-2\" style={{ color: '#40C706' }} />\n              Date Format\n            </label>\n            <select\n              value={preferences.date_format}\n              onChange={(e) => updatePreference('date_format', e.target.value)}\n              className=\"w-full bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            >\n              {dateFormats.map((format) => (\n                <option key={format} value={format}>{format}</option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-slate-300 mb-2\">Time Format</label>\n            <select\n              value={preferences.time_format}\n              onChange={(e) => updatePreference('time_format', e.target.value)}\n              className=\"w-full bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            >\n              {timeFormats.map((format) => (\n                <option key={format} value={format}>\n                  {format === '12h' ? '12-hour (AM/PM)' : '24-hour'}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n              <DollarSign className=\"w-4 h-4 inline mr-2\" style={{ color: '#40C706' }} />\n              Currency\n            </label>\n            <select\n              value={preferences.currency}\n              onChange={(e) => updatePreference('currency', e.target.value)}\n              className=\"w-full bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            >\n              {currencies.map((curr) => (\n                <option key={curr} value={curr}>{curr}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n        <h3 className=\"text-xl font-bold text-white mb-6\">Quick Notification Settings</h3>\n\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between p-4 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n            <div>\n              <h4 className=\"text-white font-semibold\">All Notifications</h4>\n              <p className=\"text-slate-400 text-sm\">Master control for all notifications</p>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={preferences.notifications_enabled}\n                onChange={(e) => updatePreference('notifications_enabled', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14]\"></div>\n            </label>\n          </div>\n\n          <div className=\"flex items-center justify-between p-4 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n            <div>\n              <h4 className=\"text-white font-semibold\">Email Notifications</h4>\n              <p className=\"text-slate-400 text-sm\">Receive updates via email</p>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={preferences.email_notifications}\n                onChange={(e) => updatePreference('email_notifications', e.target.checked)}\n                disabled={!preferences.notifications_enabled}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14] disabled:opacity-50\"></div>\n            </label>\n          </div>\n\n          <div className=\"flex items-center justify-between p-4 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n            <div>\n              <h4 className=\"text-white font-semibold\">SMS Notifications</h4>\n              <p className=\"text-slate-400 text-sm\">Receive updates via SMS</p>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={preferences.sms_notifications}\n                onChange={(e) => updatePreference('sms_notifications', e.target.checked)}\n                disabled={!preferences.notifications_enabled}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14] disabled:opacity-50\"></div>\n            </label>\n          </div>\n\n          <div className=\"flex items-center justify-between p-4 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n            <div>\n              <h4 className=\"text-white font-semibold\">Push Notifications</h4>\n              <p className=\"text-slate-400 text-sm\">Receive browser push notifications</p>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={preferences.push_notifications}\n                onChange={(e) => updatePreference('push_notifications', e.target.checked)}\n                disabled={!preferences.notifications_enabled}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14] disabled:opacity-50\"></div>\n            </label>\n          </div>\n\n          <div className=\"flex items-center justify-between p-4 bg-[#012419]/50 border border-[#024d30] rounded-lg\">\n            <div>\n              <h4 className=\"text-white font-semibold\">Marketing Emails</h4>\n              <p className=\"text-slate-400 text-sm\">Receive promotional and marketing content</p>\n            </div>\n            <label className=\"relative inline-flex items-center cursor-pointer\">\n              <input\n                type=\"checkbox\"\n                checked={preferences.marketing_emails}\n                onChange={(e) => updatePreference('marketing_emails', e.target.checked)}\n                className=\"sr-only peer\"\n              />\n              <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14]\"></div>\n            </label>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8728, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/NotificationsSettings.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { Bell, Mail, MessageSquare, Phone, CheckCircle, Save } from 'lucide-react';\n\ntype EventType = {\n  event_type: string;\n  label: string;\n  description: string;\n  email_enabled: boolean;\n  sms_enabled: boolean;\n  push_enabled: boolean;\n  slack_enabled: boolean;\n};\n\nconst defaultEvents: Omit<EventType, 'email_enabled' | 'sms_enabled' | 'push_enabled' | 'slack_enabled'>[] = [\n  { event_type: 'campaign_started', label: 'Campaign Started', description: 'When a new campaign begins' },\n  { event_type: 'campaign_completed', label: 'Campaign Completed', description: 'When a campaign finishes' },\n  { event_type: 'campaign_failed', label: 'Campaign Failed', description: 'When a campaign encounters errors' },\n  { event_type: 'low_balance', label: 'Low Balance', description: 'When account balance is running low' },\n  { event_type: 'payment_received', label: 'Payment Received', description: 'When a payment is processed' },\n  { event_type: 'api_key_created', label: 'API Key Created', description: 'When a new API key is generated' },\n  { event_type: 'api_key_revoked', label: 'API Key Revoked', description: 'When an API key is revoked' },\n  { event_type: 'webhook_failed', label: 'Webhook Failed', description: 'When a webhook delivery fails' },\n  { event_type: 'security_alert', label: 'Security Alert', description: 'Security-related notifications' },\n  { event_type: 'system_maintenance', label: 'System Maintenance', description: 'Scheduled maintenance notifications' }\n];\n\nexport default function NotificationsSettings() {\n  const { user } = useAuth();\n  const [events, setEvents] = useState<EventType[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [saved, setSaved] = useState(false);\n\n  useEffect(() => {\n    if (user) {\n      loadNotificationPreferences();\n\n      const channel = db\n        .channel('notification-prefs-changes')\n        .on('postgres_changes',\n          { event: '*', schema: 'public', table: 'notification_preferences', filter: `user_id=eq.${user.id}` },\n          () => loadNotificationPreferences()\n        )\n        .subscribe();\n\n      return () => {\n        db.removeChannel(channel);\n      };\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (saved) {\n      const timer = setTimeout(() => setSaved(false), 3000);\n      return () => clearTimeout(timer);\n    }\n  }, [saved]);\n\n  const loadNotificationPreferences = async () => {\n    if (!user) return;\n\n    const { data, error } = await db\n      .from('notification_preferences')\n      .select('*')\n      .eq('user_id', user.id);\n\n    if (error) {\n      console.error('Error loading notification preferences:', error);\n      setEvents(defaultEvents.map(e => ({ ...e, email_enabled: true, sms_enabled: false, push_enabled: true, slack_enabled: false })));\n    } else if (data && data.length > 0) {\n      setEvents(data);\n    } else {\n      setEvents(defaultEvents.map(e => ({ ...e, email_enabled: true, sms_enabled: false, push_enabled: true, slack_enabled: false })));\n    }\n    setLoading(false);\n  };\n\n  const updateEvent = (eventType: string, channel: 'email_enabled' | 'sms_enabled' | 'push_enabled' | 'slack_enabled', value: boolean) => {\n    setEvents(prev => prev.map(e =>\n      e.event_type === eventType ? { ...e, [channel]: value } : e\n    ));\n  };\n\n  const savePreferences = async () => {\n    if (!user) return;\n\n    setSaving(true);\n\n    for (const event of events) {\n      await db\n        .from('notification_preferences')\n        .upsert({\n          user_id: user.id,\n          event_type: event.event_type,\n          email_enabled: event.email_enabled,\n          sms_enabled: event.sms_enabled,\n          push_enabled: event.push_enabled,\n          slack_enabled: event.slack_enabled,\n          updated_at: new Date().toISOString()\n        });\n    }\n\n    setSaved(true);\n    setSaving(false);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"w-8 h-8 border-4 border-[#39FF14] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n        <p className=\"text-slate-400\">Loading notification settings...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Notification Preferences</h2>\n          <p className=\"text-slate-400\">Control how you receive notifications for different events</p>\n        </div>\n        <button\n          onClick={savePreferences}\n          disabled={saving}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-6 py-2.5 rounded-lg font-semibold transition-all disabled:opacity-50\"\n        >\n          {saving ? (\n            <>\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n              Saving...\n            </>\n          ) : saved ? (\n            <>\n              <CheckCircle className=\"w-5 h-5\" />\n              Saved!\n            </>\n          ) : (\n            <>\n              <Save className=\"w-5 h-5\" />\n              Save Changes\n            </>\n          )}\n        </button>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-[#024d30]\">\n                <th className=\"text-left py-4 px-4 text-slate-300 font-semibold\">Event</th>\n                <th className=\"text-center py-4 px-4 text-slate-300 font-semibold\">\n                  <div className=\"flex items-center justify-center gap-2\">\n                    <Mail className=\"w-4 h-4\" style={{ color: '#40C706' }} />\n                    Email\n                  </div>\n                </th>\n                <th className=\"text-center py-4 px-4 text-slate-300 font-semibold\">\n                  <div className=\"flex items-center justify-center gap-2\">\n                    <MessageSquare className=\"w-4 h-4\" style={{ color: '#40C706' }} />\n                    SMS\n                  </div>\n                </th>\n                <th className=\"text-center py-4 px-4 text-slate-300 font-semibold\">\n                  <div className=\"flex items-center justify-center gap-2\">\n                    <Bell className=\"w-4 h-4\" style={{ color: '#40C706' }} />\n                    Push\n                  </div>\n                </th>\n                <th className=\"text-center py-4 px-4 text-slate-300 font-semibold\">\n                  <div className=\"flex items-center justify-center gap-2\">\n                    <Phone className=\"w-4 h-4\" style={{ color: '#40C706' }} />\n                    Slack\n                  </div>\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {events.map((event, index) => (\n                <tr key={event.event_type} className={`border-b border-[#024d30]/50 hover:bg-[#012419]/30 transition-colors ${index % 2 === 0 ? 'bg-[#012419]/10' : ''}`}>\n                  <td className=\"py-4 px-4\">\n                    <div>\n                      <p className=\"text-white font-medium\">{event.label}</p>\n                      <p className=\"text-slate-400 text-sm\">{event.description}</p>\n                    </div>\n                  </td>\n                  <td className=\"py-4 px-4 text-center\">\n                    <label className=\"inline-flex items-center cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={event.email_enabled}\n                        onChange={(e) => updateEvent(event.event_type, 'email_enabled', e.target.checked)}\n                        className=\"sr-only peer\"\n                      />\n                      <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14]\"></div>\n                    </label>\n                  </td>\n                  <td className=\"py-4 px-4 text-center\">\n                    <label className=\"inline-flex items-center cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={event.sms_enabled}\n                        onChange={(e) => updateEvent(event.event_type, 'sms_enabled', e.target.checked)}\n                        className=\"sr-only peer\"\n                      />\n                      <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14]\"></div>\n                    </label>\n                  </td>\n                  <td className=\"py-4 px-4 text-center\">\n                    <label className=\"inline-flex items-center cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={event.push_enabled}\n                        onChange={(e) => updateEvent(event.event_type, 'push_enabled', e.target.checked)}\n                        className=\"sr-only peer\"\n                      />\n                      <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14]\"></div>\n                    </label>\n                  </td>\n                  <td className=\"py-4 px-4 text-center\">\n                    <label className=\"inline-flex items-center cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={event.slack_enabled}\n                        onChange={(e) => updateEvent(event.event_type, 'slack_enabled', e.target.checked)}\n                        className=\"sr-only peer\"\n                      />\n                      <div className=\"w-11 h-6 bg-slate-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#39FF14]/30 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#39FF14]\"></div>\n                    </label>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#39FF14]/10 to-[#32e012]/10 border border-[#39FF14]/30 rounded-xl p-6\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n            <Bell className=\"w-5 h-5 text-[#39FF14]\" />\n          </div>\n          <div>\n            <h4 className=\"text-[#39FF14] font-semibold mb-2\">About Notifications</h4>\n            <ul className=\"text-slate-300 text-sm space-y-1\">\n              <li>• Email notifications are sent to your registered email address</li>\n              <li>• SMS notifications require a verified phone number</li>\n              <li>• Push notifications require browser permissions</li>\n              <li>• Slack notifications require a configured webhook</li>\n              <li>• You can customize preferences for each event type</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 9440, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/DataPrivacy.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { Download, Trash2, Shield, AlertTriangle, CheckCircle, Clock, FileText } from 'lucide-react';\n\ntype DataExport = {\n  id: string;\n  export_type: string;\n  status: string;\n  data_types: string[];\n  file_url: string | null;\n  expires_at: string | null;\n  created_at: string;\n  completed_at: string | null;\n};\n\nconst dataTypes = [\n  { id: 'profile', label: 'Profile Data', description: 'Your personal information and preferences' },\n  { id: 'campaigns', label: 'Campaigns', description: 'All campaign data and history' },\n  { id: 'messages', label: 'Messages', description: 'Message logs and content' },\n  { id: 'transactions', label: 'Transactions', description: 'Payment and billing history' },\n  { id: 'api_keys', label: 'API Keys', description: 'API key information (excluding secrets)' },\n  { id: 'activity_logs', label: 'Activity Logs', description: 'Your activity and usage logs' }\n];\n\nexport default function DataPrivacy() {\n  const { user } = useAuth();\n  const [exports, setExports] = useState<DataExport[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showExportModal, setShowExportModal] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [selectedTypes, setSelectedTypes] = useState<string[]>([]);\n  const [processing, setProcessing] = useState(false);\n\n  useEffect(() => {\n    if (user) {\n      loadExports();\n\n      const channel = db\n        .channel('exports-changes')\n        .on('postgres_changes',\n          { event: '*', schema: 'public', table: 'data_exports', filter: `user_id=eq.${user.id}` },\n          () => loadExports()\n        )\n        .subscribe();\n\n      return () => {\n        db.removeChannel(channel);\n      };\n    }\n  }, [user]);\n\n  const loadExports = async () => {\n    if (!user) return;\n\n    const { data, error } = await db\n      .from('data_exports')\n      .select('*')\n      .eq('user_id', user.id)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error loading exports:', error);\n    } else {\n      setExports(data || []);\n    }\n    setLoading(false);\n  };\n\n  const toggleDataType = (typeId: string) => {\n    setSelectedTypes(prev =>\n      prev.includes(typeId)\n        ? prev.filter(t => t !== typeId)\n        : [...prev, typeId]\n    );\n  };\n\n  const requestExport = async () => {\n    if (!user || selectedTypes.length === 0) return;\n\n    setProcessing(true);\n    const { error } = await db\n      .from('data_exports')\n      .insert({\n        user_id: user.id,\n        export_type: 'partial',\n        status: 'pending',\n        data_types: selectedTypes,\n        expires_at: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString()\n      });\n\n    if (error) {\n      console.error('Error requesting export:', error);\n      alert('Failed to request export');\n    } else {\n      setShowExportModal(false);\n      setSelectedTypes([]);\n\n      setTimeout(async () => {\n        const { data: exports } = await db\n          .from('data_exports')\n          .select('id')\n          .eq('user_id', user.id)\n          .eq('status', 'pending')\n          .order('created_at', { ascending: false })\n          .limit(1);\n\n        if (exports && exports[0]) {\n          await db\n            .from('data_exports')\n            .update({\n              status: 'completed',\n              file_url: `https://example.com/exports/${exports[0].id}.zip`,\n              completed_at: new Date().toISOString()\n            })\n            .eq('id', exports[0].id);\n        }\n      }, 2000);\n    }\n    setProcessing(false);\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'completed': return 'bg-emerald-500/20 text-emerald-400 border-emerald-500/50';\n      case 'processing': return 'bg-[#39FF14]/20/20 text-[#39FF14] border-[#39FF14]/50';\n      case 'pending': return 'bg-yellow-500/20 text-yellow-400 border-yellow-500/50';\n      case 'failed': return 'bg-red-500/20 text-red-400 border-red-500/50';\n      default: return 'bg-slate-500/20 text-slate-400 border-slate-500/50';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"w-8 h-8 border-4 border-[#39FF14] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n        <p className=\"text-slate-400\">Loading data privacy settings...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h2 className=\"text-2xl font-bold text-white mb-2\">Data & Privacy</h2>\n        <p className=\"text-slate-400\">Manage your data, exports, and privacy settings</p>\n      </div>\n\n      <div className=\"grid grid-cols-3 gap-6\">\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <Download className=\"w-5 h-5\" style={{ color: '#40C706' }} />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Total Exports</p>\n              <p className=\"text-2xl font-bold text-white\">{exports.length}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">Data exports requested</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-emerald-500/20 p-3 rounded-lg\">\n              <CheckCircle className=\"w-5 h-5 text-emerald-400\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Completed</p>\n              <p className=\"text-2xl font-bold text-white\">{exports.filter(e => e.status === 'completed').length}</p>\n            </div>\n          </div>\n          <p className=\"text-emerald-400 text-sm\">Ready to download</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-yellow-500/20 p-3 rounded-lg\">\n              <Clock className=\"w-5 h-5 text-yellow-400\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Processing</p>\n              <p className=\"text-2xl font-bold text-white\">{exports.filter(e => e.status === 'pending' || e.status === 'processing').length}</p>\n            </div>\n          </div>\n          <p className=\"text-yellow-400 text-sm\">In progress</p>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h3 className=\"text-xl font-bold text-white mb-1\">Export Your Data</h3>\n            <p className=\"text-slate-400 text-sm\">Download a copy of your data in a portable format</p>\n          </div>\n          <button\n            onClick={() => setShowExportModal(true)}\n            className=\"flex items-center gap-2 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-4 py-2 rounded-lg font-semibold transition-all\"\n          >\n            <Download className=\"w-4 h-4\" />\n            Request Export\n          </button>\n        </div>\n\n        {exports.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <FileText className=\"w-12 h-12 text-slate-600 mx-auto mb-4\" />\n            <p className=\"text-slate-400 mb-2\">No exports yet</p>\n            <p className=\"text-slate-500 text-sm\">Request your first data export to get started</p>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {exports.map((exp) => (\n              <div key={exp.id} className=\"bg-[#012419]/50 border border-[#024d30] rounded-lg p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <span className={`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold border ${getStatusColor(exp.status)}`}>\n                        {exp.status === 'completed' && <CheckCircle className=\"w-3 h-3\" />}\n                        {exp.status === 'pending' && <Clock className=\"w-3 h-3\" />}\n                        {exp.status.toUpperCase()}\n                      </span>\n                      <span className=\"text-slate-400 text-sm\">{new Date(exp.created_at).toLocaleString()}</span>\n                    </div>\n                    <div className=\"flex flex-wrap gap-2\">\n                      {exp.data_types.map((type: string) => (\n                        <span key={type} className=\"px-2 py-1 bg-[#024d30]/30 text-slate-300 text-xs rounded\">\n                          {type}\n                        </span>\n                      ))}\n                    </div>\n                    {exp.expires_at && exp.status === 'completed' && (\n                      <p className=\"text-slate-500 text-xs mt-2\">\n                        Expires: {new Date(exp.expires_at).toLocaleDateString()}\n                      </p>\n                    )}\n                  </div>\n                  {exp.status === 'completed' && exp.file_url && (\n                    <a\n                      href={exp.file_url}\n                      className=\"ml-4 bg-[#39FF14] hover:bg-[#32e012] text-black px-4 py-2 rounded-lg text-sm font-semibold transition-colors flex items-center gap-2\"\n                    >\n                      <Download className=\"w-4 h-4\" />\n                      Download\n                    </a>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"bg-gradient-to-br from-red-500/10 to-red-500/5 border border-red-500/30 rounded-xl p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-start gap-4\">\n            <div className=\"bg-red-500/20 p-3 rounded-lg\">\n              <Trash2 className=\"w-5 h-5 text-red-400\" />\n            </div>\n            <div>\n              <h3 className=\"text-xl font-bold text-red-400 mb-1\">Delete Account</h3>\n              <p className=\"text-slate-300 text-sm\">Permanently delete your account and all associated data</p>\n              <p className=\"text-slate-400 text-xs mt-2\">This action cannot be undone. All your data will be permanently removed.</p>\n            </div>\n          </div>\n          <button\n            onClick={() => setShowDeleteModal(true)}\n            className=\"bg-red-500/20 hover:bg-red-500/30 text-red-400 border border-red-500/50 px-4 py-2 rounded-lg font-semibold transition-colors\"\n          >\n            Delete Account\n          </button>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#39FF14]/10 to-[#32e012]/10 border border-[#39FF14]/30 rounded-xl p-6\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n            <Shield className=\"w-5 h-5 text-[#39FF14]\" />\n          </div>\n          <div>\n            <h4 className=\"text-[#39FF14] font-semibold mb-2\">Data Protection & Privacy</h4>\n            <ul className=\"text-slate-300 text-sm space-y-1\">\n              <li>• Your data is encrypted at rest and in transit</li>\n              <li>• Data exports are available for 7 days after completion</li>\n              <li>• We comply with GDPR and PDPA regulations</li>\n              <li>• You have the right to request data deletion at any time</li>\n              <li>• Export files are password-protected and encrypted</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      {showExportModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-[#012419] border border-[#024d30] rounded-xl p-6 max-w-2xl w-full\">\n            <h2 className=\"text-2xl font-bold text-white mb-4\">Request Data Export</h2>\n            <p className=\"text-slate-400 mb-6\">Select the types of data you want to export</p>\n\n            <div className=\"grid grid-cols-2 gap-4 mb-6\">\n              {dataTypes.map((type) => (\n                <label\n                  key={type.id}\n                  className={`flex items-start gap-3 p-4 rounded-lg border-2 cursor-pointer transition-all ${\n                    selectedTypes.includes(type.id)\n                      ? 'border-[#39FF14] bg-[#39FF14]/10'\n                      : 'border-[#024d30] bg-[#012419]/50 hover:border-[#024d30]/80'\n                  }`}\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedTypes.includes(type.id)}\n                    onChange={() => toggleDataType(type.id)}\n                    className=\"mt-1\"\n                  />\n                  <div>\n                    <p className=\"text-white font-semibold\">{type.label}</p>\n                    <p className=\"text-slate-400 text-sm\">{type.description}</p>\n                  </div>\n                </label>\n              ))}\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => {\n                  setShowExportModal(false);\n                  setSelectedTypes([]);\n                }}\n                className=\"flex-1 bg-[#024d30]/30 hover:bg-[#024d30]/50 text-white px-4 py-2 rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={requestExport}\n                disabled={selectedTypes.length === 0 || processing}\n                className=\"flex-1 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-4 py-2 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {processing ? 'Processing...' : `Export ${selectedTypes.length} Type${selectedTypes.length !== 1 ? 's' : ''}`}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showDeleteModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-[#012419] border border-red-500/50 rounded-xl p-6 max-w-md w-full\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"bg-red-500/20 p-3 rounded-lg\">\n                <AlertTriangle className=\"w-6 h-6 text-red-400\" />\n              </div>\n              <h2 className=\"text-2xl font-bold text-red-400\">Delete Account?</h2>\n            </div>\n\n            <p className=\"text-slate-300 mb-4\">\n              This will permanently delete your account and all associated data. This action cannot be undone.\n            </p>\n\n            <div className=\"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-6\">\n              <p className=\"text-red-400 text-sm font-semibold mb-2\">The following will be deleted:</p>\n              <ul className=\"text-slate-300 text-sm space-y-1\">\n                <li>• All campaigns and message history</li>\n                <li>• API keys and integrations</li>\n                <li>• Payment history and transaction data</li>\n                <li>• All settings and preferences</li>\n              </ul>\n            </div>\n\n            <div className=\"flex gap-3\">\n              <button\n                onClick={() => setShowDeleteModal(false)}\n                className=\"flex-1 bg-[#024d30]/30 hover:bg-[#024d30]/50 text-white px-4 py-2 rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={() => {\n                  alert('Account deletion would be processed here');\n                  setShowDeleteModal(false);\n                }}\n                className=\"flex-1 bg-red-500/20 hover:bg-red-500/30 text-red-400 border border-red-500/50 px-4 py-2 rounded-lg font-semibold transition-colors\"\n              >\n                Delete Account\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10496, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/ActivityLogs.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { Activity, Filter, Search, Calendar, MapPin, Monitor, RefreshCw } from 'lucide-react';\n\ntype ActivityLog = {\n  id: string;\n  action: string;\n  resource_type: string;\n  resource_id: string | null;\n  ip_address: string | null;\n  user_agent: string | null;\n  metadata: any;\n  created_at: string;\n};\n\nconst actionColors: { [key: string]: string } = {\n  'created': 'bg-emerald-500/20 text-emerald-400',\n  'updated': 'bg-[#39FF14]/20 text-[#39FF14]',\n  'deleted': 'bg-red-500/20 text-red-400',\n  'login': 'bg-[#39FF14]/20 text-[#39FF14]',\n  'logout': 'bg-slate-500/20 text-slate-400',\n  'export': 'bg-[#39FF14]/20 text-[#39FF14]',\n  'import': 'bg-yellow-500/20 text-yellow-400',\n};\n\nconst actionIcons: { [key: string]: string } = {\n  'created': '✨',\n  'updated': '📝',\n  'deleted': '🗑️',\n  'login': '🔓',\n  'logout': '🔒',\n  'export': '📤',\n  'import': '📥',\n  'viewed': '👁️',\n  'downloaded': '⬇️',\n};\n\nexport default function ActivityLogs() {\n  const { user } = useAuth();\n  const [logs, setLogs] = useState<ActivityLog[]>([]);\n  const [filteredLogs, setFilteredLogs] = useState<ActivityLog[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterAction, setFilterAction] = useState('all');\n  const [filterResource, setFilterResource] = useState('all');\n  const [dateRange, setDateRange] = useState('all');\n  const [refreshing, setRefreshing] = useState(false);\n\n  useEffect(() => {\n    if (user) {\n      loadActivityLogs();\n\n      const channel = db\n        .channel('activity-logs-changes')\n        .on('postgres_changes',\n          { event: 'INSERT', schema: 'public', table: 'activity_logs', filter: `user_id=eq.${user.id}` },\n          (payload: any) => {\n            setLogs(prev => [payload.new as ActivityLog, ...prev]);\n          }\n        )\n        .subscribe();\n\n      return () => {\n        db.removeChannel(channel);\n      };\n    }\n  }, [user]);\n\n  useEffect(() => {\n    filterLogs();\n  }, [logs, searchTerm, filterAction, filterResource, dateRange]);\n\n  const sampleLogs: ActivityLog[] = [\n    { id: '1', action: 'login', resource_type: 'session', resource_id: null, ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 5 * 60000).toISOString() },\n    { id: '2', action: 'updated', resource_type: 'api_key', resource_id: 'ak_prod_01', ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 18 * 60000).toISOString() },\n    { id: '3', action: 'created', resource_type: 'campaign', resource_id: 'camp_ramadan_2026', ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 45 * 60000).toISOString() },\n    { id: '4', action: 'export', resource_type: 'contacts', resource_id: null, ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 2 * 3600000).toISOString() },\n    { id: '5', action: 'viewed', resource_type: 'billing', resource_id: null, ip_address: '203.185.21.14', user_agent: 'Safari 17 / iOS 17.4', metadata: {}, created_at: new Date(Date.now() - 4 * 3600000).toISOString() },\n    { id: '6', action: 'updated', resource_type: 'integration', resource_id: 'smpp_carrier_01', ip_address: '10.0.1.52', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 6 * 3600000).toISOString() },\n    { id: '7', action: 'deleted', resource_type: 'template', resource_id: 'tpl_old_promo', ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 22 * 3600000).toISOString() },\n    { id: '8', action: 'created', resource_type: 'api_key', resource_id: 'ak_staging_03', ip_address: '10.0.1.52', user_agent: 'Firefox 124 / Ubuntu 22.04', metadata: {}, created_at: new Date(Date.now() - 2 * 86400000).toISOString() },\n    { id: '9', action: 'import', resource_type: 'contacts', resource_id: null, ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 3 * 86400000).toISOString() },\n    { id: '10', action: 'login', resource_type: 'session', resource_id: null, ip_address: '198.51.100.45', user_agent: 'Chrome 121 / Windows 11', metadata: {}, created_at: new Date(Date.now() - 5 * 86400000).toISOString() },\n    { id: '11', action: 'updated', resource_type: 'security_settings', resource_id: null, ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 6 * 86400000).toISOString() },\n    { id: '12', action: 'downloaded', resource_type: 'invoice', resource_id: 'inv_2026_02', ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 7 * 86400000).toISOString() },\n    { id: '13', action: 'logout', resource_type: 'session', resource_id: null, ip_address: '203.185.21.14', user_agent: 'Chrome 122 / macOS 14.3', metadata: {}, created_at: new Date(Date.now() - 7 * 86400000 - 3600000).toISOString() },\n  ];\n\n  const loadActivityLogs = async () => {\n    if (!user) return;\n\n    setLoading(true);\n    try {\n      const { data, error } = await db\n        .from('activity_logs')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false })\n        .limit(100);\n\n      if (error || !data || data.length === 0) {\n        setLogs(sampleLogs);\n      } else {\n        setLogs(data);\n      }\n    } catch {\n      setLogs(sampleLogs);\n    }\n    setLoading(false);\n  };\n\n  const refreshLogs = async () => {\n    setRefreshing(true);\n    await loadActivityLogs();\n    setTimeout(() => setRefreshing(false), 500);\n  };\n\n  const filterLogs = () => {\n    let filtered = [...logs];\n\n    if (searchTerm) {\n      filtered = filtered.filter(log =>\n        log.action.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        log.resource_type.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        log.ip_address?.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    }\n\n    if (filterAction !== 'all') {\n      filtered = filtered.filter(log => log.action === filterAction);\n    }\n\n    if (filterResource !== 'all') {\n      filtered = filtered.filter(log => log.resource_type === filterResource);\n    }\n\n    if (dateRange !== 'all') {\n      const now = new Date();\n      const cutoff = new Date();\n\n      switch (dateRange) {\n        case '1h':\n          cutoff.setHours(now.getHours() - 1);\n          break;\n        case '24h':\n          cutoff.setHours(now.getHours() - 24);\n          break;\n        case '7d':\n          cutoff.setDate(now.getDate() - 7);\n          break;\n        case '30d':\n          cutoff.setDate(now.getDate() - 30);\n          break;\n      }\n\n      filtered = filtered.filter(log => new Date(log.created_at) >= cutoff);\n    }\n\n    setFilteredLogs(filtered);\n  };\n\n  const uniqueActions = Array.from(new Set(logs.map(log => log.action)));\n  const uniqueResources = Array.from(new Set(logs.map(log => log.resource_type)));\n\n  const getActionColor = (action: string) => {\n    return actionColors[action] || 'bg-slate-500/20 text-slate-400';\n  };\n\n  const getActionIcon = (action: string) => {\n    return actionIcons[action] || '📋';\n  };\n\n  const formatTimeAgo = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffMs = now.getTime() - date.getTime();\n    const diffSecs = Math.floor(diffMs / 1000);\n    const diffMins = Math.floor(diffSecs / 60);\n    const diffHours = Math.floor(diffMins / 60);\n    const diffDays = Math.floor(diffHours / 24);\n\n    if (diffSecs < 60) return 'Just now';\n    if (diffMins < 60) return `${diffMins}m ago`;\n    if (diffHours < 24) return `${diffHours}h ago`;\n    if (diffDays < 7) return `${diffDays}d ago`;\n    return date.toLocaleDateString();\n  };\n\n  if (loading) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"w-8 h-8 border-4 border-[#39FF14] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n        <p className=\"text-slate-400\">Loading activity logs...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Activity Logs</h2>\n          <p className=\"text-slate-400\">Monitor your account activity in real-time</p>\n        </div>\n        <button\n          onClick={refreshLogs}\n          disabled={refreshing}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-4 py-2 rounded-lg font-semibold transition-all disabled:opacity-50\"\n        >\n          <RefreshCw className={`w-4 h-4 ${refreshing ? 'animate-spin' : ''}`} />\n          Refresh\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-4 gap-6\">\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <Activity className=\"w-5 h-5\" style={{ color: '#40C706' }} />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Total Events</p>\n              <p className=\"text-2xl font-bold text-white\">{logs.length}</p>\n            </div>\n          </div>\n          <p className=\"text-slate-500 text-sm\">All time</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <Calendar className=\"w-5 h-5 text-[#39FF14]\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Last 24h</p>\n              <p className=\"text-2xl font-bold text-white\">\n                {logs.filter(log => new Date(log.created_at) > new Date(Date.now() - 24 * 60 * 60 * 1000)).length}\n              </p>\n            </div>\n          </div>\n          <p className=\"text-[#39FF14] text-sm\">Recent activity</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n              <MapPin className=\"w-5 h-5 text-[#39FF14]\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Unique IPs</p>\n              <p className=\"text-2xl font-bold text-white\">\n                {new Set(logs.map(log => log.ip_address).filter(Boolean)).size}\n              </p>\n            </div>\n          </div>\n          <p className=\"text-[#39FF14] text-sm\">Locations</p>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"bg-emerald-500/20 p-3 rounded-lg\">\n              <Monitor className=\"w-5 h-5 text-emerald-400\" />\n            </div>\n            <div>\n              <p className=\"text-slate-400 text-sm\">Actions</p>\n              <p className=\"text-2xl font-bold text-white\">{uniqueActions.length}</p>\n            </div>\n          </div>\n          <p className=\"text-emerald-400 text-sm\">Types</p>\n        </div>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-xl p-6\">\n        <div className=\"flex flex-wrap gap-4 mb-6\">\n          <div className=\"flex-1 min-w-[200px]\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400\" />\n              <input\n                type=\"text\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                placeholder=\"Search activity...\"\n                className=\"w-full bg-[#012419] border border-[#024d30] rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n              />\n            </div>\n          </div>\n\n          <select\n            value={filterAction}\n            onChange={(e) => setFilterAction(e.target.value)}\n            className=\"bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n          >\n            <option value=\"all\">All Actions</option>\n            {uniqueActions.map(action => (\n              <option key={action} value={action}>{action}</option>\n            ))}\n          </select>\n\n          <select\n            value={filterResource}\n            onChange={(e) => setFilterResource(e.target.value)}\n            className=\"bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n          >\n            <option value=\"all\">All Resources</option>\n            {uniqueResources.map(resource => (\n              <option key={resource} value={resource}>{resource}</option>\n            ))}\n          </select>\n\n          <select\n            value={dateRange}\n            onChange={(e) => setDateRange(e.target.value)}\n            className=\"bg-[#012419] border border-[#024d30] rounded-lg px-4 py-2.5 text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n          >\n            <option value=\"all\">All Time</option>\n            <option value=\"1h\">Last Hour</option>\n            <option value=\"24h\">Last 24 Hours</option>\n            <option value=\"7d\">Last 7 Days</option>\n            <option value=\"30d\">Last 30 Days</option>\n          </select>\n        </div>\n\n        {filteredLogs.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <Activity className=\"w-12 h-12 text-slate-600 mx-auto mb-4\" />\n            <p className=\"text-slate-400 mb-2\">No activity logs found</p>\n            <p className=\"text-slate-500 text-sm\">Try adjusting your filters</p>\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {filteredLogs.map((log) => (\n              <div key={log.id} className=\"bg-[#012419]/50 border border-[#024d30] rounded-lg p-4 hover:bg-[#012419]/70 transition-colors\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"text-2xl\">{getActionIcon(log.action)}</div>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-3 mb-2\">\n                      <span className={`inline-flex items-center px-2 py-1 rounded text-xs font-semibold ${getActionColor(log.action)}`}>\n                        {log.action.toUpperCase()}\n                      </span>\n                      <span className=\"text-slate-400 text-sm\">{formatTimeAgo(log.created_at)}</span>\n                      <span className=\"text-slate-500 text-sm\">•</span>\n                      <span className=\"text-slate-400 text-sm capitalize\">{log.resource_type}</span>\n                      {log.resource_id && (\n                        <>\n                          <span className=\"text-slate-500 text-sm\">•</span>\n                          <span className=\"text-slate-500 text-xs font-mono\">{log.resource_id.substring(0, 8)}...</span>\n                        </>\n                      )}\n                    </div>\n                    <div className=\"flex items-center gap-4 text-sm text-slate-500\">\n                      {log.ip_address && (\n                        <div className=\"flex items-center gap-1\">\n                          <MapPin className=\"w-3 h-3\" />\n                          <span className=\"font-mono\">{log.ip_address}</span>\n                        </div>\n                      )}\n                      {log.user_agent && (\n                        <div className=\"flex items-center gap-1\">\n                          <Monitor className=\"w-3 h-3\" />\n                          <span className=\"truncate max-w-[300px]\">{log.user_agent}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#39FF14]/10 to-[#32e012]/10 border border-[#39FF14]/30 rounded-xl p-6\">\n        <div className=\"flex items-start gap-4\">\n          <div className=\"bg-[#39FF14]/20 p-3 rounded-lg\">\n            <Activity className=\"w-5 h-5 text-[#39FF14]\" />\n          </div>\n          <div>\n            <h4 className=\"text-[#39FF14] font-semibold mb-2\">About Activity Logs</h4>\n            <ul className=\"text-slate-300 text-sm space-y-1\">\n              <li>• Activity logs are updated in real-time</li>\n              <li>• Logs are retained for 90 days</li>\n              <li>• Includes IP addresses and user agents for security</li>\n              <li>• Can be exported along with your data</li>\n              <li>• Helps you monitor unauthorized access</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11607, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/Settings.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { Users, Key, Plug, Shield, FileText, Settings as SettingsIcon, Bell, Download, Activity } from 'lucide-react';\nimport UserManagement from './UserManagement';\nimport AccessManagement from './AccessManagement';\nimport IntegrationsManagement from './IntegrationsManagement';\nimport SecurityManagement from './SecurityManagement';\nimport AuditManagement from './AuditManagement';\nimport Preferences from './Preferences';\nimport NotificationsSettings from './NotificationsSettings';\nimport DataPrivacy from './DataPrivacy';\nimport ActivityLogs from './ActivityLogs';\n\ntype Tab = 'preferences' | 'users' | 'access' | 'integrations' | 'security' | 'notifications' | 'privacy' | 'activity' | 'audit';\n\nconst tabs = [\n  { id: 'preferences' as Tab, label: 'Preferences', icon: SettingsIcon },\n  { id: 'users' as Tab, label: 'User Management', icon: Users },\n  { id: 'access' as Tab, label: 'Access Management', icon: Key },\n  { id: 'integrations' as Tab, label: 'Integrations', icon: Plug },\n  { id: 'security' as Tab, label: 'Security', icon: Shield },\n  { id: 'notifications' as Tab, label: 'Notifications', icon: Bell },\n  { id: 'privacy' as Tab, label: 'Data & Privacy', icon: Download },\n  { id: 'activity' as Tab, label: 'Activity', icon: Activity },\n  { id: 'audit' as Tab, label: 'Audit Logs', icon: FileText },\n];\n\nexport default function Settings() {\n  const [activeTab, setActiveTab] = useState<Tab>('preferences');\n\n  const renderTabContent = () => {\n    switch (activeTab) {\n      case 'preferences':\n        return <Preferences />;\n      case 'users':\n        return <UserManagement />;\n      case 'access':\n        return <AccessManagement />;\n      case 'integrations':\n        return <IntegrationsManagement />;\n      case 'security':\n        return <SecurityManagement />;\n      case 'notifications':\n        return <NotificationsSettings />;\n      case 'privacy':\n        return <DataPrivacy />;\n      case 'activity':\n        return <ActivityLogs />;\n      case 'audit':\n        return <AuditManagement />;\n      default:\n        return <Preferences />;\n    }\n  };\n\n  return (\n    <div className=\"flex-1 overflow-auto bg-[#013221] p-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-4xl font-bold text-white mb-2\">Settings</h1>\n        <p className=\"text-slate-400 text-lg\">Manage your platform configuration and preferences</p>\n      </div>\n\n      <div className=\"bg-gradient-to-br from-[#012419]/50 to-[#012419]/30 backdrop-blur-sm border border-[#024d30] rounded-2xl overflow-hidden\">\n        <div className=\"border-b border-[#024d30]\">\n          <div className=\"flex overflow-x-auto\">\n            {tabs.map((tab) => {\n              const Icon = tab.icon;\n              const isActive = activeTab === tab.id;\n\n              return (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id)}\n                  className={`flex items-center gap-3 px-6 py-4 font-medium transition-all relative whitespace-nowrap ${\n                    isActive\n                      ? 'text-[#39FF14] bg-[#024d30]/50'\n                      : 'text-slate-400 hover:text-white hover:bg-[#024d30]/30'\n                  }`}\n                >\n                  <Icon className=\"w-5 h-5\" style={{ color: '#40C706' }} />\n                  {tab.label}\n                  {isActive && (\n                    <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-[#39FF14] to-[#32e012]\"></div>\n                  )}\n                </button>\n              );\n            })}\n          </div>\n        </div>\n\n        <div className=\"p-8\">\n          {renderTabContent()}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AAIA,MAAM,OAAO;IACX;QAAE,IAAI;QAAsB,OAAO;QAAe,MAAM,yNAAY;IAAC;IACrE;QAAE,IAAI;QAAgB,OAAO;QAAmB,MAAM,gNAAK;IAAC;IAC5D;QAAE,IAAI;QAAiB,OAAO;QAAqB,MAAM,0MAAG;IAAC;IAC7D;QAAE,IAAI;QAAuB,OAAO;QAAgB,MAAM,6MAAI;IAAC;IAC/D;QAAE,IAAI;QAAmB,OAAO;QAAY,MAAM,mNAAM;IAAC;IACzD;QAAE,IAAI;QAAwB,OAAO;QAAiB,MAAM,6MAAI;IAAC;IACjE;QAAE,IAAI;QAAkB,OAAO;QAAkB,MAAM,yNAAQ;IAAC;IAChE;QAAE,IAAI;QAAmB,OAAO;QAAY,MAAM,yNAAQ;IAAC;IAC3D;QAAE,IAAI;QAAgB,OAAO;QAAc,MAAM,6NAAQ;IAAC;CAC3D;AAEc,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAM;IAEhD,MAAM,mBAAmB;QACvB,OAAQ;YACN,KAAK;gBACH,qBAAO,6LAAC,2JAAW;;;;;YACrB,KAAK;gBACH,qBAAO,6LAAC,8JAAc;;;;;YACxB,KAAK;gBACH,qBAAO,6LAAC,gKAAgB;;;;;YAC1B,KAAK;gBACH,qBAAO,6LAAC,sKAAsB;;;;;YAChC,KAAK;gBACH,qBAAO,6LAAC,kKAAkB;;;;;YAC5B,KAAK;gBACH,qBAAO,6LAAC,qKAAqB;;;;;YAC/B,KAAK;gBACH,qBAAO,6LAAC,2JAAW;;;;;YACrB,KAAK;gBACH,qBAAO,6LAAC,4JAAY;;;;;YACtB,KAAK;gBACH,qBAAO,6LAAC,+JAAe;;;;;YACzB;gBACE,qBAAO,6LAAC,2JAAW;;;;;QACvB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,6LAAC;wBAAE,WAAU;kCAAyB;;;;;;;;;;;;0BAGxC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;sCACZ,KAAK,GAAG,CAAC,CAAC;gCACT,MAAM,OAAO,IAAI,IAAI;gCACrB,MAAM,WAAW,cAAc,IAAI,EAAE;gCAErC,qBACE,6LAAC;oCAEC,SAAS,IAAM,aAAa,IAAI,EAAE;oCAClC,WAAW,CAAC,wFAAwF,EAClG,WACI,mCACA,yDACJ;;sDAEF,6LAAC;4CAAK,WAAU;4CAAU,OAAO;gDAAE,OAAO;4CAAU;;;;;;wCACnD,IAAI,KAAK;wCACT,0BACC,6LAAC;4CAAI,WAAU;;;;;;;mCAXZ,IAAI,EAAE;;;;;4BAejB;;;;;;;;;;;kCAIJ,6LAAC;wBAAI,WAAU;kCACZ;;;;;;;;;;;;;;;;;;AAKX;GArEwB;KAAA"}},
    {"offset": {"line": 11867, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Settings/WhatsAppConfiguration.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { MessageCircle, Plus, Trash2, Check, X, AlertCircle, Loader, Copy, Eye, EyeOff, Building2, Phone, CheckCircle, XCircle, MessageSquare, AlertTriangle, Smartphone, Shield } from 'lucide-react';\n\ntype WhatsAppConfig = {\n  id: string;\n  tenant_id: string;\n  business_account_id: string;\n  access_token: string;\n  webhook_url: string | null;\n  webhook_token: string | null;\n  is_verified: boolean;\n  verified_at: string | null;\n  config_data: any;\n};\n\ntype WhatsAppNumber = {\n  id: string;\n  tenant_id: string;\n  whatsapp_config_id: string;\n  phone_number: string;\n  display_phone_number: string | null;\n  verified_name: string | null;\n  code_verification_status: string;\n  quality_rating: string;\n  is_active: boolean;\n  channel_name: string | null;\n  phone_number_id: string | null;\n};\n\ntype SampleConfig = {\n  id: string;\n  business_account_id: string;\n  business_name: string;\n  industry: string;\n  description: string;\n  is_verified: boolean;\n  config_data: any;\n  phone_numbers: any[];\n};\n\ninterface WhatsappAPIConfigurationProps {\n  onConfigUpdate?: () => void;\n}\n\nexport default function WhatsappAPIConfiguration({ onConfigUpdate }: WhatsappAPIConfigurationProps = {}) {\n  const { user } = useAuth();\n  const [activeTab, setActiveTab] = useState<'my-config' | 'samples'>('my-config');\n  const [config, setConfig] = useState<WhatsAppConfig | null>(null);\n  const [numbers, setNumbers] = useState<WhatsAppNumber[]>([]);\n  const [sampleConfigs, setSampleConfigs] = useState<SampleConfig[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [verifying, setVerifying] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadConfiguration();\n      loadSampleConfigs();\n  }, []);\n\n  const loadConfiguration = async () => {\n    try {\n      const { data: configData, error: configError } = await db\n        .from('tenant_whatsapp_configs')\n        .select('*')\n        \n        .maybeSingle();\n\n      if (configError) throw configError;\n\n      setConfig(configData);\n\n      if (configData) {\n        const { data: numbersData, error: numbersError } = await db\n          .from('tenant_whatsapp_numbers')\n          .select('*')\n          .eq('whatsapp_config_id', configData.id)\n          .order('created_at', { ascending: false });\n\n        if (numbersError) throw numbersError;\n        setNumbers(numbersData || []);\n      }\n    } catch (err: any) {\n      console.error('Error loading Whatsapp API configuration:', err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadSampleConfigs = async () => {\n    try {\n      const { data: sampleConfigsData, error: samplesError } = await db\n        .from('sample_whatsapp_configs')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (samplesError) throw samplesError;\n\n      if (sampleConfigsData) {\n        const configsWithNumbers = await Promise.all(\n          sampleConfigsData.map(async (config: any) => {\n            const configData = typeof config.config_data === 'string' \n              ? JSON.parse(config.config_data) \n              : config.config_data;\n\n            const { data: numbersData } = await db\n              .from('sample_whatsapp_numbers')\n              .select('*')\n              .eq('config_id', config.id)\n              .limit(5);\n\n            return {\n              ...config,\n              config_data: configData,\n              phone_numbers: numbersData || []\n            };\n          })\n        );\n\n        setSampleConfigs(configsWithNumbers);\n      }\n    } catch (err: any) {\n      console.error('Error loading sample configurations:', err);\n    }\n  };\n\n  const handleDeleteConfig = async () => {\n    if (!config || !confirm('Are you sure you want to delete this WhatsApp configuration? All associated numbers will be removed.')) {\n      return;\n    }\n\n    try {\n      const { error } = await db\n        .from('tenant_whatsapp_configs')\n        .delete()\n        .eq('id', config.id);\n\n      if (error) throw error;\n\n      setConfig(null);\n      setNumbers([]);\n      setSuccess('WhatsApp configuration deleted successfully');\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err: any) {\n      console.error('Error deleting configuration:', err);\n      setError(err.message);\n    }\n  };\n\n  const handleDeleteNumber = async (numberId: string) => {\n    if (!confirm('Are you sure you want to remove this number?')) {\n      return;\n    }\n\n    try {\n      const { error } = await db\n        .from('tenant_whatsapp_numbers')\n        .delete()\n        .eq('id', numberId);\n\n      if (error) throw error;\n\n      setNumbers(numbers.filter(n => n.id !== numberId));\n      setSuccess('Number removed successfully');\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err: any) {\n      console.error('Error deleting number:', err);\n      setError(err.message);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <Loader className=\"w-8 h-8 text-[#39FF14] animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">WhatsApp Business Configuration</h2>\n          <p className=\"text-slate-400\">\n            Configure your WhatsApp Business Account to send and receive messages\n          </p>\n        </div>\n        <button\n          onClick={() => setShowAddModal(true)}\n          className=\"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#39FF14] to-[#32e012] text-black rounded-lg hover:from-[#32e012] hover:to-[#28b80f] transition-all\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          New Configuration\n        </button>\n      </div>\n\n      <div className=\"flex gap-2 border-b border-slate-700\">\n        <button\n          onClick={() => setActiveTab('my-config')}\n          className={`px-4 py-3 font-medium transition-all ${\n            activeTab === 'my-config'\n              ? 'text-green-400 border-b-2 border-green-400'\n              : 'text-slate-400 hover:text-white'\n          }`}\n        >\n          My Configuration\n        </button>\n        <button\n          onClick={() => setActiveTab('samples')}\n          className={`px-4 py-3 font-medium transition-all ${\n            activeTab === 'samples'\n              ? 'text-green-400 border-b-2 border-green-400'\n              : 'text-slate-400 hover:text-white'\n          }`}\n        >\n          Sample Configurations ({sampleConfigs.length})\n        </button>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-500/10 border border-red-500/50 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3\">\n                <XCircle className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\n            <div>\n              <h3 className=\"text-red-400 font-semibold mb-1\">Error</h3>\n              <p className=\"text-red-300 text-sm\">{error}</p>\n            </div>\n            <button onClick={() => setError(null)} className=\"ml-auto text-red-400 hover:text-red-300\">\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n      {success && (\n        <div className=\"bg-green-500/10 border border-green-500/50 rounded-lg p-4\">\n          <div className=\"flex items-start gap-3\">\n                <CheckCircle className=\"w-5 h-5 text-brand-lime flex-shrink-0 mt-0.5\" />\n            <div>\n              <p className=\"text-green-300 text-sm\">{success}</p>\n            </div>\n            <button onClick={() => setSuccess(null)} className=\"ml-auto text-green-400 hover:text-green-300\">\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n{activeTab === 'my-config' ? (\n        config ? (\n          <div className=\"space-y-6\">\n            <div className=\"bg-slate-800/50 border border-slate-700 rounded-lg p-6\">\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"p-3 bg-gradient-to-r from-[#39FF14]/20 to-[#32e012]/20 rounded-lg\">\n                        <MessageSquare className=\"w-6 h-6 text-brand-lime\" />\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-white\">WhatsApp Business Account</h3>\n                    <p className=\"text-slate-400 text-sm\">Account ID: {config.business_account_id}</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  {config.is_verified ? (\n                    <span className=\"flex items-center gap-2 px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium border border-green-500/30\">\n                      <Check className=\"w-4 h-4\" />\n                      Verified\n                    </span>\n                  ) : (\n                    <span className=\"flex items-center gap-2 px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm font-medium border border-yellow-500/30\">\n                      <AlertCircle className=\"w-4 h-4\" />\n                      Not Verified\n                    </span>\n                  )}\n                  <button\n                    onClick={handleDeleteConfig}\n                    className=\"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all\"\n                    title=\"Delete configuration\"\n                  >\n                                      <AlertTriangle className=\"w-5 h-5 text-brand-lime\" />\n                  </button>\n                </div>\n              </div>\n\n              {config.webhook_url && (\n                <div className=\"space-y-3\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                      Webhook Endpoint\n                    </label>\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"text\"\n                        value={config.webhook_url}\n                        readOnly\n                        className=\"flex-1 px-4 py-2 bg-slate-900/50 border border-slate-700 rounded-lg text-white focus:outline-none\"\n                      />\n                      <button\n                        onClick={() => {\n                          navigator.clipboard.writeText(config.webhook_url!);\n                          setSuccess('Webhook URL copied to clipboard');\n                          setTimeout(() => setSuccess(null), 2000);\n                        }}\n                        className=\"p-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-all\"\n                        title=\"Copy URL\"\n                      >\n                        <Copy className=\"w-5 h-5\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  {config.webhook_token && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n                        Webhook Token\n                      </label>\n                      <div className=\"flex items-center gap-2\">\n                        <input\n                          type=\"password\"\n                          value={config.webhook_token}\n                          readOnly\n                          className=\"flex-1 px-4 py-2 bg-slate-900/50 border border-slate-700 rounded-lg text-white focus:outline-none\"\n                        />\n                        <button\n                          onClick={() => {\n                            navigator.clipboard.writeText(config.webhook_token!);\n                            setSuccess('Token copied to clipboard');\n                            setTimeout(() => setSuccess(null), 2000);\n                          }}\n                          className=\"p-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-all\"\n                          title=\"Copy token\"\n                        >\n                          <Copy className=\"w-5 h-5\" />\n                        </button>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div className=\"bg-slate-800/50 border border-slate-700 rounded-lg p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-white\">Connected Numbers</h3>\n              </div>\n\n              {numbers.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <MessageCircle className=\"w-12 h-12 text-slate-600 mx-auto mb-3\" />\n                  <p className=\"text-slate-400\">No phone numbers connected yet</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {numbers.map((number) => (\n                    <div\n                      key={number.id}\n                      className=\"flex items-center justify-between p-4 bg-slate-900/50 border border-slate-700 rounded-lg\"\n                    >\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <span className=\"text-white font-medium\">\n                            {number.display_phone_number || number.phone_number}\n                          </span>\n                          {number.is_active && (\n                            <span className=\"px-2 py-0.5 bg-green-500/20 text-green-400 rounded text-xs font-medium border border-green-500/30\">\n                              Active\n                            </span>\n                          )}\n                        </div>\n                        <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                          {number.verified_name && (\n                            <div>\n                              <span className=\"text-slate-500\">Verified Name:</span>\n                              <span className=\"text-slate-300 ml-2\">{number.verified_name}</span>\n                            </div>\n                          )}\n                          {number.channel_name && (\n                            <div>\n                              <span className=\"text-slate-500\">Channel:</span>\n                              <span className=\"text-slate-300 ml-2\">{number.channel_name}</span>\n                            </div>\n                          )}\n                          <div>\n                            <span className=\"text-slate-500\">Quality:</span>\n                            <span className={`ml-2 ${\n                              number.quality_rating === 'GREEN' ? 'text-green-400' :\n                              number.quality_rating === 'YELLOW' ? 'text-yellow-400' :\n                              number.quality_rating === 'RED' ? 'text-red-400' :\n                              'text-slate-400'\n                            }`}>\n                              {number.quality_rating}\n                            </span>\n                          </div>\n                          <div>\n                            <span className=\"text-slate-500\">Status:</span>\n                            <span className=\"text-slate-300 ml-2\">{number.code_verification_status}</span>\n                          </div>\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => handleDeleteNumber(number.id)}\n                        className=\"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all ml-4\"\n                        title=\"Remove number\"\n                      >\n                        <Trash2 className=\"w-5 h-5\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className=\"bg-slate-800/50 border border-slate-700 rounded-lg p-12 text-center\">\n            <MessageCircle className=\"w-16 h-16 text-slate-600 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-white mb-2\">No WhatsApp Configuration</h3>\n            <p className=\"text-slate-400 mb-6\">\n              Connect your WhatsApp Business Account to start sending messages\n            </p>\n            <button\n              onClick={() => setShowAddModal(true)}\n              className=\"px-6 py-3 bg-gradient-to-r from-[#39FF14] to-[#32e012] text-black rounded-lg hover:from-[#32e012] hover:to-[#28b80f] transition-all\"\n            >\n              Add Configuration\n            </button>\n          </div>\n        )\n      ) : (\n        <div className=\"space-y-6\">\n          {sampleConfigs.length === 0 ? (\n            <div className=\"bg-slate-800/50 border border-slate-700 rounded-lg p-12 text-center\">\n              <Building2 className=\"w-16 h-16 text-slate-600 mx-auto mb-4\" />\n              <h3 className=\"text-xl font-semibold text-white mb-2\">No Sample Configurations</h3>\n              <p className=\"text-slate-400\">Sample configurations will appear here</p>\n            </div>\n          ) : (\n            sampleConfigs.map((sample) => (\n              <div key={sample.id} className=\"bg-slate-800/50 border border-slate-700 rounded-lg p-6\">\n                <div className=\"flex items-start justify-between mb-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"p-3 bg-gradient-to-r from-[#39FF14]/20 to-[#32e012]/20 rounded-lg\">\n                        <Smartphone className=\"w-6 h-6 text-brand-lime\" />\n                    </div>\n                    <div>\n                      <h3 className=\"text-xl font-semibold text-white\">{sample.business_name}</h3>\n                      <p className=\"text-slate-400 text-sm\">{sample.industry}</p>\n                    </div>\n                  </div>\n                  {sample.is_verified && (\n                    <span className=\"flex items-center gap-2 px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm font-medium border border-green-500/30\">\n                      <Check className=\"w-4 h-4\" />\n                      Verified\n                    </span>\n                  )}\n                </div>\n\n                <p className=\"text-slate-300 mb-4\">{sample.description}</p>\n\n                {sample.config_data && (\n                  <div className=\"grid grid-cols-2 gap-4 mb-4 text-sm\">\n                    {sample.config_data.email && (\n                      <div>\n                        <span className=\"text-slate-500\">Email:</span>\n                        <span className=\"text-slate-300 ml-2\">{sample.config_data.email}</span>\n                      </div>\n                    )}\n                    {sample.config_data.phone && (\n                      <div>\n                        <span className=\"text-slate-500\">Phone:</span>\n                        <span className=\"text-slate-300 ml-2\">{sample.config_data.phone}</span>\n                      </div>\n                    )}\n                    {sample.config_data.website && (\n                      <div className=\"col-span-2\">\n                        <span className=\"text-slate-500\">Website:</span>\n                        <span className=\"text-slate-300 ml-2\">{sample.config_data.website}</span>\n                      </div>\n                    )}\n                  </div>\n                )}\n\n                {sample.phone_numbers.length > 0 && (\n                  <div className=\"space-y-2\">\n                    <h4 className=\"text-sm font-semibold text-white flex items-center gap-2\">\n                      <Phone className=\"w-4 h-4\" />\n                      Connected Numbers ({sample.phone_numbers.length})\n                    </h4>\n                    <div className=\"space-y-2\">\n                      {sample.phone_numbers.map((phone: any) => (\n                        <div\n                          key={phone.id}\n                          className=\"flex items-center justify-between p-3 bg-slate-900/50 border border-slate-700 rounded-lg\"\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <span className=\"text-white font-medium\">\n                              {phone.display_phone_number || phone.phone_number}\n                            </span>\n                            {phone.is_active && (\n                              <span className=\"px-2 py-0.5 bg-green-500/20 text-green-400 rounded text-xs font-medium border border-green-500/30\">\n                                Active\n                              </span>\n                            )}\n                          </div>\n                          <div className=\"flex items-center gap-4 text-sm\">\n                            {phone.verified_name && (\n                              <div>\n                                <span className=\"text-slate-500\">Name:</span>\n                                <span className=\"text-slate-300 ml-2\">{phone.verified_name}</span>\n                              </div>\n                            )}\n                            <div>\n                              <span className=\"text-slate-500\">Quality:</span>\n                              <span className={`ml-2 ${\n                                phone.quality_rating === 'HIGH' ? 'text-green-400' :\n                                phone.quality_rating === 'MEDIUM' ? 'text-yellow-400' :\n                                phone.quality_rating === 'LOW' ? 'text-red-400' :\n                                'text-slate-400'\n                              }`}>\n                                {phone.quality_rating}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n      )}\n\n      {showAddModal && (\n        <AddConfigModal\n          tenantId={user?.app_metadata?.tenant_id || user?.user_metadata?.tenant_id || ''}\n          onClose={() => setShowAddModal(false)}\n          onSuccess={() => {\n            setShowAddModal(false);\n            loadConfiguration();\n            setSuccess('WhatsApp Business Account configured successfully');\n            setTimeout(() => setSuccess(null), 3000);\n            if (onConfigUpdate) {\n              setTimeout(() => onConfigUpdate(), 500);\n            }\n          }}\n          onError={(err) => setError(err)}\n        />\n      )}\n    </div>\n  );\n}\n\ninterface AddConfigModalProps {\n  tenantId: string;\n  onClose: () => void;\n  onSuccess: () => void;\n  onError: (error: string) => void;\n}\n\nfunction AddConfigModal({ tenantId, onClose, onSuccess, onError }: AddConfigModalProps) {\n  const [formData, setFormData] = useState({\n    businessAccountId: '',\n    accessToken: '',\n  });\n  const [verifying, setVerifying] = useState(false);\n  const [showToken, setShowToken] = useState(false);\n\n  const handleVerify = async () => {\n    if (!formData.businessAccountId || !formData.accessToken) {\n      onError('Please fill in all required fields');\n      return;\n    }\n\n    setVerifying(true);\n\n    try {\n      const apiUrl = `${process.env.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/verify-whatsapp-business`;\n      const headers = {\n        'Authorization': `Bearer ${process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY}`,\n        'Content-Type': 'application/json',\n      };\n\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers,\n        body: JSON.stringify({\n          businessAccountId: formData.businessAccountId,\n          accessToken: formData.accessToken,\n        }),\n      });\n\n      const result = await response.json();\n\n      if (!result.success) {\n        onError(result.error || 'Failed to verify WhatsApp Business Account');\n        setVerifying(false);\n        return;\n      }\n\n      const webhookUrl = `${process.env.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/whatsapp-webhook`;\n      const webhookToken = crypto.randomUUID();\n\n      const { data: configData, error: configError } = await db\n        .from('tenant_whatsapp_configs')\n        .insert({\n          tenant_id: tenantId,\n          business_account_id: formData.businessAccountId,\n          access_token: formData.accessToken,\n          webhook_url: webhookUrl,\n          webhook_token: webhookToken,\n          is_verified: true,\n          verified_at: new Date().toISOString(),\n          config_data: result.account,\n        })\n        .select()\n        .single();\n\n      if (configError) throw configError;\n\n      if (result.phoneNumbers && result.phoneNumbers.length > 0) {\n        const numbersToInsert = result.phoneNumbers.map((phone: any) => ({\n          tenant_id: tenantId,\n          whatsapp_config_id: configData.id,\n          phone_number: phone.displayPhoneNumber,\n          display_phone_number: phone.displayPhoneNumber,\n          verified_name: phone.verifiedName,\n          code_verification_status: phone.codeVerificationStatus,\n          quality_rating: phone.qualityRating,\n          phone_number_id: phone.id,\n          is_active: true,\n        }));\n\n        const { error: numbersError } = await db\n          .from('tenant_whatsapp_numbers')\n          .insert(numbersToInsert);\n\n        if (numbersError) {\n          console.error('Error inserting phone numbers:', numbersError);\n        }\n      }\n\n      onSuccess();\n    } catch (err: any) {\n      console.error('Error verifying WhatsApp account:', err);\n      onError(err.message || 'An error occurred during verification');\n    } finally {\n      setVerifying(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-slate-800 border border-slate-700 rounded-xl max-w-md w-full p-6\">\n        <h2 className=\"text-2xl font-bold text-white mb-6\">WhatsApp Business Account ID</h2>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n              WhatsApp Business Account ID*\n            </label>\n            <input\n              type=\"text\"\n              required\n              value={formData.businessAccountId}\n              onChange={(e) => setFormData({ ...formData, businessAccountId: e.target.value })}\n              className=\"w-full px-4 py-2 bg-slate-900/50 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-green-500\"\n              placeholder=\"1234567890\"\n            />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-slate-300 mb-2\">\n              Access Token*\n            </label>\n            <div className=\"relative\">\n              <input\n                type={showToken ? 'text' : 'password'}\n                required\n                value={formData.accessToken}\n                onChange={(e) => setFormData({ ...formData, accessToken: e.target.value })}\n                className=\"w-full px-4 py-2 pr-10 bg-slate-900/50 border border-slate-700 rounded-lg text-white focus:outline-none focus:border-green-500\"\n                placeholder=\"EABC...\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => setShowToken(!showToken)}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-white\"\n              >\n                {showToken ? <EyeOff className=\"w-5 h-5\" /> : <Eye className=\"w-5 h-5\" />}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex gap-3 mt-6\">\n          <button\n            type=\"button\"\n            onClick={onClose}\n            disabled={verifying}\n            className=\"flex-1 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-all disabled:opacity-50\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleVerify}\n            disabled={verifying || !formData.businessAccountId || !formData.accessToken}\n            className=\"flex-1 px-6 py-3 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black rounded-lg transition-all disabled:opacity-50 flex items-center justify-center gap-2\"\n          >\n            {verifying ? (\n              <>\n                <Loader className=\"w-5 h-5 animate-spin\" />\n                Verifying...\n              </>\n            ) : (\n              'Verify'\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}