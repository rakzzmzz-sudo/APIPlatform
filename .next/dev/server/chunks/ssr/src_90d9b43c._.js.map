{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/utils/ivrValidator.ts"],"sourcesContent":["import { IVRNode, IVRProject, Connection, ValidationError, IVRPage } from '../types/ivr';\n\n/**\n * Validates an IVR workflow and returns any errors or warnings\n */\nexport function validateIVRFlow(project: IVRProject): ValidationError[] {\n  const errors: ValidationError[] = [];\n  \n  project.pages.forEach(page => {\n    // Check for start node\n    const startNodes = page.nodes.filter(n => n.type === 'start');\n    if (startNodes.length === 0) {\n      errors.push({\n        nodeId: 'page',\n        type: 'error',\n        message: `Page \"${page.name}\" must have a start node`\n      });\n    } else if (startNodes.length > 1) {\n      errors.push({\n        nodeId: startNodes[1].id,\n        type: 'error',\n        message: `Page \"${page.name}\" can only have one start node`\n      });\n    }\n\n    // Check for end node\n    const endNodes = page.nodes.filter(n => n.type === 'endFlow');\n    if (endNodes.length === 0) {\n      errors.push({\n        nodeId: 'page',\n        type: 'warning',\n        message: `Page \"${page.name}\" should have at least one end flow node`\n      });\n    }\n\n    // Validate each node\n    page.nodes.forEach(node => {\n      const nodeErrors = validateNode(node, page);\n      errors.push(...nodeErrors);\n    });\n\n    // Validate connections\n    const connectionErrors = validateConnections(page.nodes, page.connections);\n    errors.push(...connectionErrors);\n  });\n\n  return errors;\n}\n\n/**\n * Validates an individual node\n */\nfunction validateNode(node: IVRNode, page: IVRPage): ValidationError[] {\n  const errors: ValidationError[] = [];\n\n  switch (node.type) {\n    case 'setParams':\n      if (!node.parameters || Object.keys(node.parameters).length === 0) {\n        errors.push({\n          nodeId: node.id,\n          type: 'warning',\n          message: 'SetParams node has no parameters defined',\n          field: 'parameters'\n        });\n      }\n      break;\n\n    case 'playMessage':\n      if (!node.messages || node.messages.length === 0) {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'PlayMessage node must have at least one message',\n          field: 'messages'\n        });\n      }\n      break;\n\n    case 'getDigits':\n      if (!node.resultVariable || node.resultVariable.trim() === '') {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'GetDigits node must specify a result variable',\n          field: 'resultVariable'\n        });\n      }\n      if (!node.messages || node.messages.length === 0) {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'GetDigits node must have at least one message',\n          field: 'messages'\n        });\n      }\n      if (node.maxDigits < node.minDigits) {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'Maximum digits cannot be less than minimum digits',\n          field: 'maxDigits'\n        });\n      }\n      break;\n\n    case 'playMenu':\n      if (!node.options || node.options.length === 0) {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'PlayMenu node must have at least one option',\n          field: 'options'\n        });\n      }\n      if (!node.messages || node.messages.length === 0) {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'PlayMenu node must have at least one message',\n          field: 'messages'\n        });\n      }\n      break;\n\n    case 'runScript':\n      if (!node.script || node.script.trim() === '') {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'RunScript node must have a script',\n          field: 'script'\n        });\n      } else {\n        // Basic JavaScript syntax validation\n        try {\n          new Function(node.script);\n        } catch (e: any) {\n          errors.push({\n            nodeId: node.id,\n            type: 'error',\n            message: `Script has syntax errors: ${e.message}`,\n            field: 'script'\n          });\n        }\n      }\n      break;\n\n    case 'switch':\n      if (!node.variable || node.variable.trim() === '') {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'Switch node must specify a variable',\n          field: 'variable'\n        });\n      }\n      if (!node.conditions || node.conditions.length === 0) {\n        errors.push({\n          nodeId: node.id,\n          type: 'warning',\n          message: 'Switch node has no conditions',\n          field: 'conditions'\n        });\n      }\n      break;\n\n    case 'callAPI':\n      if (!node.url || node.url.trim() === '') {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'CallAPI node must specify a URL',\n          field: 'url'\n        });\n      }\n      if (!node.responseVariable || node.responseVariable.trim() === '') {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'CallAPI node must specify a response variable',\n          field: 'responseVariable'\n        });\n      }\n      break;\n\n    case 'endFlow':\n      if (node.endType === 'transfer' && (!node.transferNumber || node.transferNumber.trim() === '')) {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'Transfer end flow must specify a transfer number',\n          field: 'transferNumber'\n        });\n      }\n      break;\n\n    case 'jumperExit':\n      if (!node.jumperName || node.jumperName.trim() === '') {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'Jumper exit must specify a jumper name',\n          field: 'jumperName'\n        });\n      }\n      break;\n\n    case 'jumperEntry':\n      if (!node.jumperName || node.jumperName.trim() === '') {\n        errors.push({\n          nodeId: node.id,\n          type: 'error',\n          message: 'Jumper entry must specify a jumper name',\n          field: 'jumperName'\n        });\n      }\n      break;\n  }\n\n  return errors;\n}\n\n/**\n * Validates connections between nodes\n */\nfunction validateConnections(nodes: IVRNode[], connections: Connection[]): ValidationError[] {\n  const errors: ValidationError[] = [];\n  const nodeIds = new Set(nodes.map(n => n.id));\n\n  // Check for invalid connections\n  connections.forEach(conn => {\n    if (!nodeIds.has(conn.from)) {\n      errors.push({\n        nodeId: conn.from,\n        type: 'error',\n        message: `Connection references non-existent node: ${conn.from}`\n      });\n    }\n    if (!nodeIds.has(conn.to)) {\n      errors.push({\n        nodeId: conn.to,\n        type: 'error',\n        message: `Connection references non-existent node: ${conn.to}`\n      });\n    }\n  });\n\n  // Check for orphaned nodes (except start and end)\n  nodes.forEach(node => {\n    if (node.type !== 'start' && node.type !== 'endFlow') {\n      const hasIncoming = connections.some(c => c.to === node.id);\n      if (!hasIncoming) {\n        errors.push({\n          nodeId: node.id,\n          type: 'warning',\n          message: `Node \"${node.name}\" has no incoming connections`\n        });\n      }\n    }\n    \n    if (node.type !== 'endFlow' && node.type !== 'jumperExit') {\n      const hasOutgoing = connections.some(c => c.from === node.id);\n      if (!hasOutgoing) {\n        errors.push({\n          nodeId: node.id,\n          type: 'warning',\n          message: `Node \"${node.name}\" has no outgoing connections`\n        });\n      }\n    }\n  });\n\n  // Check for potential infinite loops\n  checkForCycles(nodes, connections, errors);\n\n  return errors;\n}\n\n/**\n * Checks for cycles in the flow that could create infinite loops\n */\nfunction checkForCycles(nodes: IVRNode[], connections: Connection[], errors: ValidationError[]): void {\n  const adjacencyList: Map<string, string[]> = new Map();\n  \n  // Build adjacency list\n  nodes.forEach(node => {\n    adjacencyList.set(node.id, []);\n  });\n  \n  connections.forEach(conn => {\n    const neighbors = adjacencyList.get(conn.from) || [];\n    neighbors.push(conn.to);\n    adjacencyList.set(conn.from, neighbors);\n  });\n\n  // DFS to detect cycles\n  const visited = new Set<string>();\n  const recursionStack = new Set<string>();\n  const cycleNodes: string[] = [];\n\n  function dfs(nodeId: string): boolean {\n    visited.add(nodeId);\n    recursionStack.add(nodeId);\n\n    const neighbors = adjacencyList.get(nodeId) || [];\n    for (const neighbor of neighbors) {\n      if (!visited.has(neighbor)) {\n        if (dfs(neighbor)) {\n          cycleNodes.push(nodeId);\n          return true;\n        }\n      } else if (recursionStack.has(neighbor)) {\n        cycleNodes.push(nodeId);\n        cycleNodes.push(neighbor);\n        return true;\n      }\n    }\n\n    recursionStack.delete(nodeId);\n    return false;\n  }\n\n  // Check all nodes\n  for (const node of nodes) {\n    if (!visited.has(node.id)) {\n      if (dfs(node.id)) {\n        errors.push({\n          nodeId: cycleNodes[0],\n          type: 'warning',\n          message: `Potential infinite loop detected involving these nodes: ${cycleNodes.join(', ')}`\n        });\n        break;\n      }\n    }\n  }\n}\n\n/**\n * Gets a human-readable description of a node type\n */\nexport function getNodeTypeDescription(type: string): string {\n  const descriptions: Record<string, string> = {\n    start: 'Flow Entry Point',\n    setParams: 'Set Parameters',\n    playMessage: 'Play Message',\n    getDigits: 'Get User Input',\n    playMenu: 'Menu Options',\n    playConfirm: 'Confirmation Prompt',\n    runScript: 'Run JavaScript',\n    switch: 'Conditional Routing',\n    callAPI: 'API Call',\n    endFlow: 'End Call',\n    connector: 'Visual Connector',\n    jumperEntry: 'Jump Entry Point',\n    jumperExit: 'Jump to Page'\n  };\n  return descriptions[type] || type;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/contexts/IVRContext.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useCallback, ReactNode } from 'react';\nimport { IVRProject, IVRNode, Connection, IVRPage, CanvasViewport, ValidationError, IVRContextState } from '../types/ivr';\nimport { validateIVRFlow } from '../utils/ivrValidator';\n\ninterface IVRContextValue extends IVRContextState {\n  // Project actions\n  createProject: (name: string, description?: string) => void;\n  loadProject: (project: IVRProject) => void;\n  updateProject: (updates: Partial<IVRProject>) => void;\n  \n  // Page actions\n  addPage: (name: string) => void;\n  deletePage: (pageId: string) => void;\n  setCurrentPage: (pageId: string) => void;\n  \n  // Node actions\n  addNode: (node: IVRNode) => void;\n  updateNode: (nodeId: string, updates: Partial<IVRNode>) => void;\n  deleteNode: (nodeId: string) => void;\n  deleteNodes: (nodeIds: string[]) => void;\n  \n  // Connection actions\n  addConnection: (connection: Connection) => void;\n  deleteConnection: (connectionId: string) => void;\n  \n  // Selection actions\n  selectNode: (nodeId: string, multi?: boolean) => void;\n  clearSelection: () => void;\n  \n  // Clipboard actions\n  copy: () => void;\n  paste: (position?: { x: number; y: number }) => void;\n  \n  // History actions\n  undo: () => void;\n  redo: () => void;\n  \n  // Viewport actions\n  setViewport: (viewport: Partial<CanvasViewport>) => void;\n  \n  // Validation\n  validate: () => ValidationError[];\n  \n  // Utility\n  getCurrentPage: () => IVRPage | null;\n  getSelectedNodes: () => IVRNode[];\n}\n\nconst IVRContext = createContext<IVRContextValue | null>(null);\n\nexport function useIVR() {\n  const context = useContext(IVRContext);\n  if (!context) {\n    throw new Error('useIVR must be used within IVRProvider');\n  }\n  return context;\n}\n\ninterface IVRProviderProps {\n  children: ReactNode;\n}\n\nexport function IVRProvider({ children }: IVRProviderProps) {\n  const [state, setState] = useState<IVRContextState>({\n    project: null,\n    currentPage: null,\n    selectedNodes: [],\n    clipboard: [],\n    history: [],\n    historyIndex: -1,\n    viewport: { x: 0, y: 0, zoom: 1 },\n    validationErrors: []\n  });\n\n  const saveToHistory = useCallback((project: IVRProject) => {\n    setState(prev => {\n      const newHistory = prev.history.slice(0, prev.historyIndex + 1);\n      newHistory.push(JSON.parse(JSON.stringify(project)));\n      return {\n        ...prev,\n        history: newHistory.slice(-50), // Keep last 50 history items\n        historyIndex: Math.min(newHistory.length - 1, 49)\n      };\n    });\n  }, []);\n\n  const createProject = useCallback((name: string, description?: string) => {\n    const newProject: IVRProject = {\n      id: `project_${Date.now()}`,\n      name,\n      description,\n      pages: [{\n        id: `page_${Date.now()}`,\n        name: 'Main',\n        nodes: [],\n        connections: []\n      }],\n      variables: {},\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString(),\n      status: 'draft',\n      version: 1\n    };\n    \n    setState(prev => ({\n      ...prev,\n      project: newProject,\n      currentPage: newProject.pages[0].id,\n      selectedNodes: [],\n      history: [newProject],\n      historyIndex: 0\n    }));\n  }, []);\n\n  const loadProject = useCallback((project: IVRProject) => {\n    setState(prev => ({\n      ...prev,\n      project,\n      currentPage: project.pages[0]?.id || null,\n      selectedNodes: [],\n      history: [project],\n      historyIndex: 0\n    }));\n  }, []);\n\n  const updateProject = useCallback((updates: Partial<IVRProject>) => {\n    setState(prev => {\n      if (!prev.project) return prev;\n      const updatedProject = {\n        ...prev.project,\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      saveToHistory(updatedProject);\n      return { ...prev, project: updatedProject };\n    });\n  }, [saveToHistory]);\n\n  const getCurrentPage = useCallback((): IVRPage | null => {\n    if (!state.project || !state.currentPage) return null;\n    return state.project.pages.find(p => p.id === state.currentPage) || null;\n  }, [state.project, state.currentPage]);\n\n  const addPage = useCallback((name: string) => {\n    setState(prev => {\n      if (!prev.project) return prev;\n      \n      const newPage: IVRPage = {\n        id: `page_${Date.now()}`,\n        name,\n        nodes: [],\n        connections: []\n      };\n      \n      const updatedProject = {\n        ...prev.project,\n        pages: [...prev.project.pages, newPage],\n        updated_at: new Date().toISOString()\n      };\n      \n      saveToHistory(updatedProject);\n      \n      return {\n        ...prev,\n        project: updatedProject,\n        currentPage: newPage.id\n      };\n    });\n  }, [saveToHistory]);\n\n  const deletePage = useCallback((pageId: string) => {\n    setState(prev => {\n      if (!prev.project || prev.project.pages.length <= 1) return prev;\n      \n      const updatedPages = prev.project.pages.filter(p => p.id !== pageId);\n      const updatedProject = {\n        ...prev.project,\n        pages: updatedPages,\n        updated_at: new Date().toISOString()\n      };\n      \n      saveToHistory(updatedProject);\n      \n      return {\n        ...prev,\n        project: updatedProject,\n        currentPage: prev.currentPage === pageId ? updatedPages[0].id : prev.currentPage\n      };\n    });\n  }, [saveToHistory]);\n\n  const setCurrentPage = useCallback((pageId: string) => {\n    setState(prev => ({\n      ...prev,\n      currentPage: pageId,\n      selectedNodes: []\n    }));\n  }, []);\n\n  const addNode = useCallback((node: IVRNode) => {\n    setState(prev => {\n      if (!prev.project || !prev.currentPage) return prev;\n      \n      const updatedPages = prev.project.pages.map(page => {\n        if (page.id !== prev.currentPage) return page;\n        return {\n          ...page,\n          nodes: [...page.nodes, node]\n        };\n      });\n      \n      const updatedProject = {\n        ...prev.project,\n        pages: updatedPages,\n        updated_at: new Date().toISOString()\n      };\n      \n      saveToHistory(updatedProject);\n      \n      return { ...prev, project: updatedProject };\n    });\n  }, [saveToHistory]);\n\n  const updateNode = useCallback((nodeId: string, updates: Partial<IVRNode>) => {\n    setState(prev => {\n      if (!prev.project || !prev.currentPage) return prev;\n      \n      const updatedPages = prev.project.pages.map(page => {\n        if (page.id !== prev.currentPage) return page;\n        return {\n          ...page,\n          nodes: page.nodes.map(node =>\n            node.id === nodeId ? { ...node, ...updates } : node\n          )\n        };\n      });\n      \n      const updatedProject = {\n        ...prev.project,\n        pages: updatedPages,\n        updated_at: new Date().toISOString()\n      };\n      \n      saveToHistory(updatedProject);\n      \n      return { ...prev, project: updatedProject };\n    });\n  }, [saveToHistory]);\n\n  const deleteNode = useCallback((nodeId: string) => {\n    setState(prev => {\n      if (!prev.project || !prev.currentPage) return prev;\n      \n      const updatedPages = prev.project.pages.map(page => {\n        if (page.id !== prev.currentPage) return page;\n        return {\n          ...page,\n          nodes: page.nodes.filter(n => n.id !== nodeId),\n          connections: page.connections.filter(c => c.from !== nodeId && c.to !== nodeId)\n        };\n      });\n      \n      const updatedProject = {\n        ...prev.project,\n        pages: updatedPages,\n        updated_at: new Date().toISOString()\n      };\n      \n      saveToHistory(updatedProject);\n      \n      return {\n        ...prev,\n        project: updatedProject,\n        selectedNodes: prev.selectedNodes.filter(id => id !== nodeId)\n      };\n    });\n  }, [saveToHistory]);\n\n  const deleteNodes = useCallback((nodeIds: string[]) => {\n    nodeIds.forEach(id => deleteNode(id));\n  }, [deleteNode]);\n\n  const addConnection = useCallback((connection: Connection) => {\n    setState(prev => {\n      if (!prev.project || !prev.currentPage) return prev;\n      \n      const updatedPages = prev.project.pages.map(page => {\n        if (page.id !== prev.currentPage) return page;\n        \n        // Check if connection already exists\n        const exists = page.connections.some(\n          c => c.from === connection.from && c.to === connection.to\n        );\n        \n        if (exists) return page;\n        \n        return {\n          ...page,\n          connections: [...page.connections, connection]\n        };\n      });\n      \n      const updatedProject = {\n        ...prev.project,\n        pages: updatedPages,\n        updated_at: new Date().toISOString()\n      };\n      \n      saveToHistory(updatedProject);\n      \n      return { ...prev, project: updatedProject };\n    });\n  }, [saveToHistory]);\n\n  const deleteConnection = useCallback((connectionId: string) => {\n    setState(prev => {\n      if (!prev.project || !prev.currentPage) return prev;\n      \n      const updatedPages = prev.project.pages.map(page => {\n        if (page.id !== prev.currentPage) return page;\n        return {\n          ...page,\n          connections: page.connections.filter(c => c.id !== connectionId)\n        };\n      });\n      \n      const updatedProject = {\n        ...prev.project,\n        pages: updatedPages,\n        updated_at: new Date().toISOString()\n      };\n      \n      saveToHistory(updatedProject);\n      \n      return { ...prev, project: updatedProject };\n    });\n  }, [saveToHistory]);\n\n  const selectNode = useCallback((nodeId: string, multi = false) => {\n    setState(prev => {\n      if (multi) {\n        const isSelected = prev.selectedNodes.includes(nodeId);\n        return {\n          ...prev,\n          selectedNodes: isSelected\n            ? prev.selectedNodes.filter(id => id !== nodeId)\n            : [...prev.selectedNodes, nodeId]\n        };\n      }\n      return { ...prev, selectedNodes: [nodeId] };\n    });\n  }, []);\n\n  const clearSelection = useCallback(() => {\n    setState(prev => ({ ...prev, selectedNodes: [] }));\n  }, []);\n\n  const copy = useCallback(() => {\n    const currentPage = getCurrentPage();\n    if (!currentPage) return;\n    \n    const selectedNodesData = currentPage.nodes.filter(n =>\n      state.selectedNodes.includes(n.id)\n    );\n    \n    setState(prev => ({ ...prev, clipboard: selectedNodesData }));\n  }, [getCurrentPage, state.selectedNodes]);\n\n  const paste = useCallback((position?: { x: number; y: number }) => {\n    if (state.clipboard.length === 0) return;\n    \n    const offset = position || { x: 50, y: 50 };\n    const newNodes = state.clipboard.map(node => ({\n      ...node,\n      id: `node_${Date.now()}_${Math.random()}`,\n      position: {\n        x: node.position.x + offset.x,\n        y: node.position.y + offset.y\n      }\n    }));\n    \n    newNodes.forEach(node => addNode(node));\n  }, [state.clipboard, addNode]);\n\n  const undo = useCallback(() => {\n    setState(prev => {\n      if (prev.historyIndex <= 0) return prev;\n      const newIndex = prev.historyIndex - 1;\n      return {\n        ...prev,\n        project: prev.history[newIndex],\n        historyIndex: newIndex\n      };\n    });\n  }, []);\n\n  const redo = useCallback(() => {\n    setState(prev => {\n      if (prev.historyIndex >= prev.history.length - 1) return prev;\n      const newIndex = prev.historyIndex + 1;\n      return {\n        ...prev,\n        project: prev.history[newIndex],\n        historyIndex: newIndex\n      };\n    });\n  }, []);\n\n  const setViewport = useCallback((viewport: Partial<CanvasViewport>) => {\n    setState(prev => ({\n      ...prev,\n      viewport: { ...prev.viewport, ...viewport }\n    }));\n  }, []);\n\n  const validate = useCallback((): ValidationError[] => {\n    if (!state.project) return [];\n    const errors = validateIVRFlow(state.project);\n    setState(prev => ({ ...prev, validationErrors: errors }));\n    return errors;\n  }, [state.project]);\n\n  const getSelectedNodes = useCallback((): IVRNode[] => {\n    const currentPage = getCurrentPage();\n    if (!currentPage) return [];\n    return currentPage.nodes.filter(n => state.selectedNodes.includes(n.id));\n  }, [getCurrentPage, state.selectedNodes]);\n\n  const value: IVRContextValue = {\n    ...state,\n    createProject,\n    loadProject,\n    updateProject,\n    addPage,\n    deletePage,\n    setCurrentPage,\n    addNode,\n    updateNode,\n    deleteNode,\n    deleteNodes,\n    addConnection,\n    deleteConnection,\n    selectNode,\n    clearSelection,\n    copy,\n    paste,\n    undo,\n    redo,\n    setViewport,\n    validate,\n    getCurrentPage,\n    getSelectedNodes\n  };\n\n  return <IVRContext.Provider value={value}>{children}</IVRContext.Provider>;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 779, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/stores/workflowStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { Node, Edge, Connection, addEdge, applyNodeChanges, applyEdgeChanges, NodeChange, EdgeChange } from 'reactflow';\n\ninterface WorkflowState {\n  nodes: Node[];\n  edges: Edge[];\n  selectedNode: Node | null;\n  workflowName: string;\n  workflowDescription: string;\n  isDirty: boolean;\n  setNodes: (nodes: Node[]) => void;\n  setEdges: (edges: Edge[]) => void;\n  onNodesChange: (changes: NodeChange[]) => void;\n  onEdgesChange: (changes: EdgeChange[]) => void;\n  onConnect: (connection: Connection) => void;\n  addNode: (node: Node) => void;\n  deleteNode: (nodeId: string) => void;\n  updateNode: (nodeId: string, data: any) => void;\n  setSelectedNode: (node: Node | null) => void;\n  setWorkflowName: (name: string) => void;\n  setWorkflowDescription: (description: string) => void;\n  resetWorkflow: () => void;\n  loadWorkflow: (nodes: Node[], edges: Edge[], name: string, description: string) => void;\n}\n\nconst initialNodes: Node[] = [\n  {\n    id: 'start-1',\n    type: 'trigger',\n    position: { x: 250, y: 100 },\n    data: { label: 'Start', triggerType: 'manual', icon: 'Play' },\n  },\n];\n\nexport const useWorkflowStore = create<WorkflowState>((set, get) => ({\n  nodes: initialNodes,\n  edges: [],\n  selectedNode: null,\n  workflowName: 'Untitled Workflow',\n  workflowDescription: '',\n  isDirty: false,\n\n  setNodes: (nodes) => set({ nodes, isDirty: true }),\n\n  setEdges: (edges) => set({ edges, isDirty: true }),\n\n  onNodesChange: (changes) => {\n    set({\n      nodes: applyNodeChanges(changes, get().nodes),\n      isDirty: true,\n    });\n  },\n\n  onEdgesChange: (changes) => {\n    set({\n      edges: applyEdgeChanges(changes, get().edges),\n      isDirty: true,\n    });\n  },\n\n  onConnect: (connection) => {\n    set({\n      edges: addEdge({ ...connection, animated: true, type: 'smoothstep' }, get().edges),\n      isDirty: true,\n    });\n  },\n\n  addNode: (node) => {\n    set({\n      nodes: [...get().nodes, node],\n      isDirty: true,\n    });\n  },\n\n  deleteNode: (nodeId) => {\n    set({\n      nodes: get().nodes.filter((n) => n.id !== nodeId),\n      edges: get().edges.filter((e) => e.source !== nodeId && e.target !== nodeId),\n      isDirty: true,\n    });\n  },\n\n  updateNode: (nodeId, data) => {\n    set({\n      nodes: get().nodes.map((node) =>\n        node.id === nodeId ? { ...node, data: { ...node.data, ...data } } : node\n      ),\n      isDirty: true,\n    });\n  },\n\n  setSelectedNode: (node) => set({ selectedNode: node }),\n\n  setWorkflowName: (name) => set({ workflowName: name, isDirty: true }),\n\n  setWorkflowDescription: (description) => set({ workflowDescription: description, isDirty: true }),\n\n  resetWorkflow: () =>\n    set({\n      nodes: initialNodes,\n      edges: [],\n      selectedNode: null,\n      workflowName: 'Untitled Workflow',\n      workflowDescription: '',\n      isDirty: false,\n    }),\n\n  loadWorkflow: (nodes, edges, name, description) =>\n    set({\n      nodes,\n      edges,\n      workflowName: name,\n      workflowDescription: description,\n      isDirty: false,\n    }),\n}));\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAwBA,MAAM,eAAuB;IAC3B;QACE,IAAI;QACJ,MAAM;QACN,UAAU;YAAE,GAAG;YAAK,GAAG;QAAI;QAC3B,MAAM;YAAE,OAAO;YAAS,aAAa;YAAU,MAAM;QAAO;IAC9D;CACD;AAEM,MAAM,mBAAmB,IAAA,kJAAM,EAAgB,CAAC,KAAK,MAAQ,CAAC;QACnE,OAAO;QACP,OAAO,EAAE;QACT,cAAc;QACd,cAAc;QACd,qBAAqB;QACrB,SAAS;QAET,UAAU,CAAC,QAAU,IAAI;gBAAE;gBAAO,SAAS;YAAK;QAEhD,UAAU,CAAC,QAAU,IAAI;gBAAE;gBAAO,SAAS;YAAK;QAEhD,eAAe,CAAC;YACd,IAAI;gBACF,OAAO,IAAA,gLAAgB,EAAC,SAAS,MAAM,KAAK;gBAC5C,SAAS;YACX;QACF;QAEA,eAAe,CAAC;YACd,IAAI;gBACF,OAAO,IAAA,gLAAgB,EAAC,SAAS,MAAM,KAAK;gBAC5C,SAAS;YACX;QACF;QAEA,WAAW,CAAC;YACV,IAAI;gBACF,OAAO,IAAA,uKAAO,EAAC;oBAAE,GAAG,UAAU;oBAAE,UAAU;oBAAM,MAAM;gBAAa,GAAG,MAAM,KAAK;gBACjF,SAAS;YACX;QACF;QAEA,SAAS,CAAC;YACR,IAAI;gBACF,OAAO;uBAAI,MAAM,KAAK;oBAAE;iBAAK;gBAC7B,SAAS;YACX;QACF;QAEA,YAAY,CAAC;YACX,IAAI;gBACF,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC1C,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,UAAU,EAAE,MAAM,KAAK;gBACrE,SAAS;YACX;QACF;QAEA,YAAY,CAAC,QAAQ;YACnB,IAAI;gBACF,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,OACtB,KAAK,EAAE,KAAK,SAAS;wBAAE,GAAG,IAAI;wBAAE,MAAM;4BAAE,GAAG,KAAK,IAAI;4BAAE,GAAG,IAAI;wBAAC;oBAAE,IAAI;gBAEtE,SAAS;YACX;QACF;QAEA,iBAAiB,CAAC,OAAS,IAAI;gBAAE,cAAc;YAAK;QAEpD,iBAAiB,CAAC,OAAS,IAAI;gBAAE,cAAc;gBAAM,SAAS;YAAK;QAEnE,wBAAwB,CAAC,cAAgB,IAAI;gBAAE,qBAAqB;gBAAa,SAAS;YAAK;QAE/F,eAAe,IACb,IAAI;gBACF,OAAO;gBACP,OAAO,EAAE;gBACT,cAAc;gBACd,cAAc;gBACd,qBAAqB;gBACrB,SAAS;YACX;QAEF,cAAc,CAAC,OAAO,OAAO,MAAM,cACjC,IAAI;gBACF;gBACA;gBACA,cAAc;gBACd,qBAAqB;gBACrB,SAAS;YACX;IACJ,CAAC"}},
    {"offset": {"line": 898, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/app/%5B...slug%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { use } from 'react';\nimport { usePathname } from 'next/navigation';\nimport Dashboard from '@/components/Dashboard/Dashboard';\nimport ChannelPage from '@/components/Channels/ChannelPage';\nimport Settings from '@/components/Settings/Settings';\nimport CampaignManagement from '@/components/Campaigns/CampaignManagementNew';\nimport ProductCatalog from '@/components/Management/ProductCatalog';\nimport Billing from '@/components/Management/Billing';\nimport Resources from '@/components/Management/Resources';\nimport Reports from '@/components/Management/Reports';\nimport Recordings from '@/components/Management/Recordings';\nimport GetStarted from '@/components/Developer/GetStarted';\nimport Support from '@/components/Developer/Support';\nimport Documentation from '@/components/Developer/Documentation';\nimport FeatureValidation from '@/components/Testing/FeatureValidation';\nimport VideoAPI from '@/components/Channels/VideoAPI';\nimport BulkSMS from '@/components/Channels/BulkSMS';\nimport BulkRCS from '@/components/Channels/BulkRCS';\nimport BulkWhatsApp from '@/components/Channels/BulkWhatsApp';\nimport VoiceAPI from '@/components/Channels/VoiceAPI';\nimport ContactCenterNew from '@/components/Channels/ContactCenterNew';\nimport ChatbotBuilder from '@/components/Chatbot/ChatbotBuilder';\nimport VoiceAgent from '@/components/Channels/VoiceAgentPlatform';\nimport MeetingsAI from '@/components/Channels/MeetingsAI';\nimport Cart from '@/components/Cart/Cart';\nimport WorkFlowHub from '@/components/WorkFlow/WorkFlowHub';\nimport APIMarketplace from '@/components/Channels/APIMarketplace';\nimport EmailCampaigns from '@/components/Channels/EmailCampaigns';\nimport TelcoAPI from '@/components/Channels/TelcoAPI';\nimport TikTokCampaigns from '@/components/Channels/TikTokCampaigns';\nimport InstagramCampaigns from '@/components/Channels/InstagramCampaigns';\nimport FacebookCampaigns from '@/components/Channels/FacebookCampaigns';\nimport YouTubeCampaigns from '@/components/Channels/YouTubeCampaigns';\nimport LinkedInCampaigns from '@/components/Channels/LinkedInCampaigns';\nimport BulkViber from '@/components/Channels/BulkViber';\nimport BulkLine from '@/components/Channels/BulkLine';\nimport BulkWeChat from '@/components/Channels/BulkWeChat';\nimport Subscriptions from '@/components/Management/Subscriptions';\nimport CustomersEnhanced from '@/components/Management/CustomersEnhanced';\n\nexport default function DynamicPage({ params }: { params: Promise<{ slug: string[] }> }) {\n  // Use React.use() to unwrap the promise in a client component\n  const resolvedParams = use(params);\n  const slug = resolvedParams.slug;\n  const view = slug ? slug[0] : 'dashboard';\n\n  switch (view) {\n    case 'dashboard':\n      return <Dashboard />;\n    case 'product-catalog':\n      return <ProductCatalog />;\n    case 'billing':\n      return <Billing />;\n    case 'settings':\n      return <Settings />;\n    case 'subscriptions':\n      return <Subscriptions />;\n    case 'customers':\n      return <CustomersEnhanced />;\n    case 'resources':\n      return <Resources />;\n    case 'reports':\n      return <Reports />;\n    case 'recordings':\n      return <Recordings />;\n    case 'campaigns':\n      return <CampaignManagement />;\n    case 'workflow':\n      return <WorkFlowHub />;\n    case 'get-started':\n      return <GetStarted />;\n    case 'support':\n      return <Support />;\n    case 'documentation':\n      return <Documentation />;\n    case 'feature-validation':\n      return <FeatureValidation />;\n    case 'tiktok':\n      return <TikTokCampaigns />;\n    case 'instagram':\n      return <InstagramCampaigns />;\n    case 'facebook':\n      return <FacebookCampaigns />;\n    case 'youtube':\n      return <YouTubeCampaigns />;\n    case 'linkedin':\n      return <LinkedInCampaigns />;\n    case 'viber':\n      return <BulkViber />;\n    case 'line':\n      return <BulkLine />;\n    case 'wechat':\n      return <BulkWeChat />;\n    case 'sms':\n      return <BulkSMS />;\n    case 'rcs':\n      return <BulkRCS />;\n    case 'whatsapp':\n      return <BulkWhatsApp />;\n    case 'voice-api':\n      return <VoiceAPI />;\n    case 'cc':\n      return <ContactCenterNew />;\n    case 'chatbot':\n      return <ChatbotBuilder />;\n    case 'voice-agent':\n      return <VoiceAgent />;\n    case 'meetings-ai':\n      return <MeetingsAI />;\n    case 'video-api':\n      return <VideoAPI />;\n    case 'api-marketplace':\n      return <APIMarketplace />;\n    case 'email':\n      return <EmailCampaigns />;\n    case 'telco-api':\n      return <TelcoAPI onNavigate={() => {}} />; // Dummy onNavigate, ideally refactor component to use router\n    case 'cart':\n      return <Cart onNavigate={() => {}} />;\n    default:\n      return <Dashboard />;\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0Ce,SAAS,YAAY,EAAE,MAAM,EAA2C;IACrF,8DAA8D;IAC9D,MAAM,iBAAiB,IAAA,4MAAG,EAAC;IAC3B,MAAM,OAAO,eAAe,IAAI;IAChC,MAAM,OAAO,OAAO,IAAI,CAAC,EAAE,GAAG;IAE9B,OAAQ;QACN,KAAK;YACH,qBAAO,8OAAC,uJAAS;;;;;QACnB,KAAK;YACH,qBAAO,8OAAC,6JAAc;;;;;QACxB,KAAK;YACH,qBAAO,8OAAC,sJAAO;;;;;QACjB,KAAK;YACH,qBAAO,8OAAC,qJAAQ;;;;;QAClB,KAAK;YACH,qBAAO,8OAAC,4JAAa;;;;;QACvB,KAAK;YACH,qBAAO,8OAAC,gKAAiB;;;;;QAC3B,KAAK;YACH,qBAAO,8OAAC,wJAAS;;;;;QACnB,KAAK;YACH,qBAAO,8OAAC,sJAAO;;;;;QACjB,KAAK;YACH,qBAAO,8OAAC,yJAAU;;;;;QACpB,KAAK;YACH,qBAAO,8OAAC,mKAAkB;;;;;QAC5B,KAAK;YACH,qBAAO,8OAAC,wJAAW;;;;;QACrB,KAAK;YACH,qBAAO,8OAAC,wJAAU;;;;;QACpB,KAAK;YACH,qBAAO,8OAAC,qJAAO;;;;;QACjB,KAAK;YACH,qBAAO,8OAAC,2JAAa;;;;;QACvB,KAAK;YACH,qBAAO,8OAAC,6JAAiB;;;;;QAC3B,KAAK;YACH,qBAAO,8OAAC,4JAAe;;;;;QACzB,KAAK;YACH,qBAAO,8OAAC,+JAAkB;;;;;QAC5B,KAAK;YACH,qBAAO,8OAAC,8JAAiB;;;;;QAC3B,KAAK;YACH,qBAAO,8OAAC,6JAAgB;;;;;QAC1B,KAAK;YACH,qBAAO,8OAAC,8JAAiB;;;;;QAC3B,KAAK;YACH,qBAAO,8OAAC,sJAAS;;;;;QACnB,KAAK;YACH,qBAAO,8OAAC,qJAAQ;;;;;QAClB,KAAK;YACH,qBAAO,8OAAC,uJAAU;;;;;QACpB,KAAK;YACH,qBAAO,8OAAC,oJAAO;;;;;QACjB,KAAK;YACH,qBAAO,8OAAC,oJAAO;;;;;QACjB,KAAK;YACH,qBAAO,8OAAC,yJAAY;;;;;QACtB,KAAK;YACH,qBAAO,8OAAC,qJAAQ;;;;;QAClB,KAAK;YACH,qBAAO,8OAAC,6JAAgB;;;;;QAC1B,KAAK;YACH,qBAAO,8OAAC,0JAAc;;;;;QACxB,KAAK;YACH,qBAAO,8OAAC,+JAAU;;;;;QACpB,KAAK;YACH,qBAAO,8OAAC,uJAAU;;;;;QACpB,KAAK;YACH,qBAAO,8OAAC,qJAAQ;;;;;QAClB,KAAK;YACH,qBAAO,8OAAC,2JAAc;;;;;QACxB,KAAK;YACH,qBAAO,8OAAC,2JAAc;;;;;QACxB,KAAK;YACH,qBAAO,8OAAC,qJAAQ;gBAAC,YAAY,KAAO;;;;;sBAAO,6DAA6D;QAC1G,KAAK;YACH,qBAAO,8OAAC,6IAAI;gBAAC,YAAY,KAAO;;;;;;QAClC;YACE,qBAAO,8OAAC,uJAAS;;;;;IACrB;AACF"}}]
}