{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Chatbot/ChatbotIntegrations.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { db } from '../../lib/db';\nimport {\n  MessageSquare, Share2, Users, Brain, Database, Phone, Headphones,\n  CreditCard, Package, BarChart3, Zap, MoreHorizontal, TrendingUp,\n  Settings, Check, X, Plus, Trash2, RefreshCw, ExternalLink, Copy,\n  Key, Link as LinkIcon, AlertCircle, CheckCircle, Loader\n} from 'lucide-react';\n\ninterface IntegrationCategory {\n  id: string;\n  category_name: string;\n  category_display_name: string;\n  description: string;\n  icon_name: string;\n}\n\ninterface IntegrationProvider {\n  id: string;\n  category_id: string;\n  provider_name: string;\n  provider_display_name: string;\n  description: string;\n  provider_type: string;\n  auth_type: string;\n  configuration_schema: any;\n  capabilities: string[];\n  documentation_url: string;\n  logo_url: string;\n  is_active: boolean;\n}\n\ninterface BotIntegration {\n  id: string;\n  bot_id: string;\n  provider_id: string;\n  integration_name: string;\n  configuration: any;\n  is_active: boolean;\n  sync_status: string;\n  error_message: string;\n  last_sync_at: string;\n  cb_integration_providers?: IntegrationProvider;\n}\n\nexport default function ChatbotIntegrations({ botId }: { botId: string }) {\n  const [categories, setCategories] = useState<IntegrationCategory[]>([]);\n  const [providers, setProviders] = useState<IntegrationProvider[]>([]);\n  const [botIntegrations, setBotIntegrations] = useState<BotIntegration[]>([]);\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showConfigModal, setShowConfigModal] = useState(false);\n  const [selectedProvider, setSelectedProvider] = useState<IntegrationProvider | null>(null);\n  const [configForm, setConfigForm] = useState<any>({});\n  const [integrationName, setIntegrationName] = useState('');\n  const [editingIntegration, setEditingIntegration] = useState<BotIntegration | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  const iconMap: any = {\n    MessageSquare, Share2, Users, Brain, Database, Phone, Headphones,\n    CreditCard, Package, BarChart3, Zap, MoreHorizontal, TrendingUp\n  };\n\n  useEffect(() => {\n    if (botId) {\n      loadData();\n    }\n  }, [botId]);\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const [categoriesRes, providersRes, integrationsRes] = await Promise.all([\n        db.from('cb_integration_categories').select('*').order('sort_order'),\n        db.from('cb_integration_providers').select('*').eq('is_active', true),\n        db.from('cb_bot_integrations').select('*, cb_integration_providers(*)').eq('bot_id', botId)\n      ]);\n\n      if (categoriesRes.data) setCategories(categoriesRes.data);\n      if (providersRes.data) setProviders(providersRes.data);\n      if (integrationsRes.data) setBotIntegrations(integrationsRes.data);\n    } catch (error) {\n      console.error('Error loading integration data:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const filteredProviders = providers.filter(provider => {\n    const matchesCategory = selectedCategory === 'all' || provider.category_id === selectedCategory;\n    const matchesSearch = provider.provider_display_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         provider.description?.toLowerCase().includes(searchTerm.toLowerCase());\n    return matchesCategory && matchesSearch;\n  });\n\n  const openConfigModal = (provider: IntegrationProvider, existing?: BotIntegration) => {\n    setSelectedProvider(provider);\n    setEditingIntegration(existing || null);\n    setIntegrationName(existing?.integration_name || `${provider.provider_display_name} Integration`);\n\n    if (existing) {\n      setConfigForm(existing.configuration || {});\n    } else {\n      const initialConfig: any = {};\n      Object.keys(provider.configuration_schema || {}).forEach(key => {\n        initialConfig[key] = '';\n      });\n      setConfigForm(initialConfig);\n    }\n\n    setShowConfigModal(true);\n  };\n\n  const closeConfigModal = () => {\n    setShowConfigModal(false);\n    setSelectedProvider(null);\n    setEditingIntegration(null);\n    setConfigForm({});\n    setIntegrationName('');\n  };\n\n  const saveIntegration = async () => {\n    if (!selectedProvider) return;\n\n    try {\n      const integrationData = {\n        bot_id: botId,\n        provider_id: selectedProvider.id,\n        integration_name: integrationName,\n        configuration: configForm,\n        is_active: true,\n        sync_status: 'configured'\n      };\n\n      if (editingIntegration) {\n        const { error } = await db\n          .from('cb_bot_integrations')\n          .update(integrationData)\n          .eq('id', editingIntegration.id);\n\n        if (error) throw error;\n      } else {\n        const { error } = await db\n          .from('cb_bot_integrations')\n          .insert(integrationData);\n\n        if (error) throw error;\n      }\n\n      closeConfigModal();\n      loadData();\n    } catch (error: any) {\n      alert('Failed to save integration: ' + error.message);\n    }\n  };\n\n  const toggleIntegration = async (integration: BotIntegration) => {\n    try {\n      const { error } = await db\n        .from('cb_bot_integrations')\n        .update({ is_active: !integration.is_active })\n        .eq('id', integration.id);\n\n      if (error) throw error;\n      loadData();\n    } catch (error: any) {\n      alert('Failed to toggle integration: ' + error.message);\n    }\n  };\n\n  const deleteIntegration = async (integrationId: string) => {\n    if (!confirm('Are you sure you want to delete this integration?')) return;\n\n    try {\n      const { error } = await db\n        .from('cb_bot_integrations')\n        .delete()\n        .eq('id', integrationId);\n\n      if (error) throw error;\n      loadData();\n    } catch (error: any) {\n      alert('Failed to delete integration: ' + error.message);\n    }\n  };\n\n  const testConnection = async (integration: BotIntegration) => {\n    try {\n      const { error } = await db\n        .from('cb_bot_integrations')\n        .update({\n          sync_status: 'testing',\n          last_sync_at: new Date().toISOString()\n        })\n        .eq('id', integration.id);\n\n      if (error) throw error;\n\n      setTimeout(() => {\n        db\n          .from('cb_bot_integrations')\n          .update({ sync_status: 'connected' })\n          .eq('id', integration.id)\n          .then(() => loadData());\n      }, 2000);\n\n      loadData();\n    } catch (error: any) {\n      alert('Failed to test connection: ' + error.message);\n    }\n  };\n\n  const getIntegrationStatus = (integration: BotIntegration) => {\n    if (!integration.is_active) {\n      return { icon: X, color: 'text-gray-500', bg: 'bg-gray-500/20', label: 'Inactive' };\n    }\n\n    switch (integration.sync_status) {\n      case 'connected':\n        return { icon: CheckCircle, color: 'text-green-500', bg: 'bg-green-500/20', label: 'Connected' };\n      case 'testing':\n        return { icon: Loader, color: 'text-[#39FF14]', bg: 'bg-[#39FF14]/20', label: 'Testing' };\n      case 'error':\n        return { icon: AlertCircle, color: 'text-red-500', bg: 'bg-red-500/20', label: 'Error' };\n      default:\n        return { icon: AlertCircle, color: 'text-yellow-500', bg: 'bg-yellow-500/20', label: 'Configured' };\n    }\n  };\n\n  const isProviderConfigured = (providerId: string) => {\n    return botIntegrations.some(int => int.provider_id === providerId);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-96\">\n        <Loader className=\"w-8 h-8 text-[#39FF14] animate-spin\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-gray-800 rounded-lg p-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-white\">Channel Integrations</h2>\n            <p className=\"text-gray-400 text-sm mt-1\">\n              Connect your chatbot to messaging platforms, CRMs, and other services\n            </p>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-sm text-gray-400\">\n              {botIntegrations.filter(i => i.is_active).length} Active\n            </span>\n          </div>\n        </div>\n\n        <div className=\"flex flex-col lg:flex-row gap-4 mb-6\">\n          <input\n            type=\"text\"\n            placeholder=\"Search integrations...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n          />\n        </div>\n\n        <div className=\"flex gap-2 mb-6 overflow-x-auto pb-2\">\n          <button\n            onClick={() => setSelectedCategory('all')}\n            className={`px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap transition-colors ${\n              selectedCategory === 'all'\n                ? 'bg-[#39FF14] text-white'\n                : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n            }`}\n          >\n            All ({providers.length})\n          </button>\n          {categories.map(category => {\n            const count = providers.filter(p => p.category_id === category.id).length;\n            return (\n              <button\n                key={category.id}\n                onClick={() => setSelectedCategory(category.id)}\n                className={`px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap transition-colors ${\n                  selectedCategory === category.id\n                    ? 'bg-[#39FF14] text-white'\n                    : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                }`}\n              >\n                {category.category_display_name} ({count})\n              </button>\n            );\n          })}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n        {filteredProviders.map(provider => {\n          const Icon = iconMap[provider.configuration_schema?.icon] || Settings;\n          const configured = isProviderConfigured(provider.id);\n          const integration = botIntegrations.find(i => i.provider_id === provider.id);\n          const status = integration ? getIntegrationStatus(integration) : null;\n\n          return (\n            <div\n              key={provider.id}\n              className=\"bg-gray-800 rounded-lg p-4 border border-gray-700 hover:border-gray-600 transition-all\"\n            >\n              <div className=\"flex items-start justify-between mb-3\">\n                <div className=\"flex items-center gap-3\">\n                  <div className={`w-10 h-10 rounded-lg ${configured ? 'bg-[#39FF14]/20' : 'bg-gray-700'} flex items-center justify-center`}>\n                    <Icon className={`w-5 h-5 ${configured ? 'text-[#39FF14]' : 'text-gray-400'}`} />\n                  </div>\n                  <div>\n                    <h3 className=\"text-white font-semibold\">{provider.provider_display_name}</h3>\n                    <p className=\"text-xs text-gray-500\">{provider.provider_type}</p>\n                  </div>\n                </div>\n                {configured && status && (\n                  <div className={`${status.bg} px-2 py-1 rounded flex items-center gap-1`}>\n                    <status.icon className={`w-3 h-3 ${status.color} ${status.icon === Loader ? 'animate-spin' : ''}`} />\n                    <span className={`text-xs ${status.color}`}>{status.label}</span>\n                  </div>\n                )}\n              </div>\n\n              <p className=\"text-gray-400 text-sm mb-3 line-clamp-2\">{provider.description}</p>\n\n              <div className=\"flex flex-wrap gap-1 mb-3\">\n                {provider.capabilities?.slice(0, 3).map((cap, idx) => (\n                  <span key={idx} className=\"px-2 py-0.5 bg-gray-700 text-gray-300 text-xs rounded\">\n                    {cap.replace(/_/g, ' ')}\n                  </span>\n                ))}\n                {provider.capabilities?.length > 3 && (\n                  <span className=\"px-2 py-0.5 bg-gray-700 text-gray-300 text-xs rounded\">\n                    +{provider.capabilities.length - 3}\n                  </span>\n                )}\n              </div>\n\n              <div className=\"flex gap-2\">\n                {configured && integration ? (\n                  <>\n                    <button\n                      onClick={() => openConfigModal(provider, integration)}\n                      className=\"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-lg text-sm font-semibold transition-colors flex items-center justify-center gap-2\"\n                    >\n                      <Settings className=\"w-4 h-4\" />\n                      Configure\n                    </button>\n                    <button\n                      onClick={() => toggleIntegration(integration)}\n                      className={`px-3 py-2 rounded-lg text-sm font-semibold transition-colors ${\n                        integration.is_active\n                          ? 'bg-yellow-600 hover:bg-yellow-700 text-white'\n                          : 'bg-green-600 hover:bg-green-700 text-white'\n                      }`}\n                    >\n                      {integration.is_active ? <X className=\"w-4 h-4\" /> : <Check className=\"w-4 h-4\" />}\n                    </button>\n                    <button\n                      onClick={() => testConnection(integration)}\n                      className=\"bg-[#39FF14] hover:bg-[#32e012] text-white px-3 py-2 rounded-lg text-sm font-semibold transition-colors\"\n                    >\n                      <RefreshCw className=\"w-4 h-4\" />\n                    </button>\n                  </>\n                ) : (\n                  <button\n                    onClick={() => openConfigModal(provider)}\n                    className=\"flex-1 bg-[#39FF14] hover:bg-[#32e012] text-white px-3 py-2 rounded-lg text-sm font-semibold transition-colors flex items-center justify-center gap-2\"\n                  >\n                    <Plus className=\"w-4 h-4\" />\n                    Connect\n                  </button>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {filteredProviders.length === 0 && (\n        <div className=\"bg-gray-800 rounded-lg p-12 text-center\">\n          <Settings className=\"w-16 h-16 text-gray-600 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-semibold text-gray-400 mb-2\">No integrations found</h3>\n          <p className=\"text-gray-500\">Try adjusting your search or category filter</p>\n        </div>\n      )}\n\n      {showConfigModal && selectedProvider && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-700 sticky top-0 bg-gray-800\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-xl font-bold text-white\">\n                    {editingIntegration ? 'Configure' : 'Connect'} {selectedProvider.provider_display_name}\n                  </h3>\n                  <p className=\"text-gray-400 text-sm mt-1\">{selectedProvider.description}</p>\n                </div>\n                <button onClick={closeConfigModal} className=\"text-gray-400 hover:text-white\">\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-300 mb-2\">\n                  Integration Name\n                </label>\n                <input\n                  type=\"text\"\n                  value={integrationName}\n                  onChange={(e) => setIntegrationName(e.target.value)}\n                  placeholder=\"e.g., Production Slack Bot\"\n                  className=\"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                />\n              </div>\n\n              <div className=\"bg-[#39FF14]/20/10 border border-[#39FF14]/30 rounded-lg p-4\">\n                <div className=\"flex items-start gap-2\">\n                  <Key className=\"w-5 h-5 text-[#39FF14] mt-0.5\" />\n                  <div className=\"flex-1\">\n                    <h4 className=\"text-sm font-semibold text-[#39FF14] mb-1\">Authentication: {selectedProvider.auth_type}</h4>\n                    <p className=\"text-xs text-[#39FF14]/80\">\n                      {selectedProvider.auth_type === 'api_key' && 'Enter your API key to authenticate'}\n                      {selectedProvider.auth_type === 'oauth2' && 'OAuth 2.0 authentication required'}\n                      {selectedProvider.auth_type === 'token' && 'Enter your access token'}\n                      {selectedProvider.auth_type === 'basic_auth' && 'Enter your username and password'}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {Object.entries(selectedProvider.configuration_schema || {}).map(([key, value]) => (\n                <div key={key}>\n                  <label className=\"block text-sm font-semibold text-gray-300 mb-2\">\n                    {key.split('_').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ')}\n                  </label>\n                  <input\n                    type={key.includes('secret') || key.includes('password') || key.includes('token') ? 'password' : 'text'}\n                    value={configForm[key] || ''}\n                    onChange={(e) => setConfigForm({ ...configForm, [key]: e.target.value })}\n                    placeholder={`Enter ${key.replace(/_/g, ' ')}`}\n                    className=\"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  />\n                </div>\n              ))}\n\n              <div className=\"bg-gray-700 rounded-lg p-4\">\n                <h4 className=\"text-sm font-semibold text-gray-300 mb-2\">Capabilities</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {selectedProvider.capabilities?.map((cap, idx) => (\n                    <span key={idx} className=\"px-3 py-1 bg-gray-600 text-gray-200 text-xs rounded-full\">\n                      {cap.replace(/_/g, ' ')}\n                    </span>\n                  ))}\n                </div>\n              </div>\n\n              {selectedProvider.documentation_url && (\n                <a\n                  href={selectedProvider.documentation_url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"flex items-center gap-2 text-[#39FF14] hover:text-[#39FF14] text-sm\"\n                >\n                  <ExternalLink className=\"w-4 h-4\" />\n                  View Documentation\n                </a>\n              )}\n            </div>\n\n            <div className=\"p-6 border-t border-gray-700 flex gap-3 sticky bottom-0 bg-gray-800\">\n              {editingIntegration && (\n                <button\n                  onClick={() => deleteIntegration(editingIntegration.id)}\n                  className=\"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors flex items-center gap-2\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  Delete\n                </button>\n              )}\n              <button\n                onClick={closeConfigModal}\n                className=\"flex-1 bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={saveIntegration}\n                className=\"flex-1 bg-[#39FF14] hover:bg-[#32e012] text-white px-4 py-2 rounded-lg font-semibold transition-colors\"\n              >\n                {editingIntegration ? 'Save Changes' : 'Connect Integration'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 915, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Chatbot/ChatbotBuilder.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { db } from '../../lib/db';\nimport ChatbotIntegrations from './ChatbotIntegrations';\nimport {\n  Bot, MessageSquare, Tag, MessageCircle, FileText, Settings,\n  Database, BookOpen, Plug, Brain, Play, Plus, Edit2, Trash2,\n  Save, X, Check, AlertCircle, TrendingUp, Users, Clock, Zap,\n  Upload, Link, Server, HardDrive, Loader\n} from 'lucide-react';\n\ninterface Chatbot {\n  id: string;\n  name: string;\n  description: string;\n  type: string;\n  status: string;\n  platform: string;\n  nlu_engine: string;\n  language: string;\n  confidence_threshold: number;\n  created_at: string;\n}\n\ninterface Intent {\n  id: string;\n  intent_name: string;\n  intent_display_name: string;\n  intent_description: string;\n  is_system_intent: boolean;\n  training_phrases: string[];\n  action_type: string;\n  is_active: boolean;\n  priority: number;\n}\n\ninterface Entity {\n  id: string;\n  entity_name: string;\n  entity_display_name: string;\n  entity_type: string;\n  values: any;\n  regex_pattern: string | null;\n  is_active: boolean;\n}\n\ninterface Conversation {\n  id: string;\n  session_id: string;\n  user_id: string;\n  channel: string;\n  status: string;\n  message_count: number;\n  started_at: string;\n}\n\ninterface Message {\n  id: string;\n  message_type: string;\n  message_text: string;\n  detected_intent: string | null;\n  intent_confidence: number | null;\n  created_at: string;\n}\n\ninterface KnowledgeBaseItem {\n  id: string;\n  title: string;\n  content: string;\n  content_type: string;\n  category: string;\n  tags: string[];\n  is_active: boolean;\n}\n\ninterface Integration {\n  id: string;\n  integration_name: string;\n  integration_type: string;\n  status: string;\n  config: any;\n}\n\nexport default function ChatbotBuilder() {\n  const [activeTab, setActiveTab] = useState('dashboard');\n  const [dataLoading, setDataLoading] = useState(false);\n\n  const [bots, setBots] = useState<Chatbot[]>([]);\n  const [selectedBot, setSelectedBot] = useState<string | null>(null);\n  const [intents, setIntents] = useState<Intent[]>([]);\n  const [entities, setEntities] = useState<Entity[]>([]);\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [knowledgeBase, setKnowledgeBase] = useState<KnowledgeBaseItem[]>([]);\n  const [integrations, setIntegrations] = useState<Integration[]>([]);\n\n  const [showNewIntentModal, setShowNewIntentModal] = useState(false);\n  const [showNewEntityModal, setShowNewEntityModal] = useState(false);\n  const [showNewKBModal, setShowNewKBModal] = useState(false);\n  const [editingIntentId, setEditingIntentId] = useState<string | null>(null);\n  const [editingEntityId, setEditingEntityId] = useState<string | null>(null);\n  const [editingKBId, setEditingKBId] = useState<string | null>(null);\n\n  const [intentForm, setIntentForm] = useState({\n    intent_name: '',\n    intent_display_name: '',\n    intent_description: '',\n    training_phrases: [] as string[],\n    action_type: 'text',\n    is_active: true,\n    priority: 5\n  });\n  const [currentPhrase, setCurrentPhrase] = useState('');\n\n  const [entityForm, setEntityForm] = useState({\n    entity_name: '',\n    entity_display_name: '',\n    entity_type: 'list',\n    values: [] as any[],\n    regex_pattern: '',\n    is_active: true\n  });\n  const [currentEntityValue, setCurrentEntityValue] = useState('');\n  const [currentEntitySynonyms, setCurrentEntitySynonyms] = useState('');\n\n  const [testMessage, setTestMessage] = useState('');\n  const [testConversation, setTestConversation] = useState<any[]>([]);\n  const [isSendingMessage, setIsSendingMessage] = useState(false);\n  const [testSessionId, setTestSessionId] = useState<string>('');\n  const [selectedLLMProvider, setSelectedLLMProvider] = useState<'openai' | 'gemini'>('openai');\n\n  const [selectedConversation, setSelectedConversation] = useState<string | null>(null);\n  const [conversationMessages, setConversationMessages] = useState<Message[]>([]);\n  const [showConversationModal, setShowConversationModal] = useState(false);\n\n  const [mlConfigs, setMlConfigs] = useState<any[]>([]);\n  const [showNewMLConfigModal, setShowNewMLConfigModal] = useState(false);\n  const [editingMLConfigId, setEditingMLConfigId] = useState<string | null>(null);\n  const [mlConfigForm, setMlConfigForm] = useState({\n    config_name: '',\n    nlu_engine: 'llm',\n    llm_provider: 'openai',\n    llm_model: 'gpt-3.5-turbo',\n    confidence_threshold: 0.7,\n    temperature: 0.7,\n    max_tokens: 500,\n    is_active: true\n  });\n\n  const [kbForm, setKbForm] = useState({\n    title: '',\n    content: '',\n    content_type: 'article',\n    category: '',\n    tags: [] as string[],\n    url: '',\n    source_type: 'manual',\n    file: null as File | null,\n    is_active: true\n  });\n  const [currentTag, setCurrentTag] = useState('');\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  const [trainingStatus, setTrainingStatus] = useState<any>({\n    intent_classifier: { status: 'idle', last_trained: null, progress: 0 },\n    entity_extractor: { status: 'idle', last_trained: null, progress: 0 }\n  });\n\n  useEffect(() => {\n    loadBots();\n  }, []);\n\n  useEffect(() => {\n    if (selectedBot) {\n      loadBotData();\n    }\n  }, [selectedBot]);\n\n  const loadBots = async () => {\n    setDataLoading(true);\n    try {\n      const { data, error } = await db\n        .from('cb_bots')\n        .select('*')\n        .order('created_at', { ascending: false });\n      if (error) throw error;\n      setBots(data || []);\n      if (data && data.length > 0 && !selectedBot) {\n        setSelectedBot(data[0].id);\n      }\n    } catch (error) {\n      console.error('Error loading bots:', error);\n    } finally {\n      setDataLoading(false);\n    }\n  };\n\n  const seedSampleBots = async () => {\n    const SAMPLE_BOTS = [\n      { name: 'WhatsApp Customer Care', description: 'Automated WhatsApp bot for customer support and order tracking', platform: 'whatsapp', type: 'support', status: 'active', language: 'en', greeting_message: 'Hi! Welcome to our WhatsApp support. How can I help you today?', configuration: JSON.stringify({ welcome_msg: true, auto_reply: true }) },\n      { name: 'Telegram News Bot', description: 'Telegram bot for delivering real-time news updates and alerts', platform: 'telegram', type: 'informational', status: 'active', language: 'en', greeting_message: 'Welcome to the News Alert bot! You will receive updates here.', configuration: JSON.stringify({ categories: ['tech', 'world', 'finance'] }) },\n      { name: 'Facebook Sales Assistant', description: 'Facebook bot for handling product inquiries and lead generation', platform: 'facebook', type: 'sales', status: 'active', language: 'en', greeting_message: 'Hello! Interested in our products? I can show you the latest catalog.', configuration: JSON.stringify({ flow: 'sales_funnel' }) },\n      { name: 'TikTok Interactive Bot', description: 'TikTok bot for engaging with followers and managing contests', platform: 'tiktok', type: 'engagement', status: 'active', language: 'en', greeting_message: 'Hey TikToker! Ready to join the challenge?', configuration: JSON.stringify({ mode: 'contest' }) },\n      { name: 'Messenger Support Bot', description: 'Messenger bot for 24/7 automated customer service', platform: 'messenger', type: 'support', status: 'active', language: 'en', greeting_message: 'How can we assist you on Messenger today?', configuration: JSON.stringify({ persistent_menu: true }) },\n      { name: 'Instagram Shopping Bot', description: 'Instagram bot for product catalogs and seamless shopping experience', platform: 'instagram', type: 'sales', status: 'active', language: 'en', greeting_message: 'Welcome to our Instagram shop! Browse our latest collections.', configuration: JSON.stringify({ shop_id: 'instashop_1' }) },\n      { name: 'Viber Business Bot', description: 'Viber bot for secure business communications and notifications', platform: 'viber', type: 'business', status: 'active', language: 'en', greeting_message: 'Welcome to our official Viber business account.', configuration: JSON.stringify({ security: 'high' }) },\n      { name: 'Webchat Help Desk', description: 'Webchat bot for real-time website assistance and FAQ handling', platform: 'webchat', type: 'support', status: 'active', language: 'en', greeting_message: 'Hello! How can I help you with our website today?', configuration: JSON.stringify({ theme: 'blue' }) },\n      { name: 'Line Service Bot', description: 'Line bot for service bookings and appointment management', platform: 'line', type: 'service', status: 'active', language: 'en', greeting_message: 'Welcome! Use this bot to book your next appointment.', configuration: JSON.stringify({ calendar_id: 'line_cal_1' }) },\n      { name: 'Line Global Bot', description: 'Global Line bot for multi-language customer engagement', platform: 'line', type: 'conversational', status: 'active', language: 'en', greeting_message: 'Hello and welcome to our global Line channel.', configuration: JSON.stringify({ regions: ['APAC', 'EMEA', 'AMER'] }) }\n    ];\n\n    setDataLoading(true);\n    try {\n      // 1. Insert Bots\n      await db.from('cb_bots').insert(SAMPLE_BOTS);\n      \n      // 2. Load Bots to get their IDs\n      const { data: createdBots, error: loadError } = await db.from('cb_bots').select('*');\n      if (loadError) throw loadError;\n\n      // 3. For each bot, seed related tables\n      for (const bot of (createdBots || [])) {\n        // Skip if bot doesn't match one of our samples (to avoid re-seeding existing bots if logic allows)\n        if (!SAMPLE_BOTS.find(s => s.name === bot.name)) continue;\n\n        // --- SEED INTENTS ---\n        const intents = [\n          { bot_id: bot.id, intent_name: 'greeting', intent_display_name: 'Greeting', intent_description: 'User says hello', training_phrases: JSON.stringify(['Hi', 'Hello', 'Hey there']), action_type: 'text', priority: 5 },\n          { bot_id: bot.id, intent_name: 'help', intent_display_name: 'Help Request', intent_description: 'User needs assistance', training_phrases: JSON.stringify(['Help', 'I need help', 'Support']), action_type: 'text', priority: 4 },\n          { bot_id: bot.id, intent_name: 'bye', intent_display_name: 'Goodbye', intent_description: 'User says goodbye', training_phrases: JSON.stringify(['Bye', 'Goodbye', 'See you']), action_type: 'text', priority: 5 },\n          { bot_id: bot.id, intent_name: 'status_check', intent_display_name: 'Status Check', intent_description: 'Check order/service status', training_phrases: JSON.stringify(['Where is my order?', 'Track status', 'Check my booking']), action_type: 'api', priority: 3 },\n          { bot_id: bot.id, intent_name: 'refund', intent_display_name: 'Refund Inquiry', intent_description: 'Inquire about refunds', training_phrases: JSON.stringify(['I want a refund', 'Refund policy', 'Money back']), action_type: 'text', priority: 2 }\n        ];\n        await db.from('cb_intents').insert(intents);\n\n        // --- SEED ENTITIES ---\n        const entities = [\n          { bot_id: bot.id, entity_name: 'order_id', entity_display_name: 'Order ID', entity_type: 'regex', regex_pattern: 'ORD-\\\\d{5}', is_active: true },\n          { bot_id: bot.id, entity_name: 'product_type', entity_display_name: 'Product Type', entity_type: 'list', values: JSON.stringify([{ value: 'electronics', synonyms: ['gadget', 'tech'] }, { value: 'fashion', synonyms: ['clothing', 'wear'] }]), is_active: true }\n        ];\n        await db.from('cb_entities').insert(entities);\n\n        // --- SEED KB ---\n        const kbItems = [\n          { bot_id: bot.id, title: 'How to use this bot', content: 'Simply type your request in natural language. I can help with orders, support, and FAQs.', content_type: 'article', category: 'General' },\n          { bot_id: bot.id, title: 'Return Policy', content: 'Our return policy allows items to be returned within 30 days of purchase.', content_type: 'faq', category: 'Policies' },\n          { bot_id: bot.id, title: 'Shipping Times', content: 'Standard shipping takes 3-5 business days. Express takes 1-2.', content_type: 'faq', category: 'Shipping' }\n        ];\n        await db.from('cb_knowledge_base').insert(kbItems);\n\n        // --- SEED ML CONFIG ---\n        const mlConfig = {\n          bot_id: bot.id,\n          config_name: 'Standard NLU Config',\n          nlu_engine: 'llm',\n          llm_provider: 'openai',\n          llm_model: 'gpt-3.5-turbo',\n          confidence_threshold: 0.7,\n          is_active: true\n        };\n        await db.from('cb_ml_configs').insert(mlConfig);\n\n        // --- SEED CONVERSATIONS & MESSAGES ---\n        const sessionId = `session-${Math.random().toString(36).substr(2, 9)}`;\n        const { data: conversation, error: convError } = await db.from('cb_conversations').insert({\n          bot_id: bot.id,\n          session_id: sessionId,\n          user_id: `user-${Math.random().toString(36).substr(2, 5)}`,\n          channel: bot.platform || 'web',\n          status: 'completed',\n          message_count: 2\n        });\n\n        if (conversation) {\n          const convId = Array.isArray(conversation) ? conversation[0].id : conversation.id;\n          await db.from('cb_messages').insert([\n            { conversation_id: convId, message_type: 'user', message_text: 'Hello, I need help with my order', detected_intent: 'help', intent_confidence: 0.95 },\n            { conversation_id: convId, message_type: 'bot', message_text: 'Hi! Sure, I can help you with that. What is your order ID?' }\n          ]);\n        }\n      }\n\n      alert(`Successfully seeded 10 bots with full sample data sets!`);\n      await loadBots();\n    } catch (error: any) {\n      console.error('Error seeding bots:', error);\n      alert('Failed to seed sample bots: ' + error.message);\n    } finally {\n      setDataLoading(false);\n    }\n  };\n\n  const loadBotData = async () => {\n    if (!selectedBot) return;\n    await Promise.all([\n      loadIntents(),\n      loadEntities(),\n      loadConversations(),\n      loadKnowledgeBase(),\n      loadIntegrations(),\n      loadMLConfigs()\n    ]);\n  };\n\n  const loadMLConfigs = async () => {\n    if (!selectedBot) return;\n    try {\n      const { data, error } = await db\n        .from('cb_ml_configs')\n        .select('*')\n        .eq('bot_id', selectedBot)\n        .order('created_at', { ascending: false });\n      if (error) throw error;\n      setMlConfigs(data || []);\n    } catch (error) {\n      console.error('Error loading ML configs:', error);\n    }\n  };\n\n  const loadIntents = async () => {\n    if (!selectedBot) return;\n    try {\n      const { data, error } = await db\n        .from('cb_intents')\n        .select('*')\n        .eq('bot_id', selectedBot)\n        .order('priority', { ascending: false });\n      if (error) throw error;\n      \n      const processedIntents = (data || []).map((intent: any) => ({\n        ...intent,\n        training_phrases: typeof intent.training_phrases === 'string' \n          ? JSON.parse(intent.training_phrases) \n          : (intent.training_phrases || [])\n      }));\n      \n      setIntents(processedIntents);\n    } catch (error) {\n      console.error('Error loading intents:', error);\n    }\n  };\n\n  const loadEntities = async () => {\n    if (!selectedBot) return;\n    try {\n      const { data, error } = await db\n        .from('cb_entities')\n        .select('*')\n        .eq('bot_id', selectedBot)\n        .order('entity_display_name');\n      if (error) throw error;\n      \n      const processedEntities = (data || []).map((entity: any) => ({\n        ...entity,\n        values: typeof entity.values === 'string' \n          ? JSON.parse(entity.values) \n          : (entity.values || [])\n      }));\n      \n      setEntities(processedEntities);\n    } catch (error) {\n      console.error('Error loading entities:', error);\n    }\n  };\n\n  const loadConversations = async () => {\n    if (!selectedBot) return;\n    try {\n      const { data, error } = await db\n        .from('cb_conversations')\n        .select('*')\n        .eq('bot_id', selectedBot)\n        .order('started_at', { ascending: false })\n        .limit(50);\n      if (error) throw error;\n      setConversations(data || []);\n    } catch (error) {\n      console.error('Error loading conversations:', error);\n    }\n  };\n\n  const loadKnowledgeBase = async () => {\n    if (!selectedBot) return;\n    try {\n      const { data, error } = await db\n        .from('cb_knowledge_base')\n        .select('*')\n        .eq('bot_id', selectedBot)\n        .order('created_at', { ascending: false });\n      if (error) throw error;\n      \n      const processedKB = (data || []).map((item: any) => ({\n        ...item,\n        tags: typeof item.tags === 'string' \n          ? JSON.parse(item.tags) \n          : (item.tags || [])\n      }));\n      \n      setKnowledgeBase(processedKB);\n    } catch (error) {\n      console.error('Error loading knowledge base:', error);\n    }\n  };\n\n  const loadIntegrations = async () => {\n    if (!selectedBot) return;\n    try {\n      const { data, error } = await db\n        .from('cb_integrations')\n        .select('*')\n        .eq('bot_id', selectedBot)\n        .order('integration_name');\n      if (error) throw error;\n      setIntegrations(data || []);\n    } catch (error) {\n      console.error('Error loading integrations:', error);\n    }\n  };\n\n  const resetIntentForm = () => {\n    setIntentForm({\n      intent_name: '',\n      intent_display_name: '',\n      intent_description: '',\n      training_phrases: [],\n      action_type: 'text',\n      is_active: true,\n      priority: 5\n    });\n    setCurrentPhrase('');\n  };\n\n  const resetEntityForm = () => {\n    setEntityForm({\n      entity_name: '',\n      entity_display_name: '',\n      entity_type: 'list',\n      values: [],\n      regex_pattern: '',\n      is_active: true\n    });\n    setCurrentEntityValue('');\n    setCurrentEntitySynonyms('');\n  };\n\n  const addTrainingPhrase = () => {\n    if (currentPhrase.trim()) {\n      setIntentForm({\n        ...intentForm,\n        training_phrases: [...intentForm.training_phrases, currentPhrase.trim()]\n      });\n      setCurrentPhrase('');\n    }\n  };\n\n  const removeTrainingPhrase = (index: number) => {\n    setIntentForm({\n      ...intentForm,\n      training_phrases: intentForm.training_phrases.filter((_, i) => i !== index)\n    });\n  };\n\n  const addEntityValue = () => {\n    if (currentEntityValue.trim()) {\n      const newValue = {\n        value: currentEntityValue.trim(),\n        synonyms: currentEntitySynonyms ? currentEntitySynonyms.split(',').map(s => s.trim()) : []\n      };\n      setEntityForm({\n        ...entityForm,\n        values: [...entityForm.values, newValue]\n      });\n      setCurrentEntityValue('');\n      setCurrentEntitySynonyms('');\n    }\n  };\n\n  const removeEntityValue = (index: number) => {\n    setEntityForm({\n      ...entityForm,\n      values: entityForm.values.filter((_, i) => i !== index)\n    });\n  };\n\n  const editIntent = (intent: Intent) => {\n    setEditingIntentId(intent.id);\n    setIntentForm({\n      intent_name: intent.intent_name,\n      intent_display_name: intent.intent_display_name,\n      intent_description: intent.intent_description,\n      training_phrases: intent.training_phrases || [],\n      action_type: intent.action_type,\n      is_active: intent.is_active,\n      priority: intent.priority\n    });\n    setShowNewIntentModal(true);\n  };\n\n  const deleteIntent = async (id: string) => {\n    if (!confirm('Are you sure you want to delete this intent?')) return;\n\n    try {\n      const { error } = await db\n        .from('cb_intents')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      loadIntents();\n    } catch (error: any) {\n      alert('Failed to delete intent: ' + error.message);\n    }\n  };\n\n  const handleSaveIntent = async () => {\n    if (!selectedBot || !intentForm.intent_name || !intentForm.intent_display_name) {\n      alert('Please fill in all required fields');\n      return;\n    }\n\n    try {\n      if (editingIntentId) {\n        const { error } = await db\n          .from('cb_intents')\n          .update({\n            intent_name: intentForm.intent_name,\n            intent_display_name: intentForm.intent_display_name,\n            intent_description: intentForm.intent_description,\n            training_phrases: intentForm.training_phrases,\n            action_type: intentForm.action_type,\n            is_active: intentForm.is_active,\n            priority: intentForm.priority\n          })\n          .eq('id', editingIntentId);\n\n        if (error) throw error;\n      } else {\n        const { error } = await db\n          .from('cb_intents')\n          .insert({\n            bot_id: selectedBot,\n            intent_name: intentForm.intent_name,\n            intent_display_name: intentForm.intent_display_name,\n            intent_description: intentForm.intent_description,\n            training_phrases: intentForm.training_phrases,\n            action_type: intentForm.action_type,\n            is_system_intent: false,\n            is_active: intentForm.is_active,\n            priority: intentForm.priority\n          });\n\n        if (error) throw error;\n      }\n\n      setShowNewIntentModal(false);\n      setEditingIntentId(null);\n      resetIntentForm();\n      loadIntents();\n    } catch (error: any) {\n      alert('Failed to save intent: ' + error.message);\n    }\n  };\n\n  const editEntity = (entity: Entity) => {\n    setEditingEntityId(entity.id);\n    setEntityForm({\n      entity_name: entity.entity_name,\n      entity_display_name: entity.entity_display_name,\n      entity_type: entity.entity_type,\n      values: entity.values || [],\n      regex_pattern: entity.regex_pattern || '',\n      is_active: entity.is_active\n    });\n    setShowNewEntityModal(true);\n  };\n\n  const deleteEntity = async (id: string) => {\n    if (!confirm('Are you sure you want to delete this entity?')) return;\n\n    try {\n      const { error } = await db\n        .from('cb_entities')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      loadEntities();\n    } catch (error: any) {\n      alert('Failed to delete entity: ' + error.message);\n    }\n  };\n\n  const handleSaveEntity = async () => {\n    if (!selectedBot || !entityForm.entity_name || !entityForm.entity_display_name) {\n      alert('Please fill in all required fields');\n      return;\n    }\n\n    try {\n      if (editingEntityId) {\n        const { error } = await db\n          .from('cb_entities')\n          .update({\n            entity_name: entityForm.entity_name,\n            entity_display_name: entityForm.entity_display_name,\n            entity_type: entityForm.entity_type,\n            values: entityForm.values,\n            regex_pattern: entityForm.regex_pattern || null,\n            is_active: entityForm.is_active\n          })\n          .eq('id', editingEntityId);\n\n        if (error) throw error;\n      } else {\n        const { error } = await db\n          .from('cb_entities')\n          .insert({\n            bot_id: selectedBot,\n            entity_name: entityForm.entity_name,\n            entity_display_name: entityForm.entity_display_name,\n            entity_type: entityForm.entity_type,\n            values: entityForm.values,\n            regex_pattern: entityForm.regex_pattern || null,\n            is_active: entityForm.is_active\n          });\n\n        if (error) throw error;\n      }\n\n      setShowNewEntityModal(false);\n      setEditingEntityId(null);\n      resetEntityForm();\n      loadEntities();\n    } catch (error: any) {\n      alert('Failed to save entity: ' + error.message);\n    }\n  };\n\n  const handleTestMessage = async () => {\n    if (!testMessage.trim() || isSendingMessage || !selectedBot) return;\n\n    const userMessage = testMessage;\n    const userMsg = { type: 'user', text: userMessage, timestamp: new Date() };\n    setTestConversation(prev => [...prev, userMsg]);\n    setTestMessage('');\n    setIsSendingMessage(true);\n\n    try {\n      const apiUrl = `${process.env.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/chatbot-query`;\n\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          bot_id: selectedBot,\n          message: userMessage,\n          session_id: testSessionId || undefined,\n          user_id: 'test_user',\n          channel: 'web_test',\n          llm_provider: selectedLLMProvider\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to get chatbot response');\n      }\n\n      const data = await response.json();\n\n      if (!testSessionId && data.session_id) {\n        setTestSessionId(data.session_id);\n      }\n\n      const botResponse = {\n        type: 'bot',\n        text: data.response,\n        timestamp: new Date(),\n        intent: data.detected_intent?.intent_name || null,\n        confidence: data.detected_intent?.confidence || 0,\n        provider: data.provider,\n        model: data.model,\n        kb_used: data.knowledge_base_used,\n        metadata: data.metadata\n      };\n      setTestConversation(prev => [...prev, botResponse]);\n\n    } catch (error: any) {\n      console.error('Error processing message:', error);\n      const fallbackResponse = {\n        type: 'bot',\n        text: `Error: ${error.message || 'Failed to process your message. Please check your API keys and try again.'}`,\n        timestamp: new Date(),\n        intent: null,\n        confidence: 0,\n        isError: true\n      };\n      setTestConversation(prev => [...prev, fallbackResponse]);\n    } finally {\n      setIsSendingMessage(false);\n    }\n  };\n\n  const findBestIntent = (message: string): { intent: string | null; confidence: number } => {\n    const lowerMessage = message.toLowerCase();\n    let bestMatch: { intent: string | null; confidence: number } = { intent: null, confidence: 0 };\n\n    for (const intent of intents) {\n      if (!intent.is_active) continue;\n\n      for (const phrase of intent.training_phrases) {\n        const similarity = calculateSimilarity(lowerMessage, phrase.toLowerCase());\n        if (similarity > bestMatch.confidence) {\n          bestMatch = {\n            intent: intent.intent_display_name,\n            confidence: similarity\n          };\n        }\n      }\n    }\n\n    return bestMatch;\n  };\n\n  const calculateSimilarity = (str1: string, str2: string): number => {\n    const words1 = new Set(str1.split(/\\s+/));\n    const words2 = new Set(str2.split(/\\s+/));\n    const intersection = new Set([...words1].filter(x => words2.has(x)));\n    const union = new Set([...words1, ...words2]);\n    return union.size > 0 ? intersection.size / union.size : 0;\n  };\n\n  const loadConversationMessages = async (conversationId: string) => {\n    try {\n      const { data, error } = await db\n        .from('cb_messages')\n        .select('*')\n        .eq('conversation_id', conversationId)\n        .order('created_at', { ascending: true });\n      if (error) throw error;\n      setConversationMessages(data || []);\n      setSelectedConversation(conversationId);\n      setShowConversationModal(true);\n    } catch (error) {\n      console.error('Error loading conversation messages:', error);\n    }\n  };\n\n  const resetMLConfigForm = () => {\n    setMlConfigForm({\n      config_name: '',\n      nlu_engine: 'llm',\n      llm_provider: 'openai',\n      llm_model: 'gpt-3.5-turbo',\n      confidence_threshold: 0.7,\n      temperature: 0.7,\n      max_tokens: 500,\n      is_active: true\n    });\n  };\n\n  const editMLConfig = (config: any) => {\n    setEditingMLConfigId(config.id);\n    setMlConfigForm({\n      config_name: config.config_name,\n      nlu_engine: config.nlu_engine,\n      llm_provider: config.llm_provider,\n      llm_model: config.llm_model,\n      confidence_threshold: config.confidence_threshold,\n      temperature: config.temperature,\n      max_tokens: config.max_tokens,\n      is_active: config.is_active\n    });\n    setShowNewMLConfigModal(true);\n  };\n\n  const deleteMLConfig = async (id: string) => {\n    if (!confirm('Are you sure you want to delete this ML configuration?')) return;\n\n    try {\n      const { error } = await db\n        .from('cb_ml_configs')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      loadMLConfigs();\n    } catch (error: any) {\n      alert('Failed to delete ML config: ' + error.message);\n    }\n  };\n\n  const handleSaveMLConfig = async () => {\n    if (!selectedBot || !mlConfigForm.config_name) {\n      alert('Please fill in all required fields');\n      return;\n    }\n\n    try {\n      if (editingMLConfigId) {\n        const { error } = await db\n          .from('cb_ml_configs')\n          .update(mlConfigForm)\n          .eq('id', editingMLConfigId);\n\n        if (error) throw error;\n      } else {\n        const { error } = await db\n          .from('cb_ml_configs')\n          .insert({\n            bot_id: selectedBot,\n            ...mlConfigForm\n          });\n\n        if (error) throw error;\n      }\n\n      setShowNewMLConfigModal(false);\n      setEditingMLConfigId(null);\n      resetMLConfigForm();\n      loadMLConfigs();\n    } catch (error: any) {\n      alert('Failed to save ML config: ' + error.message);\n    }\n  };\n\n  const startTraining = async (type: 'intent_classifier' | 'entity_extractor') => {\n    setTrainingStatus((prev: any) => ({\n      ...prev,\n      [type]: { ...prev[type], status: 'training', progress: 0 }\n    }));\n\n    const progressInterval = setInterval(() => {\n      setTrainingStatus((prev: any) => {\n        const currentProgress = prev[type].progress;\n        if (currentProgress >= 100) {\n          clearInterval(progressInterval);\n          return {\n            ...prev,\n            [type]: {\n              status: 'completed',\n              last_trained: new Date().toISOString(),\n              progress: 100\n            }\n          };\n        }\n        return {\n          ...prev,\n          [type]: { ...prev[type], progress: currentProgress + 10 }\n        };\n      });\n    }, 300);\n\n    setTimeout(() => {\n      clearInterval(progressInterval);\n      setTrainingStatus((prev: any) => ({\n        ...prev,\n        [type]: {\n          status: 'completed',\n          last_trained: new Date().toISOString(),\n          progress: 100\n        }\n      }));\n\n      setTimeout(() => {\n        setTrainingStatus((prev: any) => ({\n          ...prev,\n          [type]: { ...prev[type], status: 'idle', progress: 0 }\n        }));\n      }, 2000);\n    }, 3500);\n  };\n\n  const resetKBForm = () => {\n    setKbForm({\n      title: '',\n      content: '',\n      content_type: 'article',\n      category: '',\n      tags: [],\n      url: '',\n      source_type: 'manual',\n      file: null,\n      is_active: true\n    });\n    setCurrentTag('');\n    setUploadProgress(0);\n  };\n\n  const addTag = () => {\n    if (currentTag.trim() && !kbForm.tags.includes(currentTag.trim())) {\n      setKbForm({ ...kbForm, tags: [...kbForm.tags, currentTag.trim()] });\n      setCurrentTag('');\n    }\n  };\n\n  const removeTag = (index: number) => {\n    setKbForm({ ...kbForm, tags: kbForm.tags.filter((_, i) => i !== index) });\n  };\n\n  const editKnowledgeBase = (item: KnowledgeBaseItem) => {\n    setEditingKBId(item.id);\n    setKbForm({\n      title: item.title,\n      content: item.content,\n      content_type: item.content_type,\n      category: item.category || '',\n      tags: item.tags || [],\n      url: '',\n      source_type: 'manual',\n      file: null,\n      is_active: item.is_active\n    });\n    setShowNewKBModal(true);\n  };\n\n  const deleteKnowledgeBase = async (id: string) => {\n    if (!confirm('Are you sure you want to delete this article?')) return;\n\n    try {\n      const { error } = await db\n        .from('cb_knowledge_base')\n        .delete()\n        .eq('id', id);\n\n      if (error) throw error;\n      loadKnowledgeBase();\n    } catch (error: any) {\n      alert('Failed to delete article: ' + error.message);\n    }\n  };\n\n  const handleFileUpload = async (file: File) => {\n    setIsProcessing(true);\n    setUploadProgress(0);\n\n    try {\n      const reader = new FileReader();\n      reader.onprogress = (e) => {\n        if (e.lengthComputable) {\n          setUploadProgress((e.loaded / e.total) * 100);\n        }\n      };\n\n      reader.onload = async (e) => {\n        const text = e.target?.result as string;\n        setKbForm(prev => ({\n          ...prev,\n          content: text,\n          title: prev.title || file.name.replace(/\\.[^/.]+$/, '')\n        }));\n        setUploadProgress(100);\n        setIsProcessing(false);\n      };\n\n      if (file.type === 'application/pdf') {\n        alert('PDF parsing requires a backend service. Please copy/paste content for now.');\n        setIsProcessing(false);\n        return;\n      }\n\n      reader.readAsText(file);\n    } catch (error: any) {\n      alert('Failed to process file: ' + error.message);\n      setIsProcessing(false);\n    }\n  };\n\n  const handleURLIngestion = async (url: string) => {\n    setIsProcessing(true);\n    try {\n      const response = await fetch(url);\n      const html = await response.text();\n\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(html, 'text/html');\n      const textContent = doc.body.innerText;\n\n      setKbForm(prev => ({\n        ...prev,\n        content: textContent,\n        url: url,\n        title: prev.title || doc.title || 'Imported from URL'\n      }));\n\n      alert('Content imported successfully from URL');\n    } catch (error: any) {\n      alert('Failed to fetch URL: ' + error.message);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  const handleSaveKnowledgeBase = async () => {\n    if (!selectedBot || !kbForm.title || !kbForm.content) {\n      alert('Please fill in title and content');\n      return;\n    }\n\n    try {\n      const kbData: any = {\n        title: kbForm.title,\n        content: kbForm.content,\n        content_type: kbForm.content_type,\n        category: kbForm.category || null,\n        tags: kbForm.tags.length > 0 ? kbForm.tags : null,\n        url: kbForm.url || null,\n        is_active: kbForm.is_active,\n        metadata: {\n          source_type: kbForm.source_type,\n          imported_at: new Date().toISOString()\n        }\n      };\n\n      if (editingKBId) {\n        const { error } = await db\n          .from('cb_knowledge_base')\n          .update(kbData)\n          .eq('id', editingKBId);\n\n        if (error) throw error;\n      } else {\n        const { error } = await db\n          .from('cb_knowledge_base')\n          .insert({\n            bot_id: selectedBot,\n            ...kbData\n          });\n\n        if (error) throw error;\n      }\n\n      setShowNewKBModal(false);\n      setEditingKBId(null);\n      resetKBForm();\n      loadKnowledgeBase();\n    } catch (error: any) {\n      alert('Failed to save article: ' + error.message);\n    }\n  };\n\n  if (dataLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-full\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-[#39FF14] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-gray-400\">Loading chatbot builder...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const currentBot = bots.find(b => b.id === selectedBot);\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-start\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-white mb-2 flex items-center gap-3\">\n              <Bot className=\"w-8 h-8 text-[#39FF14]\" />\n              AI Chatbot Builder\n            </h1>\n            <p className=\"text-gray-400\">Build intelligent conversational AI with advanced NLU and multi-turn conversations</p>\n            {currentBot && (\n              <div className=\"mt-2 flex items-center gap-3\">\n                <span className=\"text-sm text-gray-500\">Current Bot:</span>\n                <select\n                  value={selectedBot || ''}\n                  onChange={(e) => setSelectedBot(e.target.value)}\n                  className=\"bg-gray-800 border border-gray-700 text-[#39FF14] font-medium px-2 py-1 rounded transition-colors focus:outline-none focus:border-[#39FF14]\"\n                >\n                  {bots.map(bot => (\n                    <option key={bot.id} value={bot.id}>\n                      {bot.name}\n                    </option>\n                  ))}\n                </select>\n                <span className={`px-2 py-1 rounded text-xs ${\n                  currentBot.status === 'active' ? 'bg-green-500/20 text-green-400' :\n                  currentBot.status === 'training' ? 'bg-yellow-500/20 text-yellow-400' :\n                  'bg-gray-500/20 text-gray-400'\n                }`}>\n                  {currentBot.status}\n                </span>\n                <span className=\"px-2 py-1 bg-[#39FF14]/20/20 text-[#39FF14] text-xs rounded uppercase font-bold\">\n                  {currentBot.platform || 'web'}\n                </span>\n              </div>\n            )}\n          </div>\n          <div className=\"flex gap-3\">\n            <button\n              onClick={seedSampleBots}\n              disabled={dataLoading}\n              className=\"bg-gray-800 text-white px-4 py-2 rounded-lg font-semibold border border-gray-700 hover:bg-gray-700 transition-colors flex items-center gap-2 disabled:opacity-50\"\n            >\n              <Database className=\"w-4 h-4 text-[#39FF14]\" />\n              Load Sample Bots\n            </button>\n            <button\n              className=\"bg-[#39FF14] text-black px-4 py-2 rounded-lg font-semibold hover:bg-[#32e012] transition-colors flex items-center gap-2\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              New Chatbot\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {bots.length === 0 ? (\n        <div className=\"bg-gray-800 rounded-lg p-12 text-center\">\n          <Bot className=\"w-20 h-20 text-gray-600 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-bold text-white mb-2\">No chatbots found</h3>\n          <p className=\"text-gray-400 mb-6\">Create your first AI chatbot to get started</p>\n          <button className=\"bg-[#39FF14] text-black px-6 py-3 rounded-lg font-semibold hover:bg-[#32e012] transition-colors\">\n            <Plus className=\"w-5 h-5 inline mr-2\" />\n            Create Chatbot\n          </button>\n        </div>\n      ) : (\n        <>\n          <div className=\"flex space-x-2 mb-6 overflow-x-auto pb-2\">\n            <button\n              onClick={() => setActiveTab('dashboard')}\n              className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors flex items-center gap-2 ${\n                activeTab === 'dashboard' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n              }`}\n            >\n              <TrendingUp className=\"w-4 h-4\" />\n              Dashboard\n            </button>\n            <button\n              onClick={() => setActiveTab('intents')}\n              className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors flex items-center gap-2 ${\n                activeTab === 'intents' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n              }`}\n            >\n              <MessageSquare className=\"w-4 h-4\" />\n              Intents ({intents.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('entities')}\n              className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors flex items-center gap-2 ${\n                activeTab === 'entities' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n              }`}\n            >\n              <Tag className=\"w-4 h-4\" />\n              Entities ({entities.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('chat')}\n              className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors flex items-center gap-2 ${\n                activeTab === 'chat' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n              }`}\n            >\n              <MessageCircle className=\"w-4 h-4\" />\n              Test Chat\n            </button>\n            <button\n              onClick={() => setActiveTab('logs')}\n              className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors flex items-center gap-2 ${\n                activeTab === 'logs' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n              }`}\n            >\n              <FileText className=\"w-4 h-4\" />\n              Conversation Logs ({conversations.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('ml-settings')}\n              className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors flex items-center gap-2 ${\n                activeTab === 'ml-settings' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n              }`}\n            >\n              <Brain className=\"w-4 h-4\" />\n              ML Settings\n            </button>\n            <button\n              onClick={() => setActiveTab('knowledge-base')}\n              className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors flex items-center gap-2 ${\n                activeTab === 'knowledge-base' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n              }`}\n            >\n              <BookOpen className=\"w-4 h-4\" />\n              Knowledge Base ({knowledgeBase.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('integrations')}\n              className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors flex items-center gap-2 ${\n                activeTab === 'integrations' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-800 text-gray-300 hover:bg-gray-700'\n              }`}\n            >\n              <Plug className=\"w-4 h-4\" />\n              Integrations ({integrations.length})\n            </button>\n          </div>\n\n          {activeTab === 'dashboard' && (\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n                <div className=\"bg-gradient-to-br from-[#39FF14]/20 to-[#32e012]/20 rounded-lg p-6\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <MessageSquare className=\"w-8 h-8 text-white\" />\n                    <span className=\"text-white/80 text-sm\">Intents</span>\n                  </div>\n                  <div className=\"text-3xl font-bold text-white\">{intents.length}</div>\n                  <div className=\"text-white/70 text-sm mt-1\">{intents.filter(i => i.is_active).length} active</div>\n                </div>\n\n                <div className=\"bg-gradient-to-br from-[#39FF14]/20 to-[#32e012]/20 rounded-lg p-6\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <Tag className=\"w-8 h-8 text-white\" />\n                    <span className=\"text-white/80 text-sm\">Entities</span>\n                  </div>\n                  <div className=\"text-3xl font-bold text-white\">{entities.length}</div>\n                  <div className=\"text-white/70 text-sm mt-1\">{entities.filter(e => e.is_active).length} active</div>\n                </div>\n\n                <div className=\"bg-gradient-to-br from-[#39FF14]/20 to-[#32e012]/20 rounded-lg p-6\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <Users className=\"w-8 h-8 text-white\" />\n                    <span className=\"text-white/80 text-sm\">Conversations</span>\n                  </div>\n                  <div className=\"text-3xl font-bold text-white\">{conversations.length}</div>\n                  <div className=\"text-white/70 text-sm mt-1\">Total sessions</div>\n                </div>\n\n                <div className=\"bg-gradient-to-br from-[#39FF14]/20 to-[#32e012]/20 rounded-lg p-6\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <Zap className=\"w-8 h-8 text-white\" />\n                    <span className=\"text-white/80 text-sm\">Engine</span>\n                  </div>\n                  <div className=\"text-2xl font-bold text-white\">{currentBot?.nlu_engine}</div>\n                  <div className=\"text-white/70 text-sm mt-1\">NLU Engine</div>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-800 rounded-lg p-6\">\n                <h3 className=\"text-xl font-bold text-white mb-4\">Bot Configuration</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">Bot Name</label>\n                    <div className=\"bg-gray-700 rounded px-4 py-2 text-white\">{currentBot?.name}</div>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">Language</label>\n                    <div className=\"bg-gray-700 rounded px-4 py-2 text-white\">{currentBot?.language}</div>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">Confidence Threshold</label>\n                    <div className=\"bg-gray-700 rounded px-4 py-2 text-white\">{currentBot?.confidence_threshold}</div>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">Status</label>\n                    <div className={`rounded px-4 py-2 font-medium ${\n                      currentBot?.status === 'active' ? 'bg-green-500/20 text-green-400' :\n                      currentBot?.status === 'training' ? 'bg-yellow-500/20 text-yellow-400' :\n                      'bg-gray-500/20 text-gray-400'\n                    }`}>\n                      {currentBot?.status}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-800 rounded-lg p-6\">\n                <h3 className=\"text-xl font-bold text-white mb-4\">Features Enabled</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div className=\"flex items-center gap-3 bg-gray-700 rounded-lg p-4\">\n                    <Check className=\"w-5 h-5 text-green-400\" />\n                    <span className=\"text-white\">Multi-turn Conversations</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 bg-gray-700 rounded-lg p-4\">\n                    <Check className=\"w-5 h-5 text-green-400\" />\n                    <span className=\"text-white\">Intent Recognition (ML)</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 bg-gray-700 rounded-lg p-4\">\n                    <Check className=\"w-5 h-5 text-green-400\" />\n                    <span className=\"text-white\">Entity Extraction (ML)</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 bg-gray-700 rounded-lg p-4\">\n                    <Check className=\"w-5 h-5 text-green-400\" />\n                    <span className=\"text-white\">API Tool Calling</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 bg-gray-700 rounded-lg p-4\">\n                    <Check className=\"w-5 h-5 text-green-400\" />\n                    <span className=\"text-white\">Context Management</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 bg-gray-700 rounded-lg p-4\">\n                    <Check className=\"w-5 h-5 text-green-400\" />\n                    <span className=\"text-white\">Knowledge Base RAG</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 bg-gray-700 rounded-lg p-4\">\n                    <Check className=\"w-5 h-5 text-green-400\" />\n                    <span className=\"text-white\">Spacy Word Embeddings</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 bg-gray-700 rounded-lg p-4\">\n                    <Check className=\"w-5 h-5 text-green-400\" />\n                    <span className=\"text-white\">Zero-shot NLU (LLM)</span>\n                  </div>\n                  <div className=\"flex items-center gap-3 bg-gray-700 rounded-lg p-4\">\n                    <Check className=\"w-5 h-5 text-green-400\" />\n                    <span className=\"text-white\">Channel Integrations</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'intents' && (\n            <div>\n              <div className=\"mb-4 flex justify-between items-center\">\n                <h2 className=\"text-xl font-bold text-white\">Intent Management</h2>\n                <button\n                  onClick={() => {\n                    setEditingIntentId(null);\n                    resetIntentForm();\n                    setShowNewIntentModal(true);\n                  }}\n                  className=\"bg-[#39FF14] text-black px-4 py-2 rounded-lg font-semibold hover:bg-[#32e012] transition-colors flex items-center gap-2\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  New Intent\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-4\">\n                {intents.map((intent) => (\n                  <div key={intent.id} className=\"bg-gray-800 rounded-lg p-4\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <h3 className=\"text-lg font-bold text-white\">{intent.intent_display_name}</h3>\n                          <span className=\"text-xs text-gray-500 font-mono\">({intent.intent_name})</span>\n                          {intent.is_system_intent && (\n                            <span className=\"px-2 py-1 bg-[#39FF14]/20/20 text-[#39FF14] text-xs rounded\">System</span>\n                          )}\n                          <span className={`px-2 py-1 text-xs rounded ${\n                            intent.is_active ? 'bg-green-500/20 text-green-400' : 'bg-gray-500/20 text-gray-400'\n                          }`}>\n                            {intent.is_active ? 'Active' : 'Inactive'}\n                          </span>\n                          <span className=\"px-2 py-1 bg-[#39FF14]/20 text-[#39FF14] text-xs rounded\">\n                            Priority: {intent.priority}\n                          </span>\n                        </div>\n                        <p className=\"text-gray-400 text-sm\">{intent.intent_description}</p>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => editIntent(intent)}\n                          className=\"text-[#39FF14] hover:text-[#39FF14] p-2 hover:bg-[#39FF14]/20 rounded transition-colors\"\n                          title=\"Edit Intent\"\n                        >\n                          <Edit2 className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                          onClick={() => deleteIntent(intent.id)}\n                          className=\"text-red-400 hover:text-red-300 p-2 hover:bg-red-600/20 rounded transition-colors\"\n                          title=\"Delete Intent\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <div>\n                        <span className=\"text-sm text-gray-500\">Training Phrases ({intent.training_phrases.length}):</span>\n                        <div className=\"flex flex-wrap gap-2 mt-2\">\n                          {intent.training_phrases.slice(0, 5).map((phrase, idx) => (\n                            <span key={idx} className=\"px-2 py-1 bg-gray-700 text-gray-300 text-sm rounded\">\n                              \"{phrase}\"\n                            </span>\n                          ))}\n                          {intent.training_phrases.length > 5 && (\n                            <span className=\"px-2 py-1 bg-gray-700 text-gray-400 text-sm rounded\">\n                              +{intent.training_phrases.length - 5} more\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-4 text-sm\">\n                        <span className=\"text-gray-500\">Action:</span>\n                        <span className={`px-2 py-1 rounded text-xs ${\n                          intent.action_type === 'api' ? 'bg-[#39FF14]/20 text-[#39FF14]' :\n                          intent.action_type === 'text' ? 'bg-[#39FF14]/20 text-[#39FF14]' :\n                          'bg-gray-500/20 text-gray-400'\n                        }`}>\n                          {intent.action_type}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'entities' && (\n            <div>\n              <div className=\"mb-4 flex justify-between items-center\">\n                <h2 className=\"text-xl font-bold text-white\">Entity Management</h2>\n                <button\n                  onClick={() => {\n                    setEditingEntityId(null);\n                    resetEntityForm();\n                    setShowNewEntityModal(true);\n                  }}\n                  className=\"bg-[#39FF14] text-black px-4 py-2 rounded-lg font-semibold hover:bg-[#32e012] transition-colors flex items-center gap-2\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  New Entity\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {entities.map((entity) => (\n                  <div key={entity.id} className=\"bg-gray-800 rounded-lg p-4\">\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <h3 className=\"text-lg font-bold text-white\">{entity.entity_display_name}</h3>\n                          <span className={`px-2 py-1 text-xs rounded ${\n                            entity.entity_type === 'system' ? 'bg-[#39FF14]/20 text-[#39FF14]' :\n                            entity.entity_type === 'regex' ? 'bg-[#39FF14]/20 text-[#39FF14]' :\n                            entity.entity_type === 'list' ? 'bg-green-500/20 text-green-400' :\n                            'bg-gray-500/20 text-gray-400'\n                          }`}>\n                            {entity.entity_type}\n                          </span>\n                          <span className={`px-2 py-1 text-xs rounded ${\n                            entity.is_active ? 'bg-green-500/20 text-green-400' : 'bg-gray-500/20 text-gray-400'\n                          }`}>\n                            {entity.is_active ? 'Active' : 'Inactive'}\n                          </span>\n                        </div>\n                        <p className=\"text-gray-500 text-sm font-mono\">@{entity.entity_name}</p>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => editEntity(entity)}\n                          className=\"text-[#39FF14] hover:text-[#39FF14] p-2 hover:bg-[#39FF14]/20 rounded transition-colors\"\n                          title=\"Edit Entity\"\n                        >\n                          <Edit2 className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                          onClick={() => deleteEntity(entity.id)}\n                          className=\"text-red-400 hover:text-red-300 p-2 hover:bg-red-600/20 rounded transition-colors\"\n                          title=\"Delete Entity\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    </div>\n                    {entity.regex_pattern && (\n                      <div className=\"mt-2 p-2 bg-gray-700 rounded\">\n                        <span className=\"text-xs text-gray-400\">Pattern:</span>\n                        <code className=\"text-xs text-green-400 font-mono block mt-1\">{entity.regex_pattern}</code>\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'chat' && (\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              <div className=\"lg:col-span-2 bg-gray-800 rounded-lg p-4\">\n                <div className=\"flex justify-between items-center mb-4\">\n                  <div>\n                    <h2 className=\"text-xl font-bold text-white\">Chat Interface</h2>\n                    <p className=\"text-gray-400 text-sm\">Test your chatbot with real LLM integration</p>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => {\n                        setTestConversation([]);\n                        setTestSessionId('');\n                      }}\n                      className=\"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors\"\n                    >\n                      Clear Chat\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"mb-4 flex gap-2 items-center bg-gray-700 p-3 rounded-lg\">\n                  <span className=\"text-sm text-gray-300 font-medium\">LLM Provider:</span>\n                  <button\n                    onClick={() => setSelectedLLMProvider('openai')}\n                    className={`px-4 py-1.5 rounded-lg text-sm font-semibold transition-colors ${\n                      selectedLLMProvider === 'openai'\n                        ? 'bg-[#39FF14] text-black font-semibold'\n                        : 'bg-gray-600 text-gray-300 hover:bg-gray-500'\n                    }`}\n                  >\n                    OpenAI\n                  </button>\n                  <button\n                    onClick={() => setSelectedLLMProvider('gemini')}\n                    className={`px-4 py-1.5 rounded-lg text-sm font-semibold transition-colors ${\n                      selectedLLMProvider === 'gemini'\n                        ? 'bg-[#39FF14] text-black font-semibold'\n                        : 'bg-gray-600 text-gray-300 hover:bg-gray-500'\n                    }`}\n                  >\n                    Google Gemini\n                  </button>\n                  {testSessionId && (\n                    <div className=\"ml-auto flex items-center gap-2 text-xs\">\n                      <span className=\"text-gray-400\">Session:</span>\n                      <span className=\"text-gray-300 font-mono\">{testSessionId.substring(0, 8)}...</span>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"bg-gray-900 rounded-lg h-96 overflow-y-auto p-4 mb-4\">\n                  {testConversation.length === 0 ? (\n                    <div className=\"flex items-center justify-center h-full text-gray-500\">\n                      <div className=\"text-center\">\n                        <MessageCircle className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                        <p className=\"mb-2\">Start a conversation to test your bot</p>\n                        <p className=\"text-xs text-gray-600\">Using {selectedLLMProvider === 'openai' ? 'OpenAI GPT' : 'Google Gemini'}</p>\n                      </div>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {testConversation.map((msg, idx) => (\n                        <div key={idx} className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'}`}>\n                          <div className={`max-w-[80%] rounded-lg p-3 ${\n                            msg.type === 'user'\n                              ? 'bg-[#39FF14] text-black font-semibold'\n                              : msg.isError\n                                ? 'bg-red-900/50 text-red-200 border border-red-700'\n                                : 'bg-gray-700 text-gray-200'\n                          }`}>\n                            <p className=\"text-sm whitespace-pre-wrap\">{msg.text}</p>\n                            {msg.type === 'bot' && !msg.isError && (\n                              <div className=\"mt-2 pt-2 border-t border-gray-600 space-y-1\">\n                                {msg.intent && (\n                                  <div className=\"text-xs opacity-75\">\n                                    <span className=\"font-semibold\">Intent:</span> {msg.intent} ({(msg.confidence * 100).toFixed(1)}%)\n                                  </div>\n                                )}\n                                {msg.provider && (\n                                  <div className=\"text-xs opacity-75\">\n                                    <span className=\"font-semibold\">Model:</span> {msg.provider}/{msg.model}\n                                  </div>\n                                )}\n                                {msg.kb_used && (\n                                  <div className=\"text-xs text-green-400\">\n                                    <Check className=\"w-3 h-3 inline mr-1\" />\n                                    Knowledge Base Used ({msg.metadata?.kb_matches || 0} matches)\n                                  </div>\n                                )}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                      {isSendingMessage && (\n                        <div className=\"flex justify-start\">\n                          <div className=\"bg-gray-700 text-gray-200 rounded-lg p-3\">\n                            <div className=\"flex items-center gap-2\">\n                              <Loader className=\"w-4 h-4 animate-spin\" />\n                              <span className=\"text-sm\">Thinking...</span>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"text\"\n                    value={testMessage}\n                    onChange={(e) => setTestMessage(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && !e.shiftKey && handleTestMessage()}\n                    placeholder=\"Type your message here...\"\n                    disabled={isSendingMessage}\n                    className=\"flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14] disabled:opacity-50\"\n                  />\n                  <button\n                    onClick={handleTestMessage}\n                    disabled={isSendingMessage || !testMessage.trim()}\n                    className=\"bg-[#39FF14] text-black px-6 py-2 rounded-lg font-semibold hover:bg-[#32e012] transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    {isSendingMessage ? 'Sending...' : 'Send'}\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-800 rounded-lg p-4\">\n                <h3 className=\"text-lg font-bold text-white mb-4\">Debug Info</h3>\n                <div className=\"bg-gray-900 rounded-lg p-4 h-[500px] overflow-y-auto\">\n                  <div className=\"space-y-3 text-xs\">\n                    <div>\n                      <div className=\"text-gray-400 font-semibold mb-1\">Configuration</div>\n                      <div className=\"bg-gray-800 p-2 rounded\">\n                        <div className=\"text-gray-300\">Bot ID: <span className=\"text-[#39FF14] font-mono\">{selectedBot}</span></div>\n                        <div className=\"text-gray-300\">Session ID: <span className=\"text-[#39FF14] font-mono\">{testSessionId || 'Not started'}</span></div>\n                        <div className=\"text-gray-300\">LLM Provider: <span className=\"text-[#39FF14]\">{selectedLLMProvider}</span></div>\n                        <div className=\"text-gray-300\">Messages: <span className=\"text-[#39FF14]\">{testConversation.length}</span></div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <div className=\"text-gray-400 font-semibold mb-1\">Last Response Metadata</div>\n                      <div className=\"bg-gray-800 p-2 rounded\">\n                        {testConversation.length > 0 && testConversation[testConversation.length - 1].type === 'bot' ? (\n                          <pre className=\"text-gray-300 font-mono whitespace-pre-wrap\">\n                            {JSON.stringify(testConversation[testConversation.length - 1], null, 2)}\n                          </pre>\n                        ) : (\n                          <div className=\"text-gray-500\">No bot response yet</div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'logs' && (\n            <div>\n              <h2 className=\"text-xl font-bold text-white mb-4\">Conversation Logs</h2>\n              <div className=\"bg-gray-800 rounded-lg overflow-hidden\">\n                <table className=\"w-full\">\n                  <thead className=\"bg-gray-700\">\n                    <tr>\n                      <th className=\"px-4 py-3 text-left text-sm font-semibold text-gray-300\">Session ID</th>\n                      <th className=\"px-4 py-3 text-left text-sm font-semibold text-gray-300\">User</th>\n                      <th className=\"px-4 py-3 text-left text-sm font-semibold text-gray-300\">Channel</th>\n                      <th className=\"px-4 py-3 text-left text-sm font-semibold text-gray-300\">Messages</th>\n                      <th className=\"px-4 py-3 text-left text-sm font-semibold text-gray-300\">Status</th>\n                      <th className=\"px-4 py-3 text-left text-sm font-semibold text-gray-300\">Started</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {conversations.map((conv) => (\n                      <tr\n                        key={conv.id}\n                        onClick={() => loadConversationMessages(conv.id)}\n                        className=\"border-t border-gray-700 hover:bg-gray-700 cursor-pointer transition-colors\"\n                      >\n                        <td className=\"px-4 py-3 text-sm text-gray-300 font-mono\">{conv.session_id.substring(0, 12)}...</td>\n                        <td className=\"px-4 py-3 text-sm text-gray-300\">{conv.user_id}</td>\n                        <td className=\"px-4 py-3 text-sm\">\n                          <span className=\"px-2 py-1 bg-[#39FF14]/20/20 text-[#39FF14] text-xs rounded\">{conv.channel}</span>\n                        </td>\n                        <td className=\"px-4 py-3 text-sm text-gray-300\">{conv.message_count}</td>\n                        <td className=\"px-4 py-3 text-sm\">\n                          <span className={`px-2 py-1 text-xs rounded ${\n                            conv.status === 'completed' ? 'bg-green-500/20 text-green-400' :\n                            conv.status === 'active' ? 'bg-[#39FF14]/20 text-[#39FF14]' :\n                            'bg-gray-500/20 text-gray-400'\n                          }`}>\n                            {conv.status}\n                          </span>\n                        </td>\n                        <td className=\"px-4 py-3 text-sm text-gray-400\">{new Date(conv.started_at).toLocaleString()}</td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'ml-settings' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h2 className=\"text-2xl font-bold text-white\">ML & NLU Configuration</h2>\n                <button\n                  onClick={() => {\n                    setEditingMLConfigId(null);\n                    resetMLConfigForm();\n                    setShowNewMLConfigModal(true);\n                  }}\n                  className=\"bg-[#39FF14] text-black px-4 py-2 rounded-lg font-semibold hover:bg-[#32e012] transition-colors flex items-center gap-2\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  New ML Config\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-4\">\n                {mlConfigs.map((config) => (\n                  <div key={config.id} className=\"bg-gray-800 rounded-lg p-6\">\n                    <div className=\"flex justify-between items-start mb-4\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <h3 className=\"text-lg font-bold text-white\">{config.config_name}</h3>\n                          <span className={`px-2 py-1 text-xs rounded ${\n                            config.is_active ? 'bg-green-500/20 text-green-400' : 'bg-gray-500/20 text-gray-400'\n                          }`}>\n                            {config.is_active ? 'Active' : 'Inactive'}\n                          </span>\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => editMLConfig(config)}\n                          className=\"text-[#39FF14] hover:text-[#39FF14] p-2 hover:bg-[#39FF14]/20 rounded transition-colors\"\n                        >\n                          <Edit2 className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                          onClick={() => deleteMLConfig(config.id)}\n                          className=\"text-red-400 hover:text-red-300 p-2 hover:bg-red-600/20 rounded transition-colors\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    </div>\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                      <div>\n                        <span className=\"text-gray-500\">NLU Engine:</span>\n                        <p className=\"text-white font-medium\">{config.nlu_engine}</p>\n                      </div>\n                      <div>\n                        <span className=\"text-gray-500\">LLM Provider:</span>\n                        <p className=\"text-white font-medium\">{config.llm_provider}</p>\n                      </div>\n                      <div>\n                        <span className=\"text-gray-500\">Model:</span>\n                        <p className=\"text-white font-medium\">{config.llm_model}</p>\n                      </div>\n                      <div>\n                        <span className=\"text-gray-500\">Confidence:</span>\n                        <p className=\"text-white font-medium\">{(config.confidence_threshold * 100).toFixed(0)}%</p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              <div className=\"bg-gray-800 rounded-lg p-6\">\n                <h2 className=\"text-xl font-bold text-white mb-4 flex items-center gap-2\">\n                  <Zap className=\"w-5 h-5 text-yellow-500\" />\n                  Training Status\n                </h2>\n                <div className=\"space-y-4\">\n                  <div className=\"p-4 bg-gray-700 rounded-lg\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div>\n                        <h4 className=\"text-white font-semibold flex items-center gap-2\">\n                          Intent Classifier\n                          {trainingStatus.intent_classifier.status === 'training' && (\n                            <div className=\"w-4 h-4 border-2 border-[#39FF14] border-t-transparent rounded-full animate-spin\"></div>\n                          )}\n                          {trainingStatus.intent_classifier.status === 'completed' && (\n                            <Check className=\"w-4 h-4 text-green-500\" />\n                          )}\n                        </h4>\n                        <p className=\"text-gray-400 text-sm\">\n                          {trainingStatus.intent_classifier.last_trained\n                            ? `Last trained: ${new Date(trainingStatus.intent_classifier.last_trained).toLocaleString()}`\n                            : 'Never trained'}\n                        </p>\n                      </div>\n                      <button\n                        onClick={() => startTraining('intent_classifier')}\n                        disabled={trainingStatus.intent_classifier.status === 'training'}\n                        className=\"bg-[#39FF14] text-black px-4 py-2 rounded-lg hover:bg-[#32e012] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                      >\n                        <Play className=\"w-4 h-4\" />\n                        Train Now\n                      </button>\n                    </div>\n                    {trainingStatus.intent_classifier.status === 'training' && (\n                      <div className=\"mt-3\">\n                        <div className=\"w-full bg-gray-600 rounded-full h-2\">\n                          <div\n                            className=\"bg-[#39FF14] h-2 rounded-full transition-all duration-300\"\n                            style={{ width: `${trainingStatus.intent_classifier.progress}%` }}\n                          ></div>\n                        </div>\n                        <p className=\"text-sm text-gray-400 mt-2\">Training in progress... {trainingStatus.intent_classifier.progress}%</p>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"p-4 bg-gray-700 rounded-lg\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div>\n                        <h4 className=\"text-white font-semibold flex items-center gap-2\">\n                          Entity Extractor\n                          {trainingStatus.entity_extractor.status === 'training' && (\n                            <div className=\"w-4 h-4 border-2 border-[#39FF14] border-t-transparent rounded-full animate-spin\"></div>\n                          )}\n                          {trainingStatus.entity_extractor.status === 'completed' && (\n                            <Check className=\"w-4 h-4 text-green-500\" />\n                          )}\n                        </h4>\n                        <p className=\"text-gray-400 text-sm\">\n                          {trainingStatus.entity_extractor.last_trained\n                            ? `Last trained: ${new Date(trainingStatus.entity_extractor.last_trained).toLocaleString()}`\n                            : 'Never trained'}\n                        </p>\n                      </div>\n                      <button\n                        onClick={() => startTraining('entity_extractor')}\n                        disabled={trainingStatus.entity_extractor.status === 'training'}\n                        className=\"bg-[#39FF14] text-black px-4 py-2 rounded-lg hover:bg-[#32e012] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                      >\n                        <Play className=\"w-4 h-4\" />\n                        Train Now\n                      </button>\n                    </div>\n                    {trainingStatus.entity_extractor.status === 'training' && (\n                      <div className=\"mt-3\">\n                        <div className=\"w-full bg-gray-600 rounded-full h-2\">\n                          <div\n                            className=\"bg-[#39FF14] h-2 rounded-full transition-all duration-300\"\n                            style={{ width: `${trainingStatus.entity_extractor.progress}%` }}\n                          ></div>\n                        </div>\n                        <p className=\"text-sm text-gray-400 mt-2\">Training in progress... {trainingStatus.entity_extractor.progress}%</p>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"mt-6 bg-[#39FF14]/10 border border-[#39FF14]/30 rounded-lg p-4\">\n                  <div className=\"flex gap-3\">\n                    <AlertCircle className=\"w-5 h-5 text-[#39FF14] flex-shrink-0 mt-0.5\" />\n                    <div className=\"text-sm text-gray-300\">\n                      <p className=\"font-semibold text-[#39FF14] mb-1\">Training Information</p>\n                      <p>Training uses your configured intents and entities to improve the NLU model. The process typically takes 3-5 seconds and includes data validation, feature extraction, and model optimization.</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'knowledge-base' && (\n            <div>\n              <div className=\"mb-4 flex justify-between items-center\">\n                <h2 className=\"text-xl font-bold text-white\">Knowledge Base & FAQ</h2>\n                <button\n                  onClick={() => setShowNewKBModal(true)}\n                  className=\"bg-[#39FF14] text-black px-4 py-2 rounded-lg font-semibold hover:bg-[#32e012] transition-colors flex items-center gap-2\"\n                >\n                  <Plus className=\"w-4 h-4\" />\n                  Add Article\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 gap-4\">\n                {knowledgeBase.map((item) => (\n                  <div key={item.id} className=\"bg-gray-800 rounded-lg p-4\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <h3 className=\"text-lg font-bold text-white\">{item.title}</h3>\n                          <span className={`px-2 py-1 text-xs rounded ${\n                            item.content_type === 'faq' ? 'bg-[#39FF14]/20 text-[#39FF14]' :\n                            item.content_type === 'article' ? 'bg-[#39FF14]/20 text-[#39FF14]' :\n                            'bg-gray-500/20 text-gray-400'\n                          }`}>\n                            {item.content_type}\n                          </span>\n                          {item.category && (\n                            <span className=\"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded\">{item.category}</span>\n                          )}\n                        </div>\n                        <p className=\"text-gray-400 text-sm line-clamp-2\">{item.content}</p>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => editKnowledgeBase(item)}\n                          className=\"text-[#39FF14] hover:text-[#39FF14] p-2\"\n                        >\n                          <Edit2 className=\"w-4 h-4\" />\n                        </button>\n                        <button\n                          onClick={() => deleteKnowledgeBase(item.id)}\n                          className=\"text-red-400 hover:text-red-300 p-2\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    </div>\n                    {item.tags && item.tags.length > 0 && (\n                      <div className=\"flex flex-wrap gap-2 mt-2\">\n                        {item.tags.map((tag, idx) => (\n                          <span key={idx} className=\"px-2 py-1 bg-gray-700 text-gray-300 text-xs rounded\">\n                            #{tag}\n                          </span>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'integrations' && selectedBot && (\n            <ChatbotIntegrations botId={selectedBot} />\n          )}\n        </>\n      )}\n\n      {showNewIntentModal && (\n        <div className=\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n          <div className=\"bg-gray-900 rounded-2xl shadow-2xl max-w-3xl w-full p-6 relative border border-gray-700 my-8\">\n            <button\n              onClick={() => {\n                setShowNewIntentModal(false);\n                setEditingIntentId(null);\n                resetIntentForm();\n              }}\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n\n            <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-2\">\n              <MessageSquare className=\"w-6 h-6 text-[#39FF14]\" />\n              {editingIntentId ? 'Edit Intent' : 'Create New Intent'}\n            </h2>\n\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Intent Name *</label>\n                  <input\n                    type=\"text\"\n                    value={intentForm.intent_name}\n                    onChange={(e) => setIntentForm({ ...intentForm, intent_name: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                    placeholder=\"greeting\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">Lowercase, no spaces (e.g., order_status)</p>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Display Name *</label>\n                  <input\n                    type=\"text\"\n                    value={intentForm.intent_display_name}\n                    onChange={(e) => setIntentForm({ ...intentForm, intent_display_name: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                    placeholder=\"Greeting\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Description</label>\n                <textarea\n                  value={intentForm.intent_description}\n                  onChange={(e) => setIntentForm({ ...intentForm, intent_description: e.target.value })}\n                  className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14] h-20\"\n                  placeholder=\"Describe what this intent represents...\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Training Phrases</label>\n                <div className=\"flex gap-2 mb-3\">\n                  <input\n                    type=\"text\"\n                    value={currentPhrase}\n                    onChange={(e) => setCurrentPhrase(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addTrainingPhrase())}\n                    className=\"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                    placeholder=\"Enter a training phrase and press Enter\"\n                  />\n                  <button\n                    onClick={addTrainingPhrase}\n                    className=\"bg-[#39FF14] text-black px-4 py-2 rounded-lg hover:bg-[#32e012] transition-colors\"\n                  >\n                    <Plus className=\"w-5 h-5\" />\n                  </button>\n                </div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {intentForm.training_phrases.map((phrase, idx) => (\n                    <div key={idx} className=\"flex items-center gap-2 bg-gray-800 px-3 py-1.5 rounded-lg\">\n                      <span className=\"text-white text-sm\">{phrase}</span>\n                      <button\n                        onClick={() => removeTrainingPhrase(idx)}\n                        className=\"text-red-400 hover:text-red-300\"\n                      >\n                        <X className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n                <p className=\"text-xs text-gray-500 mt-2\">\n                  Add at least 5 training phrases for better accuracy\n                </p>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Action Type</label>\n                  <select\n                    value={intentForm.action_type}\n                    onChange={(e) => setIntentForm({ ...intentForm, action_type: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  >\n                    <option value=\"text\">Text Response</option>\n                    <option value=\"api\">API Call</option>\n                    <option value=\"webhook\">Webhook</option>\n                    <option value=\"knowledge_base\">Knowledge Base</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Priority</label>\n                  <input\n                    type=\"number\"\n                    value={intentForm.priority}\n                    onChange={(e) => setIntentForm({ ...intentForm, priority: parseInt(e.target.value) })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                    min=\"1\"\n                    max=\"10\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Status</label>\n                  <div className=\"flex items-center gap-3 h-10\">\n                    <input\n                      type=\"checkbox\"\n                      checked={intentForm.is_active}\n                      onChange={(e) => setIntentForm({ ...intentForm, is_active: e.target.checked })}\n                      className=\"w-5 h-5 rounded border-gray-700 bg-gray-800\"\n                    />\n                    <span className=\"text-white\">Active</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 pt-4 border-t border-gray-700\">\n                <button\n                  onClick={() => {\n                    setShowNewIntentModal(false);\n                    setEditingIntentId(null);\n                    resetIntentForm();\n                  }}\n                  className=\"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg transition-colors font-semibold\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveIntent}\n                  disabled={!intentForm.intent_name || !intentForm.intent_display_name}\n                  className=\"flex-1 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black py-3 rounded-lg transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {editingIntentId ? 'Update Intent' : 'Create Intent'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showNewEntityModal && (\n        <div className=\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n          <div className=\"bg-gray-900 rounded-2xl shadow-2xl max-w-3xl w-full p-6 relative border border-gray-700 my-8\">\n            <button\n              onClick={() => {\n                setShowNewEntityModal(false);\n                setEditingEntityId(null);\n                resetEntityForm();\n              }}\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n\n            <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-2\">\n              <Tag className=\"w-6 h-6 text-[#39FF14]\" />\n              {editingEntityId ? 'Edit Entity' : 'Create New Entity'}\n            </h2>\n\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Entity Name *</label>\n                  <input\n                    type=\"text\"\n                    value={entityForm.entity_name}\n                    onChange={(e) => setEntityForm({ ...entityForm, entity_name: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                    placeholder=\"product_name\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">Lowercase, no spaces (e.g., product_type)</p>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Display Name *</label>\n                  <input\n                    type=\"text\"\n                    value={entityForm.entity_display_name}\n                    onChange={(e) => setEntityForm({ ...entityForm, entity_display_name: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                    placeholder=\"Product Name\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Entity Type</label>\n                <select\n                  value={entityForm.entity_type}\n                  onChange={(e) => setEntityForm({ ...entityForm, entity_type: e.target.value })}\n                  className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                >\n                  <option value=\"list\">List - Predefined values with synonyms</option>\n                  <option value=\"regex\">Regex - Pattern matching</option>\n                  <option value=\"system\">System - Built-in (date, time, number, etc.)</option>\n                </select>\n              </div>\n\n              {entityForm.entity_type === 'list' && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Entity Values</label>\n                  <div className=\"space-y-3 mb-3\">\n                    <input\n                      type=\"text\"\n                      value={currentEntityValue}\n                      onChange={(e) => setCurrentEntityValue(e.target.value)}\n                      className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                      placeholder=\"Enter value (e.g., laptop)\"\n                    />\n                    <input\n                      type=\"text\"\n                      value={currentEntitySynonyms}\n                      onChange={(e) => setCurrentEntitySynonyms(e.target.value)}\n                      className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                      placeholder=\"Enter synonyms separated by commas (e.g., notebook, computer)\"\n                    />\n                    <button\n                      onClick={addEntityValue}\n                      className=\"w-full bg-[#39FF14] text-black px-4 py-2 rounded-lg hover:bg-[#32e012] transition-colors flex items-center justify-center gap-2\"\n                    >\n                      <Plus className=\"w-5 h-5\" />\n                      Add Value\n                    </button>\n                  </div>\n                  <div className=\"space-y-2\">\n                    {entityForm.values.map((val, idx) => (\n                      <div key={idx} className=\"bg-gray-800 p-3 rounded-lg flex justify-between items-start\">\n                        <div>\n                          <div className=\"text-white font-semibold\">{val.value}</div>\n                          {val.synonyms && val.synonyms.length > 0 && (\n                            <div className=\"text-sm text-gray-400 mt-1\">\n                              Synonyms: {val.synonyms.join(', ')}\n                            </div>\n                          )}\n                        </div>\n                        <button\n                          onClick={() => removeEntityValue(idx)}\n                          className=\"text-red-400 hover:text-red-300\"\n                        >\n                          <X className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {entityForm.entity_type === 'regex' && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Regex Pattern</label>\n                  <input\n                    type=\"text\"\n                    value={entityForm.regex_pattern}\n                    onChange={(e) => setEntityForm({ ...entityForm, regex_pattern: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14] font-mono text-sm\"\n                    placeholder=\"^[A-Z]{2}\\d{6}$\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    Enter a valid regular expression pattern\n                  </p>\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Status</label>\n                <div className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={entityForm.is_active}\n                    onChange={(e) => setEntityForm({ ...entityForm, is_active: e.target.checked })}\n                    className=\"w-5 h-5 rounded border-gray-700 bg-gray-800\"\n                  />\n                  <span className=\"text-white\">Active</span>\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 pt-4 border-t border-gray-700\">\n                <button\n                  onClick={() => {\n                    setShowNewEntityModal(false);\n                    setEditingEntityId(null);\n                    resetEntityForm();\n                  }}\n                  className=\"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg transition-colors font-semibold\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveEntity}\n                  disabled={!entityForm.entity_name || !entityForm.entity_display_name}\n                  className=\"flex-1 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black py-3 rounded-lg transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {editingEntityId ? 'Update Entity' : 'Create Entity'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showNewMLConfigModal && (\n        <div className=\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n          <div className=\"bg-gray-900 rounded-2xl shadow-2xl max-w-3xl w-full p-6 relative border border-gray-700 my-8\">\n            <button\n              onClick={() => {\n                setShowNewMLConfigModal(false);\n                setEditingMLConfigId(null);\n                resetMLConfigForm();\n              }}\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n\n            <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-2\">\n              <Brain className=\"w-6 h-6 text-[#39FF14]\" />\n              {editingMLConfigId ? 'Edit ML Configuration' : 'Create ML Configuration'}\n            </h2>\n\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Configuration Name *</label>\n                <input\n                  type=\"text\"\n                  value={mlConfigForm.config_name}\n                  onChange={(e) => setMlConfigForm({ ...mlConfigForm, config_name: e.target.value })}\n                  className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  placeholder=\"Production Config\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">NLU Engine</label>\n                  <select\n                    value={mlConfigForm.nlu_engine}\n                    onChange={(e) => setMlConfigForm({ ...mlConfigForm, nlu_engine: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  >\n                    <option value=\"spacy\">Spacy (Word Embeddings)</option>\n                    <option value=\"llm\">LLM (Zero-shot)</option>\n                    <option value=\"hybrid\">Hybrid (Spacy + LLM)</option>\n                    <option value=\"rasa\">Rasa NLU</option>\n                    <option value=\"dialogflow\">Dialogflow</option>\n                    <option value=\"luis\">Microsoft LUIS</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">LLM Provider</label>\n                  <select\n                    value={mlConfigForm.llm_provider}\n                    onChange={(e) => setMlConfigForm({ ...mlConfigForm, llm_provider: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  >\n                    <option value=\"openai\">OpenAI</option>\n                    <option value=\"gemini\">Google Gemini</option>\n                    <option value=\"anthropic\">Anthropic (Claude)</option>\n                    <option value=\"azure\">Azure OpenAI</option>\n                    <option value=\"cohere\">Cohere</option>\n                    <option value=\"huggingface\">HuggingFace</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Model</label>\n                  <select\n                    value={mlConfigForm.llm_model}\n                    onChange={(e) => setMlConfigForm({ ...mlConfigForm, llm_model: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  >\n                    {mlConfigForm.llm_provider === 'openai' && (\n                      <>\n                        <option value=\"gpt-4\">GPT-4</option>\n                        <option value=\"gpt-4-turbo\">GPT-4 Turbo</option>\n                        <option value=\"gpt-3.5-turbo\">GPT-3.5 Turbo</option>\n                      </>\n                    )}\n                    {mlConfigForm.llm_provider === 'gemini' && (\n                      <>\n                        <option value=\"gemini-pro\">Gemini Pro</option>\n                        <option value=\"gemini-pro-vision\">Gemini Pro Vision</option>\n                        <option value=\"gemini-ultra\">Gemini Ultra</option>\n                      </>\n                    )}\n                    {mlConfigForm.llm_provider === 'anthropic' && (\n                      <>\n                        <option value=\"claude-3-opus\">Claude 3 Opus</option>\n                        <option value=\"claude-3-sonnet\">Claude 3 Sonnet</option>\n                        <option value=\"claude-3-haiku\">Claude 3 Haiku</option>\n                      </>\n                    )}\n                    {!['openai', 'gemini', 'anthropic'].includes(mlConfigForm.llm_provider) && (\n                      <option value=\"default\">Default Model</option>\n                    )}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Confidence Threshold</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.05\"\n                    min=\"0\"\n                    max=\"1\"\n                    value={mlConfigForm.confidence_threshold}\n                    onChange={(e) => setMlConfigForm({ ...mlConfigForm, confidence_threshold: parseFloat(e.target.value) })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">0.0 - 1.0 (higher = more strict)</p>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Temperature</label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    min=\"0\"\n                    max=\"2\"\n                    value={mlConfigForm.temperature}\n                    onChange={(e) => setMlConfigForm({ ...mlConfigForm, temperature: parseFloat(e.target.value) })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">0.0 = deterministic, 2.0 = creative</p>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Max Tokens</label>\n                  <input\n                    type=\"number\"\n                    step=\"50\"\n                    min=\"50\"\n                    max=\"4000\"\n                    value={mlConfigForm.max_tokens}\n                    onChange={(e) => setMlConfigForm({ ...mlConfigForm, max_tokens: parseInt(e.target.value) })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">Maximum response length</p>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Status</label>\n                <div className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={mlConfigForm.is_active}\n                    onChange={(e) => setMlConfigForm({ ...mlConfigForm, is_active: e.target.checked })}\n                    className=\"w-5 h-5 rounded border-gray-700 bg-gray-800\"\n                  />\n                  <span className=\"text-white\">Active Configuration</span>\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 pt-4 border-t border-gray-700\">\n                <button\n                  onClick={() => {\n                    setShowNewMLConfigModal(false);\n                    setEditingMLConfigId(null);\n                    resetMLConfigForm();\n                  }}\n                  className=\"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg transition-colors font-semibold\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveMLConfig}\n                  disabled={!mlConfigForm.config_name}\n                  className=\"flex-1 bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black py-3 rounded-lg transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  {editingMLConfigId ? 'Update Configuration' : 'Create Configuration'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showConversationModal && (\n        <div className=\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n          <div className=\"bg-gray-900 rounded-2xl shadow-2xl max-w-4xl w-full p-6 relative border border-gray-700 my-8\">\n            <button\n              onClick={() => {\n                setShowConversationModal(false);\n                setSelectedConversation(null);\n                setConversationMessages([]);\n              }}\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n\n            <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-2\">\n              <MessageCircle className=\"w-6 h-6 text-[#39FF14]\" />\n              Conversation Details\n            </h2>\n\n            <div className=\"space-y-4\">\n              <div className=\"bg-gray-800 rounded-lg p-4\">\n                <h3 className=\"text-sm font-medium text-gray-400 mb-2\">Session Information</h3>\n                <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                  <div>\n                    <span className=\"text-gray-500\">Session ID:</span>\n                    <p className=\"text-white font-mono\">{selectedConversation}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-500\">Total Messages:</span>\n                    <p className=\"text-white\">{conversationMessages.length}</p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-800 rounded-lg p-4 max-h-[600px] overflow-y-auto\">\n                <h3 className=\"text-sm font-medium text-gray-400 mb-4\">Message History</h3>\n                <div className=\"space-y-4\">\n                  {conversationMessages.map((msg, idx) => (\n                    <div key={msg.id} className={`flex ${msg.message_type === 'user' ? 'justify-end' : 'justify-start'}`}>\n                      <div className={`max-w-[80%] rounded-lg p-4 ${\n                        msg.message_type === 'user' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-700 text-gray-200'\n                      }`}>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"text-xs font-semibold opacity-75\">\n                            {msg.message_type === 'user' ? 'User' : 'Bot'}\n                          </span>\n                          <span className=\"text-xs opacity-60\">\n                            {new Date(msg.created_at).toLocaleTimeString()}\n                          </span>\n                        </div>\n                        <p className=\"text-sm whitespace-pre-wrap\">{msg.message_text}</p>\n                        {msg.detected_intent && (\n                          <div className=\"mt-3 pt-3 border-t border-gray-600 text-xs\">\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"opacity-75\">Intent: {msg.detected_intent}</span>\n                              {msg.intent_confidence && (\n                                <span className=\"opacity-75\">\n                                  Confidence: {(msg.intent_confidence * 100).toFixed(0)}%\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"flex justify-end\">\n                <button\n                  onClick={() => {\n                    setShowConversationModal(false);\n                    setSelectedConversation(null);\n                    setConversationMessages([]);\n                  }}\n                  className=\"bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors font-semibold\"\n                >\n                  Close\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showNewKBModal && (\n        <div className=\"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto\">\n          <div className=\"bg-gray-900 rounded-2xl shadow-2xl max-w-4xl w-full p-6 relative border border-gray-700 my-8\">\n            <button\n              onClick={() => {\n                setShowNewKBModal(false);\n                setEditingKBId(null);\n                resetKBForm();\n              }}\n              className=\"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n\n            <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-2\">\n              <BookOpen className=\"w-6 h-6 text-[#39FF14]\" />\n              {editingKBId ? 'Edit Article' : 'Add New Article'}\n            </h2>\n\n            <div className=\"space-y-6\">\n              <div className=\"flex gap-2 bg-gray-800 p-4 rounded-lg border border-gray-700\">\n                <button\n                  onClick={() => setKbForm({ ...kbForm, source_type: 'manual' })}\n                  className={`flex-1 py-3 px-4 rounded-lg transition-colors font-semibold flex items-center justify-center gap-2 ${\n                    kbForm.source_type === 'manual' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                  }`}\n                >\n                  <Edit2 className=\"w-4 h-4\" />\n                  Manual Entry\n                </button>\n                <button\n                  onClick={() => setKbForm({ ...kbForm, source_type: 'upload' })}\n                  className={`flex-1 py-3 px-4 rounded-lg transition-colors font-semibold flex items-center justify-center gap-2 ${\n                    kbForm.source_type === 'upload' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                  }`}\n                >\n                  <Upload className=\"w-4 h-4\" />\n                  Upload Document\n                </button>\n                <button\n                  onClick={() => setKbForm({ ...kbForm, source_type: 'url' })}\n                  className={`flex-1 py-3 px-4 rounded-lg transition-colors font-semibold flex items-center justify-center gap-2 ${\n                    kbForm.source_type === 'url' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                  }`}\n                >\n                  <Link className=\"w-4 h-4\" />\n                  Import from URL\n                </button>\n                <button\n                  onClick={() => setKbForm({ ...kbForm, source_type: 'storage' })}\n                  className={`flex-1 py-3 px-4 rounded-lg transition-colors font-semibold flex items-center justify-center gap-2 ${\n                    kbForm.source_type === 'storage' ? 'bg-[#39FF14] text-black font-semibold' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                  }`}\n                >\n                  <Server className=\"w-4 h-4\" />\n                  Storage\n                </button>\n              </div>\n\n              {kbForm.source_type === 'upload' && (\n                <div className=\"bg-gray-800 p-6 rounded-lg border border-gray-700\">\n                  <label className=\"block text-sm font-medium text-gray-300 mb-3\">Upload Document</label>\n                  <div className=\"border-2 border-dashed border-gray-600 rounded-lg p-8 text-center hover:border-[#39FF14] transition-colors cursor-pointer\">\n                    <input\n                      type=\"file\"\n                      accept=\".txt,.md,.csv,.json,.xml,.html\"\n                      onChange={(e) => {\n                        const file = e.target.files?.[0];\n                        if (file) {\n                          setKbForm({ ...kbForm, file });\n                          handleFileUpload(file);\n                        }\n                      }}\n                      className=\"hidden\"\n                      id=\"file-upload\"\n                    />\n                    <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n                      <Upload className=\"w-12 h-12 text-gray-500 mx-auto mb-3\" />\n                      <p className=\"text-white font-semibold mb-1\">Click to upload or drag and drop</p>\n                      <p className=\"text-gray-400 text-sm\">Supported: TXT, MD, CSV, JSON, XML, HTML</p>\n                    </label>\n                  </div>\n                  {isProcessing && (\n                    <div className=\"mt-4\">\n                      <div className=\"flex items-center gap-2 text-[#39FF14] mb-2\">\n                        <Loader className=\"w-4 h-4 animate-spin\" />\n                        <span className=\"text-sm\">Processing file... {Math.round(uploadProgress)}%</span>\n                      </div>\n                      <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                        <div\n                          className=\"bg-[#39FF14] h-2 rounded-full transition-all duration-300\"\n                          style={{ width: `${uploadProgress}%` }}\n                        ></div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {kbForm.source_type === 'url' && (\n                <div className=\"bg-gray-800 p-6 rounded-lg border border-gray-700\">\n                  <label className=\"block text-sm font-medium text-gray-300 mb-3\">Import from URL</label>\n                  <div className=\"flex gap-2\">\n                    <input\n                      type=\"url\"\n                      value={kbForm.url}\n                      onChange={(e) => setKbForm({ ...kbForm, url: e.target.value })}\n                      placeholder=\"https://example.com/article\"\n                      className=\"flex-1 bg-gray-900 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-[#39FF14]\"\n                    />\n                    <button\n                      onClick={() => kbForm.url && handleURLIngestion(kbForm.url)}\n                      disabled={!kbForm.url || isProcessing}\n                      className=\"bg-[#39FF14] text-black px-6 py-3 rounded-lg hover:bg-[#32e012] transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold\"\n                    >\n                      {isProcessing ? (\n                        <Loader className=\"w-5 h-5 animate-spin\" />\n                      ) : (\n                        'Import'\n                      )}\n                    </button>\n                  </div>\n                  <p className=\"text-xs text-gray-500 mt-2\">Paste a URL to import content from a webpage</p>\n                </div>\n              )}\n\n              {kbForm.source_type === 'storage' && (\n                <div className=\"bg-gray-800 p-6 rounded-lg border border-gray-700\">\n                  <label className=\"block text-sm font-medium text-gray-300 mb-4\">Connect to Storage</label>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <button className=\"bg-gray-700 hover:bg-gray-600 p-4 rounded-lg transition-colors text-left\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        <Server className=\"w-6 h-6 text-[#39FF14]\" />\n                        <span className=\"text-white font-semibold\">FTP/SFTP</span>\n                      </div>\n                      <p className=\"text-gray-400 text-sm\">Connect to FTP or SFTP server</p>\n                    </button>\n                    <button className=\"bg-gray-700 hover:bg-gray-600 p-4 rounded-lg transition-colors text-left\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        <HardDrive className=\"w-6 h-6 text-green-400\" />\n                        <span className=\"text-white font-semibold\">NAS/SAN</span>\n                      </div>\n                      <p className=\"text-gray-400 text-sm\">Connect to network storage</p>\n                    </button>\n                  </div>\n                  <div className=\"mt-4 bg-[#39FF14]/10 border border-[#39FF14]/30 rounded-lg p-4\">\n                    <p className=\"text-[#39FF14] text-sm\">\n                      Storage integrations require configuration. Contact your administrator to set up storage connections.\n                    </p>\n                  </div>\n                </div>\n              )}\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Title *</label>\n                  <input\n                    type=\"text\"\n                    value={kbForm.title}\n                    onChange={(e) => setKbForm({ ...kbForm, title: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                    placeholder=\"Article title\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-300 mb-2\">Content Type</label>\n                  <select\n                    value={kbForm.content_type}\n                    onChange={(e) => setKbForm({ ...kbForm, content_type: e.target.value })}\n                    className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  >\n                    <option value=\"article\">Article</option>\n                    <option value=\"faq\">FAQ</option>\n                    <option value=\"documentation\">Documentation</option>\n                    <option value=\"guide\">Guide</option>\n                    <option value=\"policy\">Policy</option>\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Category</label>\n                <input\n                  type=\"text\"\n                  value={kbForm.category}\n                  onChange={(e) => setKbForm({ ...kbForm, category: e.target.value })}\n                  className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                  placeholder=\"e.g., Product Info, Troubleshooting, Billing\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Content *</label>\n                <textarea\n                  value={kbForm.content}\n                  onChange={(e) => setKbForm({ ...kbForm, content: e.target.value })}\n                  className=\"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14] h-48 resize-none\"\n                  placeholder=\"Enter the article content...\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">{kbForm.content.length} characters</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">Tags</label>\n                <div className=\"flex gap-2 mb-3\">\n                  <input\n                    type=\"text\"\n                    value={currentTag}\n                    onChange={(e) => setCurrentTag(e.target.value)}\n                    onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), addTag())}\n                    className=\"flex-1 bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-[#39FF14]\"\n                    placeholder=\"Add tag and press Enter\"\n                  />\n                  <button\n                    onClick={addTag}\n                    className=\"bg-[#39FF14] text-black px-4 py-2 rounded-lg hover:bg-[#32e012] transition-colors\"\n                  >\n                    <Plus className=\"w-5 h-5\" />\n                  </button>\n                </div>\n                {kbForm.tags.length > 0 && (\n                  <div className=\"flex flex-wrap gap-2\">\n                    {kbForm.tags.map((tag, idx) => (\n                      <div key={idx} className=\"flex items-center gap-2 bg-gray-800 px-3 py-1.5 rounded-lg\">\n                        <span className=\"text-white text-sm\">#{tag}</span>\n                        <button\n                          onClick={() => removeTag(idx)}\n                          className=\"text-red-400 hover:text-red-300\"\n                        >\n                          <X className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                <input\n                  type=\"checkbox\"\n                  id=\"kb-active\"\n                  checked={kbForm.is_active}\n                  onChange={(e) => setKbForm({ ...kbForm, is_active: e.target.checked })}\n                  className=\"w-5 h-5 rounded bg-gray-800 border-gray-700 text-[#39FF14] focus:ring-[#39FF14]\"\n                />\n                <label htmlFor=\"kb-active\" className=\"text-gray-300 cursor-pointer\">\n                  Make this article active and searchable\n                </label>\n              </div>\n\n              <div className=\"flex justify-end gap-3 pt-4 border-t border-gray-700\">\n                <button\n                  onClick={() => {\n                    setShowNewKBModal(false);\n                    setEditingKBId(null);\n                    resetKBForm();\n                  }}\n                  className=\"bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg transition-colors font-semibold\"\n                >\n                  Cancel\n                </button>\n                <button\n                  onClick={handleSaveKnowledgeBase}\n                  className=\"bg-[#39FF14] hover:bg-[#32e012] text-black px-6 py-3 rounded-lg transition-colors font-semibold flex items-center gap-2\"\n                >\n                  <Save className=\"w-5 h-5\" />\n                  {editingKBId ? 'Update Article' : 'Save Article'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}