{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Voice/IVRCanvas.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport { IVRNode, Connection } from '../../types/ivr';\nimport { useIVR } from '../../contexts/IVRContext';\nimport {\n  Play, Hash, MessageCircle, Phone, GitBranch, Code, Shuffle,\n  Globe, PhoneOff, Circle, ArrowRight, ArrowLeftRight\n} from 'lucide-react';\n\nconst GRID_SIZE = 20;\nconst NODE_WIDTH = 200;\nconst NODE_HEIGHT = 80;\n\ninterface NodeConfig {\n  icon: React.ElementType;\n  color: string;\n  bgColor: string;\n  borderColor: string;\n}\n\nconst NODE_CONFIGS: Record<string, NodeConfig> = {\n  start: {\n    icon: Play,\n    color: 'text-green-400',\n    bgColor: 'bg-green-500/20',\n    borderColor: 'border-green-500/50'\n  },\n  setParams: {\n    icon: Hash,\n    color: 'text-[#39FF14]',\n    bgColor: 'bg-[#39FF14]/20',\n    borderColor: 'border-[#39FF14]/50'\n  },\n  playMessage: {\n    icon: MessageCircle,\n    color: 'text-[#39FF14]',\n    bgColor: 'bg-[#39FF14]/20',\n    borderColor: 'border-[#39FF14]/50'\n  },\n  getDigits: {\n    icon: Hash,\n    color: 'text-[#39FF14]',\n    bgColor: 'bg-[#39FF14]/20',\n    borderColor: 'border-[#39FF14]/50'\n  },\n  playMenu: {\n    icon: Phone,\n    color: 'text-[#39FF14]',\n    bgColor: 'bg-[#39FF14]/20',\n    borderColor: 'border-[#39FF14]/50'\n  },\n  playConfirm: {\n    icon: ArrowLeftRight,\n    color: 'text-yellow-400',\n    bgColor: 'bg-yellow-500/20',\n    borderColor: 'border-yellow-500/50'\n  },\n  runScript: {\n    icon: Code,\n    color: 'text-[#39FF14]',\n    bgColor: 'bg-[#39FF14]/20',\n    borderColor: 'border-[#39FF14]/50'\n  },\n  switch: {\n    icon: Shuffle,\n    color: 'text-[#39FF14]',\n    bgColor: 'bg-[#39FF14]/20',\n    borderColor: 'border-[#39FF14]/20'\n  },\n  callAPI: {\n    icon: Globe,\n    color: 'text-[#39FF14]',\n    bgColor: 'bg-[#39FF14]/20',\n    borderColor: 'border-[#39FF14]/50'\n  },\n  endFlow: {\n    icon: PhoneOff,\n    color: 'text-red-400',\n    bgColor: 'bg-red-500/20',\n    borderColor: 'border-red-500/50'\n  },\n  connector: {\n    icon: Circle,\n    color: 'text-slate-400',\n    bgColor: 'bg-slate-500/20',\n    borderColor: 'border-slate-500/50'\n  },\n  jumperEntry: {\n    icon: ArrowRight,\n    color: 'text-emerald-400',\n    bgColor: 'bg-emerald-500/20',\n    borderColor: 'border-emerald-500/50'\n  },\n  jumperExit: {\n    icon: ArrowRight,\n    color: 'text-[#39FF14]',\n    bgColor: 'bg-[#39FF14]/20',\n    borderColor: 'border-amber-500/50'\n  }\n};\n\ninterface CanvasNodeProps {\n  node: IVRNode;\n  isSelected: boolean;\n  onClick: () => void;\n  onDoubleClick: () => void;\n  hasError: boolean;\n}\n\nfunction CanvasNode({ node, isSelected, onClick, onDoubleClick, hasError }: CanvasNodeProps) {\n  const config = NODE_CONFIGS[node.type] || NODE_CONFIGS.connector;\n  const Icon = config.icon;\n\n  return (\n    <div\n      className={`absolute cursor-pointer transition-all duration-200 ${\n        isSelected ? 'ring-2 ring-white ring-offset-2 ring-offset-slate-900' : ''\n      }`}\n      style={{\n        left: node.position.x,\n        top: node.position.y,\n        width: NODE_WIDTH,\n        height: NODE_HEIGHT\n      }}\n      onClick={onClick}\n      onDoubleClick={onDoubleClick}\n    >\n      <div\n        className={`h-full rounded-xl border-2 backdrop-blur-sm ${config.bgColor} ${\n          hasError ? 'border-red-500' : config.borderColor\n        } ${isSelected ? 'shadow-lg shadow-[#39FF14]/20' : ''} flex items-center gap-3 px-4 relative`}\n      >\n        {/* Node Icon */}\n        <div className={`p-2 rounded-lg ${config.bgColor} ${hasError ? 'text-red-400' : config.color}`}>\n          <Icon className=\"w-5 h-5\" />\n        </div>\n\n        {/* Node Content */}\n        <div className=\"flex-1 min-w-0\">\n          <div className=\"text-white font-semibold text-sm truncate\">{node.name}</div>\n          {node.description && (\n            <div className=\"text-slate-400 text-xs truncate\">{node.description}</div>\n          )}\n        </div>\n\n        {/* Connection Point */}\n        <div className=\"absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-white border-2 border-slate-900\" />\n        <div className=\"absolute -left-2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-white border-2 border-slate-900\" />\n      </div>\n    </div>\n  );\n}\n\ninterface IVRCanvasProps {\n  onNodeDoubleClick?: (node: IVRNode) => void;\n}\n\nexport default function IVRCanvas({ onNodeDoubleClick }: IVRCanvasProps) {\n  const canvasRef = useRef<HTMLDivElement>(null);\n  const {\n    getCurrentPage,\n    selectedNodes,\n    selectNode,\n    clearSelection,\n    viewport,\n    setViewport,\n    validationErrors\n  } = useIVR();\n\n  const [isPanning, setIsPanning] = useState(false);\n  const [panStart, setPanStart] = useState({ x: 0, y: 0 });\n  const [connectionStart, setConnectionStart] = useState<string | null>(null);\n  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });\n\n  const currentPage = getCurrentPage();\n  const nodes = currentPage?.nodes || [];\n  const connections = currentPage?.connections || [];\n\n  // Handle mouse down for panning\n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    if (e.button === 0 && e.target === canvasRef.current) {\n      setIsPanning(true);\n      setPanStart({ x: e.clientX - viewport.x, y: e.clientY - viewport.y });\n      clearSelection();\n    }\n  }, [viewport, clearSelection]);\n\n  // Handle mouse move for panning\n  const handleMouseMove = useCallback((e: React.MouseEvent) => {\n    setMousePos({ x: e.clientX, y: e.clientY });\n\n    if (isPanning) {\n      setViewport({\n        x: e.clientX - panStart.x,\n        y: e.clientY - panStart.y\n      });\n    }\n  }, [isPanning, panStart, setViewport]);\n\n  // Handle mouse up\n  const handleMouseUp = useCallback(() => {\n    setIsPanning(false);\n    setConnectionStart(null);\n  }, []);\n\n  // Handle zoom\n  const handleWheel = useCallback((e: React.WheelEvent) => {\n    e.preventDefault();\n    const delta = e.deltaY > 0 ? 0.9 : 1.1;\n    const newZoom = Math.max(0.25, Math.min(2, viewport.zoom * delta));\n    setViewport({ zoom: newZoom });\n  }, [viewport.zoom, setViewport]);\n\n  // Draw connections\n  const renderConnections = () => {\n    return connections.map(conn => {\n      const fromNode = nodes.find(n => n.id === conn.from);\n      const toNode = nodes.find(n => n.id === conn.to);\n\n      if (!fromNode || !toNode) return null;\n\n      const x1 = fromNode.position.x + NODE_WIDTH + viewport.x;\n      const y1 = fromNode.position.y + NODE_HEIGHT / 2 + viewport.y;\n      const x2 = toNode.position.x + viewport.x;\n      const y2 = toNode.position.y + NODE_HEIGHT / 2 + viewport.y;\n\n      const midX = (x1 + x2) / 2;\n\n      return (\n        <svg\n          key={conn.id}\n          className=\"absolute top-0 left-0 w-full h-full pointer-events-none\"\n          style={{ zIndex: 1 }}\n        >\n          <defs>\n            <marker\n              id=\"arrowhead\"\n              markerWidth=\"10\"\n              markerHeight=\"10\"\n              refX=\"9\"\n              refY=\"3\"\n              orient=\"auto\"\n            >\n              <polygon points=\"0 0, 10 3, 0 6\" fill=\"#39FF14\" />\n            </marker>\n          </defs>\n          <path\n            d={`M ${x1} ${y1} C ${midX} ${y1}, ${midX} ${y2}, ${x2} ${y2}`}\n            stroke=\"#39FF14\"\n            strokeWidth=\"2\"\n            fill=\"none\"\n            markerEnd=\"url(#arrowhead)\"\n            opacity=\"0.6\"\n          />\n          {conn.label && (\n            <text\n              x={midX}\n              y={(y1 + y2) / 2 - 5}\n              fill=\"#94a3b8\"\n              fontSize=\"12\"\n              textAnchor=\"middle\"\n            >\n              {conn.label}\n            </text>\n          )}\n        </svg>\n      );\n    });\n  };\n\n  // Draw grid\n  const renderGrid = () => {\n    if (!canvasRef.current) return null;\n    \n    const width = canvasRef.current.clientWidth;\n    const height = canvasRef.current.clientHeight;\n    \n    const lines = [];\n    const offsetX = viewport.x % (GRID_SIZE * viewport.zoom);\n    const offsetY = viewport.y % (GRID_SIZE * viewport.zoom);\n    \n    // Vertical lines\n    for (let x = offsetX; x < width; x += GRID_SIZE * viewport.zoom) {\n      lines.push(\n        <line\n          key={`v-${x}`}\n          x1={x}\n          y1={0}\n          x2={x}\n          y2={height}\n          stroke=\"rgba(255, 255, 255, 0.05)\"\n          strokeWidth={1}\n        />\n      );\n    }\n    \n    // Horizontal lines\n    for (let y = offsetY; y < height; y += GRID_SIZE * viewport.zoom) {\n      lines.push(\n        <line\n          key={`h-${y}`}\n          x1={0}\n          y1={y}\n          x2={width}\n          y2={y}\n          stroke=\"rgba(255, 255, 255, 0.05)\"\n          strokeWidth={1}\n        />\n      );\n    }\n    \n    return (\n      <svg className=\"absolute top-0 left-0 w-full h-full pointer-events-none\" style={{ zIndex: 0 }}>\n        {lines}\n      </svg>\n    );\n  };\n\n  return (\n    <div\n      ref={canvasRef}\n      className=\"relative w-full h-full bg-slate-900 overflow-hidden cursor-grab active:cursor-grabbing\"\n      onMouseDown={handleMouseDown}\n      onMouseMove={handleMouseMove}\n      onMouseUp={handleMouseUp}\n      onWheel={handleWheel}\n    >\n      {/* Grid */}\n      {renderGrid()}\n\n      {/* Connections */}\n      {renderConnections()}\n\n      {/* Nodes */}\n      <div\n        className=\"absolute\"\n        style={{\n          transform: `translate(${viewport.x}px, ${viewport.y}px) scale(${viewport.zoom})`,\n          transformOrigin: '0 0',\n          zIndex: 2\n        }}\n      >\n        {nodes.map(node => {\n          const hasError = validationErrors.some(err => err.nodeId === node.id && err.type === 'error');\n          \n          return (\n            <CanvasNode\n              key={node.id}\n              node={node}\n              isSelected={selectedNodes.includes(node.id)}\n              onClick={() => selectNode(node.id, false)}\n              onDoubleClick={() => onNodeDoubleClick?.(node)}\n              hasError={hasError}\n            />\n          );\n        })}\n      </div>\n\n      {/* Zoom indicator */}\n      <div className=\"absolute bottom-4 right-4 bg-slate-800/90 backdrop-blur-sm px-3 py-1 rounded-lg text-white text-xs font-mono border border-white/10\">\n        {Math.round(viewport.zoom * 100)}%\n      </div>\n\n      {/* Empty state */}\n      {nodes.length === 0 && (\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n          <div className=\"text-center\">\n            <div className=\"text-slate-600 text-lg font-bold mb-2\">Empty Canvas</div>\n            <div className=\"text-slate-700 text-sm\">Drag nodes from the toolbar to get started</div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Voice/IVRToolbar.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport { useIVR } from '../../contexts/IVRContext';\nimport {\n  Play, Hash, MessageCircle, Phone, GitBranch, Code, Shuffle,\n  Globe, PhoneOff, Circle, ArrowRight, ArrowLeftRight,\n  ZoomIn, ZoomOut, Maximize2, Undo2, Redo2, Save, Download,\n  Upload, Search, AlertCircle, CheckCircle\n} from 'lucide-react';\nimport { IVRNode, NodeType } from '../../types/ivr';\n\ninterface NodePaletteItem {\n  type: NodeType;\n  label: string;\n  icon: React.ElementType;\n  category: 'flow' | 'interaction' | 'logic' | 'integration';\n}\n\nconst NODE_PALETTE: NodePaletteItem[] = [\n  { type: 'start', label: 'Start', icon: Play, category: 'flow' },\n  { type: 'setParams', label: 'Set Parameters', icon: Hash, category: 'flow' },\n  { type: 'playMessage', label: 'Play Message', icon: MessageCircle, category: 'interaction' },\n  { type: 'getDigits', label: 'Get Digits', icon: Hash, category: 'interaction' },\n  { type: 'playMenu', label: 'Play Menu', icon: Phone, category: 'interaction' },\n  { type: 'playConfirm', label: 'Confirmation', icon: ArrowLeftRight, category: 'interaction' },\n  { type: 'runScript', label: 'Run Script', icon: Code, category: 'logic' },\n  { type: 'switch', label: 'Switch', icon: Shuffle, category: 'logic' },\n  { type: 'callAPI', label: 'API Call', icon: Globe, category: 'integration' },\n  { type: 'endFlow', label: 'End Flow', icon: PhoneOff, category: 'flow' },\n  { type: 'connector', label: 'Connector', icon: Circle, category: 'flow' },\n  { type: 'jumperEntry', label: 'Jump Entry', icon: ArrowRight, category: 'flow' },\n  { type: 'jumperExit', label: 'Jump Exit', icon: ArrowRight, category: 'flow' }\n];\n\ninterface IVRToolbarProps {\n  onSave?: () => void;\n  onExport?: () => void;\n  onImport?: () => void;\n}\n\nexport default function IVRToolbar({ onSave, onExport, onImport }: IVRToolbarProps) {\n  const {\n    viewport,\n    setViewport,\n    undo,\n    redo,\n    history,\n    historyIndex,\n    addNode,\n    validate,\n    validationErrors,\n    getCurrentPage\n  } = useIVR();\n\n  const [searchTerm, setSearchTerm] = useState('');\n  const [activeCategory, setActiveCategory] = useState<string>('all');\n  const [showValidation, setShowValidation] = useState(false);\n\n  const currentPage = getCurrentPage();\n  const canUndo = historyIndex > 0;\n  const canRedo = historyIndex < history.length - 1;\n\n  // Filter nodes based on search and category\n  const filteredNodes = NODE_PALETTE.filter(node => {\n    const matchesSearch = node.label.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = activeCategory === 'all' || node.category === activeCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  // Handle node creation\n  const handleAddNode = (type: NodeType) => {\n    const baseNode: Partial<IVRNode> = {\n      id: `node_${Date.now()}`,\n      name: NODE_PALETTE.find(n => n.type === type)?.label || type,\n      position: { x: 100, y: 100 },\n      type\n    };\n\n    // Add type-specific defaults\n    let newNode: IVRNode;\n\n    switch (type) {\n      case 'start':\n        newNode = { ...baseNode, type: 'start' } as IVRNode;\n        break;\n      case 'setParams':\n        newNode = {\n          ...baseNode,\n          type: 'setParams',\n          parameters: {},\n          variables: {}\n        } as IVRNode;\n        break;\n      case 'playMessage':\n        newNode = {\n          ...baseNode,\n          type: 'playMessage',\n          messages: [],\n          loop: 1,\n          bargeIn: true\n        } as IVRNode;\n        break;\n      case 'getDigits':\n        newNode = {\n          ...baseNode,\n          type: 'getDigits',\n          messages: [],\n          resultVariable: 'userInput',\n          minDigits: 1,\n          maxDigits: 1,\n          timeout: 5000,\n          attempts: 3\n        } as IVRNode;\n        break;\n      case 'playMenu':\n        newNode = {\n          ...baseNode,\n          type: 'playMenu',\n          messages: [],\n          options: [],\n          timeout: 5000,\n          attempts: 3\n        } as IVRNode;\n        break;\n      case 'playConfirm':\n        newNode = {\n          ...baseNode,\n          type: 'playConfirm',\n          messages: [],\n          confirmKey: '1',\n          cancelKey: '2',\n          timeout: 5000\n        } as IVRNode;\n        break;\n      case 'runScript':\n        newNode = {\n          ...baseNode,\n          type: 'runScript',\n          script: '// Enter JavaScript code here',\n          variables: []\n        } as IVRNode;\n        break;\n      case 'switch':\n        newNode = {\n          ...baseNode,\n          type: 'switch',\n          variable: '',\n          conditions: [],\n          defaultAction: ''\n        } as IVRNode;\n        break;\n      case 'callAPI':\n        newNode = {\n          ...baseNode,\n          type: 'callAPI',\n          url: '',\n          method: 'GET',\n          responseVariable: 'apiResponse',\n          timeout: 30000\n        } as IVRNode;\n        break;\n      case 'endFlow':\n        newNode = {\n          ...baseNode,\n          type: 'endFlow',\n          endType: 'disconnect'\n        } as IVRNode;\n        break;\n      case 'connector':\n        newNode = {\n          ...baseNode,\n          type: 'connector'\n        } as IVRNode;\n        break;\n      case 'jumperEntry':\n        newNode = {\n          ...baseNode,\n          type: 'jumperEntry',\n          jumperName: 'jumper1'\n        } as IVRNode;\n        break;\n      case 'jumperExit':\n        newNode = {\n          ...baseNode,\n          type: 'jumperExit',\n          jumperName: 'jumper1'\n        } as IVRNode;\n        break;\n      default:\n        return;\n    }\n\n    addNode(newNode);\n  };\n\n  // Handle zoom\n  const handleZoom = (direction: 'in' | 'out' | 'fit') => {\n    if (direction === 'fit') {\n      setViewport({ zoom: 1, x: 0, y: 0 });\n    } else {\n      const delta = direction === 'in' ? 1.2 : 0.8;\n      const newZoom = Math.max(0.25, Math.min(2, viewport.zoom * delta));\n      setViewport({ zoom: newZoom });\n    }\n  };\n\n  // Handle validation\n  const handleValidate = () => {\n    validate();\n    setShowValidation(true);\n    setTimeout(() => setShowValidation(false), 3000);\n  };\n\n  const errorCount = validationErrors.filter(e => e.type === 'error').length;\n  const warningCount = validationErrors.filter(e => e.type === 'warning').length;\n\n  return (\n    <div className=\"w-80 h-full bg-slate-900 border-r border-white/10 flex flex-col\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-white/10\">\n        <h3 className=\"text-white font-bold text-lg mb-3\">IVR Workflow Builder</h3>\n        \n        {/* Actions */}\n        <div className=\"flex items-center gap-2\">\n          <button\n            onClick={undo}\n            disabled={!canUndo}\n            className=\"p-2 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"\n            title=\"Undo\"\n          >\n            <Undo2 className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={redo}\n            disabled={!canRedo}\n            className=\"p-2 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 disabled:opacity-30 disabled:cursor-not-allowed transition-all\"\n            title=\"Redo\"\n          >\n            <Redo2 className=\"w-4 h-4\" />\n          </button>\n          <div className=\"flex-1\" />\n          <button\n            onClick={() => handleZoom('out')}\n            className=\"p-2 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all\"\n            title=\"Zoom Out\"\n          >\n            <ZoomOut className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => handleZoom('fit')}\n            className=\"p-2 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all\"\n            title=\"Fit to Screen\"\n          >\n            <Maximize2 className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={() => handleZoom('in')}\n            className=\"p-2 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all\"\n            title=\"Zoom In\"\n          >\n            <ZoomIn className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        {/* Secondary Actions */}\n        <div className=\"flex items-center gap-2 mt-3\">\n          <button\n            onClick={onSave}\n            className=\"flex-1 px-3 py-2 rounded-lg bg-[#39FF14] hover:bg-[#32e012] text-black text-sm font-semibold transition-all flex items-center justify-center gap-2\"\n          >\n            <Save className=\"w-4 h-4\" />\n            Save\n          </button>\n          <button\n            onClick={handleValidate}\n            className=\"px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all\"\n            title=\"Validate Flow\"\n          >\n            <AlertCircle className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={onExport}\n            className=\"px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all\"\n            title=\"Export\"\n          >\n            <Download className=\"w-4 h-4\" />\n          </button>\n          <button\n            onClick={onImport}\n            className=\"px-3 py-2 rounded-lg bg-white/5 border border-white/10 text-white hover:bg-white/10 transition-all\"\n            title=\"Import\"\n          >\n            <Upload className=\"w-4 h-4\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Validation Results */}\n      {showValidation && validationErrors.length > 0 && (\n        <div className=\"p-4 bg-white/5 border-b border-white/10\">\n          <div className=\"text-white font-semibold text-sm mb-2\">Validation Results</div>\n          {errorCount > 0 && (\n            <div className=\"text-red-400 text-xs flex items-center gap-2 mb-1\">\n              <AlertCircle className=\"w-3 h-3\" />\n              {errorCount} error{errorCount !== 1 ? 's' : ''}\n            </div>\n          )}\n          {warningCount > 0 && (\n            <div className=\"text-yellow-400 text-xs flex items-center gap-2\">\n              <AlertCircle className=\"w-3 h-3\" />\n              {warningCount} warning{warningCount !== 1 ? 's' : ''}\n            </div>\n          )}\n        </div>\n      )}\n\n      {showValidation && validationErrors.length === 0 && (\n        <div className=\"p-4 bg-green-500/10 border-b border-green-500/20\">\n          <div className=\"text-green-400 text-sm flex items-center gap-2\">\n            <CheckCircle className=\"w-4 h-4\" />\n            No validation errors\n          </div>\n        </div>\n      )}\n\n      {/* Node Palette */}\n      <div className=\"flex-1 overflow-y-auto p-4\">\n        {/* Search */}\n        <div className=\"relative mb-4\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search nodes...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-2 text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n          />\n        </div>\n\n        {/* Category Filter */}\n        <div className=\"flex gap-2 mb-4 flex-wrap\">\n          {['all', 'flow', 'interaction', 'logic', 'integration'].map(cat => (\n            <button\n              key={cat}\n              onClick={() => setActiveCategory(cat)}\n              className={`px-3 py-1 rounded-lg text-xs font-semibold uppercase tracking-wider transition-all ${\n                activeCategory === cat\n                  ? 'bg-[#39FF14] text-black'\n                  : 'bg-white/5 text-slate-400 hover:bg-white/10'\n              }`}\n            >\n              {cat}\n            </button>\n          ))}\n        </div>\n\n        {/* Node List */}\n        <div className=\"space-y-2\">\n          {filteredNodes.map(node => {\n            const Icon = node.icon;\n            return (\n              <button\n                key={node.type}\n                onClick={() => handleAddNode(node.type)}\n                className=\"w-full flex items-center gap-3 p-3 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 hover:border-[#39FF14]/50 transition-all group\"\n              >\n                <div className=\"p-2 rounded-lg bg-[#39FF14]/20 text-[#39FF14] group-hover:bg-[#39FF14]/20\">\n                  <Icon className=\"w-4 h-4\" />\n                </div>\n                <span className=\"text-white text-sm font-medium\">{node.label}</span>\n              </button>\n            );\n          })}\n        </div>\n\n        {filteredNodes.length === 0 && (\n          <div className=\"text-center text-slate-500 text-sm py-8\">\n            No nodes match your search\n          </div>\n        )}\n      </div>\n\n      {/* Stats */}\n      {currentPage && (\n        <div className=\"p-4 border-t border-white/10 bg-white/5\">\n          <div className=\"grid grid-cols-2 gap-4 text-center\">\n            <div>\n              <div className=\"text-xs text-slate-500 uppercase tracking-wider\">Nodes</div>\n              <div className=\"text-xl font-bold text-white\">{currentPage.nodes.length}</div>\n            </div>\n            <div>\n              <div className=\"text-xs text-slate-500 uppercase tracking-wider\">Connections</div>\n              <div className=\"text-xl font-bold text-white\">{currentPage.connections.length}</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1205, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Voice/IVRProperties.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport { useIVR } from '../../contexts/IVRContext';\nimport { IVRNode } from '../../types/ivr';\nimport { X, AlertCircle } from 'lucide-react';\n\ninterface IVRPropertiesProps {\n  node: IVRNode | null;\n  onClose: () => void;\n}\n\nexport default function IVRProperties({ node, onClose }: IVRPropertiesProps) {\n  const { updateNode } = useIVR();\n  const [localNode, setLocalNode] = useState<IVRNode | null>(node);\n\n  if (!localNode) {\n    return (\n      <div className=\"w-80 h-full bg-slate-900 border-l border-white/10 flex items-center justify-center\">\n        <div className=\"text-center text-slate-500\">\n          <div className=\"mb-2\">No node selected</div>\n          <div className=\"text-xs\">Double-click a node to edit its properties</div>\n        </div>\n      </div>\n    );\n  }\n\n  const handleUpdate = (field: string, value: any) => {\n    const updated = { ...localNode, [field]: value };\n    setLocalNode(updated as IVRNode);\n    updateNode(localNode.id, { [field]: value });\n  };\n\n  return (\n    <div className=\"w-80 h-full bg-slate-900 border-l border-white/10 flex flex-col\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-white/10 flex items-center justify-between\">\n        <h3 className=\"text-white font-bold\">Node Properties</h3>\n        <button\n          onClick={onClose}\n          className=\"p-1 hover:bg-white/10 rounded-lg transition-all text-slate-400 hover:text-white\"\n        >\n          <X className=\"w-5 h-5\" />\n        </button>\n      </div>\n\n      {/* Properties Form */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {/* Basic Properties */}\n        <div>\n          <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n            Node Name\n          </label>\n          <input\n            type=\"text\"\n            value={localNode.name}\n            onChange={(e) => handleUpdate('name', e.target.value)}\n            className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n          />\n        </div>\n\n        <div>\n          <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n            Description (Optional)\n          </label>\n          <textarea\n            value={localNode.description || ''}\n            onChange={(e) => handleUpdate('description', e.target.value)}\n            rows={2}\n            className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14] resize-none\"\n          />\n        </div>\n\n        {/* Type-Specific Properties */}\n        {renderTypeSpecificProperties(localNode, handleUpdate)}\n      </div>\n    </div>\n  );\n}\n\nfunction renderTypeSpecificProperties(node: IVRNode, handleUpdate: (field: string, value: any) => void) {\n  switch (node.type) {\n    case 'getDigits':\n      return (\n        <>\n          <div>\n            <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n              Result Variable\n            </label>\n            <input\n              type=\"text\"\n              value={node.resultVariable}\n              onChange={(e) => handleUpdate('resultVariable', e.target.value)}\n              className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            />\n          </div>\n          <div className=\"grid grid-cols-2 gap-3\">\n            <div>\n              <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n                Min Digits\n              </label>\n              <input\n                type=\"number\"\n                value={node.minDigits}\n                onChange={(e) => handleUpdate('minDigits', parseInt(e.target.value))}\n                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n              />\n            </div>\n            <div>\n              <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n                Max Digits\n              </label>\n              <input\n                type=\"number\"\n                value={node.maxDigits}\n                onChange={(e) => handleUpdate('maxDigits', parseInt(e.target.value))}\n                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n              />\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n              Timeout (ms)\n            </label>\n            <input\n              type=\"number\"\n              value={node.timeout}\n              onChange={(e) => handleUpdate('timeout', parseInt(e.target.value))}\n              className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            />\n          </div>\n        </>\n      );\n\n    case 'runScript':\n      return (\n        <div>\n          <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n            JavaScript Code\n          </label>\n          <textarea\n            value={node.script}\n            onChange={(e) => handleUpdate('script', e.target.value)}\n            rows={10}\n            className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white font-mono focus:outline-none focus:ring-2 focus:ring-[#39FF14] resize-none\"\n            placeholder=\"// Enter JavaScript code here\"\n          />\n          <div className=\"mt-2 text-xs text-slate-500\">\n            <AlertCircle className=\"w-3 h-3 inline mr-1\" />\n            Use $variableName to access IVR variables\n          </div>\n        </div>\n      );\n\n    case 'switch':\n      return (\n        <div>\n          <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n            Variable to Switch On\n          </label>\n          <input\n            type=\"text\"\n            value={node.variable}\n            onChange={(e) => handleUpdate('variable', e.target.value)}\n            className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            placeholder=\"$variableName\"\n          />\n        </div>\n      );\n\n    case 'callAPI':\n      return (\n        <>\n          <div>\n            <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n              API URL\n            </label>\n            <input\n              type=\"url\"\n              value={node.url}\n              onChange={(e) => handleUpdate('url', e.target.value)}\n              className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n              placeholder=\"https://api.example.com/endpoint\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n              HTTP Method\n            </label>\n            <select\n              value={node.method}\n              onChange={(e) => handleUpdate('method', e.target.value)}\n              className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            >\n              <option value=\"GET\">GET</option>\n              <option value=\"POST\">POST</option>\n              <option value=\"PUT\">PUT</option>\n              <option value=\"DELETE\">DELETE</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n              Response Variable\n            </label>\n            <input\n              type=\"text\"\n              value={node.responseVariable}\n              onChange={(e) => handleUpdate('responseVariable', e.target.value)}\n              className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            />\n          </div>\n        </>\n      );\n\n    case 'endFlow':\n      return (\n        <>\n          <div>\n            <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n              End Type\n            </label>\n            <select\n              value={node.endType}\n              onChange={(e) => handleUpdate('endType', e.target.value)}\n              className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            >\n              <option value=\"disconnect\">Disconnect</option>\n              <option value=\"transfer\">Transfer</option>\n            </select>\n          </div>\n          {node.endType === 'transfer' && (\n            <div>\n              <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n                Transfer Number\n              </label>\n              <input\n                type=\"tel\"\n                value={node.transferNumber || ''}\n                onChange={(e) => handleUpdate('transferNumber', e.target.value)}\n                className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n                placeholder=\"+1234567890\"\n              />\n            </div>\n          )}\n        </>\n      );\n\n    case 'jumperEntry':\n    case 'jumperExit':\n      return (\n        <div>\n          <label className=\"block text-xs font-bold text-slate-400 uppercase tracking-wider mb-2\">\n            Jumper Name\n          </label>\n          <input\n            type=\"text\"\n            value={node.jumperName}\n            onChange={(e) => handleUpdate('jumperName', e.target.value)}\n            className=\"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n            placeholder=\"jumper1\"\n          />\n        </div>\n      );\n\n    default:\n      return (\n        <div className=\"text-center text-slate-500 text-sm py-4\">\n          No additional properties for this node type\n        </div>\n      );\n  }\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AAAA;AALA;;;;;AAYe,SAAS,cAAc,EAAE,IAAI,EAAE,OAAO,EAAsB;IACzE,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,wIAAM;IAC7B,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAiB;IAE3D,IAAI,CAAC,WAAW;QACd,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCAAO;;;;;;kCACtB,8OAAC;wBAAI,WAAU;kCAAU;;;;;;;;;;;;;;;;;IAIjC;IAEA,MAAM,eAAe,CAAC,OAAe;QACnC,MAAM,UAAU;YAAE,GAAG,SAAS;YAAE,CAAC,MAAM,EAAE;QAAM;QAC/C,aAAa;QACb,WAAW,UAAU,EAAE,EAAE;YAAE,CAAC,MAAM,EAAE;QAAM;IAC5C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAuB;;;;;;kCACrC,8OAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,8OAAC,iMAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKjB,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAuE;;;;;;0CAGxF,8OAAC;gCACC,MAAK;gCACL,OAAO,UAAU,IAAI;gCACrB,UAAU,CAAC,IAAM,aAAa,QAAQ,EAAE,MAAM,CAAC,KAAK;gCACpD,WAAU;;;;;;;;;;;;kCAId,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAuE;;;;;;0CAGxF,8OAAC;gCACC,OAAO,UAAU,WAAW,IAAI;gCAChC,UAAU,CAAC,IAAM,aAAa,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC3D,MAAM;gCACN,WAAU;;;;;;;;;;;;oBAKb,6BAA6B,WAAW;;;;;;;;;;;;;AAIjD;AAEA,SAAS,6BAA6B,IAAa,EAAE,YAAiD;IACpG,OAAQ,KAAK,IAAI;QACf,KAAK;YACH,qBACE;;kCACE,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAuE;;;;;;0CAGxF,8OAAC;gCACC,MAAK;gCACL,OAAO,KAAK,cAAc;gCAC1B,UAAU,CAAC,IAAM,aAAa,kBAAkB,EAAE,MAAM,CAAC,KAAK;gCAC9D,WAAU;;;;;;;;;;;;kCAGd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAAuE;;;;;;kDAGxF,8OAAC;wCACC,MAAK;wCACL,OAAO,KAAK,SAAS;wCACrB,UAAU,CAAC,IAAM,aAAa,aAAa,SAAS,EAAE,MAAM,CAAC,KAAK;wCAClE,WAAU;;;;;;;;;;;;0CAGd,8OAAC;;kDACC,8OAAC;wCAAM,WAAU;kDAAuE;;;;;;kDAGxF,8OAAC;wCACC,MAAK;wCACL,OAAO,KAAK,SAAS;wCACrB,UAAU,CAAC,IAAM,aAAa,aAAa,SAAS,EAAE,MAAM,CAAC,KAAK;wCAClE,WAAU;;;;;;;;;;;;;;;;;;kCAIhB,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAuE;;;;;;0CAGxF,8OAAC;gCACC,MAAK;gCACL,OAAO,KAAK,OAAO;gCACnB,UAAU,CAAC,IAAM,aAAa,WAAW,SAAS,EAAE,MAAM,CAAC,KAAK;gCAChE,WAAU;;;;;;;;;;;;;;QAMpB,KAAK;YACH,qBACE,8OAAC;;kCACC,8OAAC;wBAAM,WAAU;kCAAuE;;;;;;kCAGxF,8OAAC;wBACC,OAAO,KAAK,MAAM;wBAClB,UAAU,CAAC,IAAM,aAAa,UAAU,EAAE,MAAM,CAAC,KAAK;wBACtD,MAAM;wBACN,WAAU;wBACV,aAAY;;;;;;kCAEd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,mOAAW;gCAAC,WAAU;;;;;;4BAAwB;;;;;;;;;;;;;QAMvD,KAAK;YACH,qBACE,8OAAC;;kCACC,8OAAC;wBAAM,WAAU;kCAAuE;;;;;;kCAGxF,8OAAC;wBACC,MAAK;wBACL,OAAO,KAAK,QAAQ;wBACpB,UAAU,CAAC,IAAM,aAAa,YAAY,EAAE,MAAM,CAAC,KAAK;wBACxD,WAAU;wBACV,aAAY;;;;;;;;;;;;QAKpB,KAAK;YACH,qBACE;;kCACE,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAuE;;;;;;0CAGxF,8OAAC;gCACC,MAAK;gCACL,OAAO,KAAK,GAAG;gCACf,UAAU,CAAC,IAAM,aAAa,OAAO,EAAE,MAAM,CAAC,KAAK;gCACnD,WAAU;gCACV,aAAY;;;;;;;;;;;;kCAGhB,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAuE;;;;;;0CAGxF,8OAAC;gCACC,OAAO,KAAK,MAAM;gCAClB,UAAU,CAAC,IAAM,aAAa,UAAU,EAAE,MAAM,CAAC,KAAK;gCACtD,WAAU;;kDAEV,8OAAC;wCAAO,OAAM;kDAAM;;;;;;kDACpB,8OAAC;wCAAO,OAAM;kDAAO;;;;;;kDACrB,8OAAC;wCAAO,OAAM;kDAAM;;;;;;kDACpB,8OAAC;wCAAO,OAAM;kDAAS;;;;;;;;;;;;;;;;;;kCAG3B,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAuE;;;;;;0CAGxF,8OAAC;gCACC,MAAK;gCACL,OAAO,KAAK,gBAAgB;gCAC5B,UAAU,CAAC,IAAM,aAAa,oBAAoB,EAAE,MAAM,CAAC,KAAK;gCAChE,WAAU;;;;;;;;;;;;;;QAMpB,KAAK;YACH,qBACE;;kCACE,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAuE;;;;;;0CAGxF,8OAAC;gCACC,OAAO,KAAK,OAAO;gCACnB,UAAU,CAAC,IAAM,aAAa,WAAW,EAAE,MAAM,CAAC,KAAK;gCACvD,WAAU;;kDAEV,8OAAC;wCAAO,OAAM;kDAAa;;;;;;kDAC3B,8OAAC;wCAAO,OAAM;kDAAW;;;;;;;;;;;;;;;;;;oBAG5B,KAAK,OAAO,KAAK,4BAChB,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAuE;;;;;;0CAGxF,8OAAC;gCACC,MAAK;gCACL,OAAO,KAAK,cAAc,IAAI;gCAC9B,UAAU,CAAC,IAAM,aAAa,kBAAkB,EAAE,MAAM,CAAC,KAAK;gCAC9D,WAAU;gCACV,aAAY;;;;;;;;;;;;;;QAOxB,KAAK;QACL,KAAK;YACH,qBACE,8OAAC;;kCACC,8OAAC;wBAAM,WAAU;kCAAuE;;;;;;kCAGxF,8OAAC;wBACC,MAAK;wBACL,OAAO,KAAK,UAAU;wBACtB,UAAU,CAAC,IAAM,aAAa,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC1D,WAAU;wBACV,aAAY;;;;;;;;;;;;QAKpB;YACE,qBACE,8OAAC;gBAAI,WAAU;0BAA0C;;;;;;IAI/D;AACF"}},
    {"offset": {"line": 1799, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Voice/IVRProjectManager.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport { useIVR } from '../../contexts/IVRContext';\nimport { Plus, Search, MoreVertical, Edit2, Copy, Trash2, Calendar, Activity } from 'lucide-react';\nimport { IVRProject } from '../../types/ivr';\n\ninterface IVRProjectManagerProps {\n  onProjectSelect: (project: IVRProject) => void;\n  onCreateNew: () => void;\n}\n\nexport default function IVRProjectManager({ onProjectSelect, onCreateNew }: IVRProjectManagerProps) {\n  // Sample IVR workflows for demonstration\n  const [projects] = useState<IVRProject[]>([\n    {\n      id: 'ivr_sample_1',\n      name: 'Customer Support Routing',\n      description: 'Routes customers to appropriate departments based on their selection. Includes sales, support, and billing options.',\n      pages: [\n        {\n          id: 'page_1',\n          name: 'Main Menu',\n          nodes: [\n            { id: 'node_1', type: 'start', name: 'Start', position: { x: 100, y: 100 } },\n            { id: 'node_2', type: 'playMenu', name: 'Main Menu', position: { x: 350, y: 100 }, messages: [], options: [], timeout: 5000, attempts: 3 },\n            { id: 'node_3', type: 'endFlow', name: 'End Call', position: { x: 600, y: 100 }, endType: 'disconnect' }\n          ],\n          connections: [\n            { id: 'conn_1', from: 'node_1', to: 'node_2' },\n            { id: 'conn_2', from: 'node_2', to: 'node_3' }\n          ]\n        }\n      ],\n      variables: {},\n      created_at: '2026-02-15T10:00:00Z',\n      updated_at: '2026-02-17T14:30:00Z',\n      status: 'active',\n      version: 2\n    },\n    {\n      id: 'ivr_sample_2',\n      name: 'After Hours Support',\n      description: 'Handles incoming calls outside business hours with AI-powered voicemail and emergency routing options.',\n      pages: [\n        {\n          id: 'page_1',\n          name: 'After Hours Flow',\n          nodes: [\n            { id: 'node_1', type: 'start', name: 'Start', position: { x: 100, y: 100 } },\n            { id: 'node_2', type: 'playMessage', name: 'After Hours Message', position: { x: 350, y: 100 }, messages: [], loop: 1, bargeIn: true },\n            { id: 'node_3', type: 'playConfirm', name: 'Emergency?', position: { x: 600, y: 100 }, messages: [], confirmKey: '1', cancelKey: '2', timeout: 5000 },\n            { id: 'node_4', type: 'endFlow', name: 'Disconnect', position: { x: 850, y: 100 }, endType: 'disconnect' }\n          ],\n          connections: [\n            { id: 'conn_1', from: 'node_1', to: 'node_2' },\n            { id: 'conn_2', from: 'node_2', to: 'node_3' },\n            { id: 'conn_3', from: 'node_3', to: 'node_4' }\n          ]\n        }\n      ],\n      variables: {},\n      created_at: '2026-02-10T08:00:00Z',\n      updated_at: '2026-02-16T16:45:00Z',\n      status: 'active',\n      version: 3\n    },\n    {\n      id: 'ivr_sample_3',\n      name: 'Account Verification Flow',\n      description: 'Collects and verifies customer account information using DTMF input and API validation before routing to live agent.',\n      pages: [\n        {\n          id: 'page_1',\n          name: 'Verification',\n          nodes: [\n            { id: 'node_1', type: 'start', name: 'Start', position: { x: 100, y: 100 } },\n            { id: 'node_2', type: 'getDigits', name: 'Get Account #', position: { x: 350, y: 100 }, messages: [], resultVariable: 'accountNumber', minDigits: 8, maxDigits: 10, timeout: 5000, attempts: 3 },\n            { id: 'node_3', type: 'callAPI', name: 'Verify Account', position: { x: 600, y: 100 }, url: 'https://api.example.com/verify', method: 'POST', responseVariable: 'apiResponse', timeout: 30000 },\n            { id: 'node_4', type: 'switch', name: 'Check Result', position: { x: 850, y: 100 }, variable: 'apiResponse', conditions: [], defaultAction: '' },\n            { id: 'node_5', type: 'endFlow', name: 'Transfer to Agent', position: { x: 1100, y: 100 }, endType: 'transfer', transferNumber: '+1234567890' }\n          ],\n          connections: [\n            { id: 'conn_1', from: 'node_1', to: 'node_2' },\n            { id: 'conn_2', from: 'node_2', to: 'node_3' },\n            { id: 'conn_3', from: 'node_3', to: 'node_4' },\n            { id: 'conn_4', from: 'node_4', to: 'node_5' }\n          ]\n        }\n      ],\n      variables: { accountNumber: '', apiResponse: '' },\n      created_at: '2026-02-12T12:00:00Z',\n      updated_at: '2026-02-17T09:15:00Z',\n      status: 'draft',\n      version: 1\n    },\n    {\n      id: 'ivr_sample_4',\n      name: 'Multilingual Welcome',\n      description: 'Detects caller language preference and routes to appropriate language-specific menu and support team.',\n      pages: [\n        {\n          id: 'page_1',\n          name: 'Language Selection',\n          nodes: [\n            { id: 'node_1', type: 'start', name: 'Start', position: { x: 100, y: 100 } },\n            { id: 'node_2', type: 'playMenu', name: 'Language Menu', position: { x: 350, y: 100 }, messages: [], options: [], timeout: 5000, attempts: 3 },\n            { id: 'node_3', type: 'runScript', name: 'Set Language', position: { x: 600, y: 100 }, script: '// Set language', variables: [] },\n            { id: 'node_4', type: 'endFlow', name: 'Transfer', position: { x: 850, y: 100 }, endType: 'transfer' }\n          ],\n          connections: [\n            { id: 'conn_1', from: 'node_1', to: 'node_2' },\n            { id: 'conn_2', from: 'node_2', to: 'node_3' },\n            { id: 'conn_3', from: 'node_3', to: 'node_4' }\n          ]\n        }\n      ],\n      variables: { selectedLanguage: 'en' },\n      created_at: '2026-02-08T14:00:00Z',\n      updated_at: '2026-02-17T11:20:00Z',\n      status: 'active',\n      version: 4\n    }\n  ]);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const filteredProjects = projects.filter(p =>\n    p.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    p.description?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"p-8 space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-3xl font-black text-white mb-2\">IVR Workflows</h2>\n          <p className=\"text-slate-400\">Manage your interactive voice response flows</p>\n        </div>\n        <button\n          onClick={onCreateNew}\n          className=\"bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-6 py-3 rounded-xl font-bold uppercase text-sm tracking-wider shadow-lg shadow-[#39FF14]/30 flex items-center gap-2 transition-all\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          New Workflow\n        </button>\n      </div>\n\n      {/* Search */}\n      <div className=\"relative\">\n        <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400\" />\n        <input\n          type=\"text\"\n          placeholder=\"Search workflows...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"w-full bg-white/5 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-[#39FF14]\"\n        />\n      </div>\n\n      {/* Project Grid */}\n      {filteredProjects.length > 0 ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredProjects.map(project => (\n            <div\n              key={project.id}\n              className=\"glass-card p-6 rounded-2xl bg-white/5 border border-white/10 hover:border-[#39FF14]/50 transition-all cursor-pointer group\"\n              onClick={() => onProjectSelect(project)}\n            >\n              <div className=\"flex justify-between items-start mb-4\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-xl font-bold text-white mb-1 group-hover:text-[#39FF14] transition-colors\">\n                    {project.name}\n                  </h3>\n                  <p className=\"text-slate-400 text-sm line-clamp-2\">{project.description}</p>\n                </div>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                  }}\n                  className=\"p-2 hover:bg-white/10 rounded-lg transition-all opacity-0 group-hover:opacity-100\"\n                >\n                  <MoreVertical className=\"w-4 h-4 text-slate-400\" />\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4 mb-4 pt-4 border-t border-white/10\">\n                <div>\n                  <div className=\"text-xs text-slate-500 uppercase font-bold tracking-wider\">Nodes</div>\n                  <div className=\"text-2xl font-bold text-white\">\n                    {project.pages.reduce((sum, page) => sum + page.nodes.length, 0)}\n                  </div>\n                </div>\n                <div>\n                  <div className=\"text-xs text-slate-500 uppercase font-bold tracking-wider\">Pages</div>\n                  <div className=\"text-2xl font-bold text-white\">{project.pages.length}</div>\n                </div>\n              </div>\n\n              <div className=\"flex items-center justify-between text-xs text-slate-500\">\n                <div className=\"flex items-center gap-1\">\n                  <Calendar className=\"w-3 h-3\" />\n                  {new Date(project.updated_at).toLocaleDateString()}\n                </div>\n                <div\n                  className={`px-2 py-1 rounded-full uppercase font-bold ${\n                    project.status === 'active'\n                      ? 'bg-green-500/20 text-green-400'\n                      : project.status === 'draft'\n                      ? 'bg-yellow-500/20 text-yellow-400'\n                      : 'bg-slate-500/20 text-slate-400'\n                  }`}\n                >\n                  {project.status}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-center py-20\">\n          <div className=\"w-20 h-20 bg-white/5 border border-white/10 rounded-3xl flex items-center justify-center mb-6 mx-auto\">\n            <Activity className=\"w-10 h-10 text-[#39FF14]\" />\n          </div>\n          <h3 className=\"text-xl font-bold text-white mb-2\">\n            {searchTerm ? 'No workflows found' : 'No workflows yet'}\n          </h3>\n          <p className=\"text-slate-400 mb-6\">\n            {searchTerm\n              ? 'Try adjusting your search term'\n              : 'Create your first IVR workflow to get started'}\n          </p>\n          {!searchTerm && (\n            <button\n              onClick={onCreateNew}\n              className=\"bg-gradient-to-r from-[#39FF14] to-[#32e012] hover:from-[#32e012] hover:to-[#28b80f] text-black px-6 py-3 rounded-xl font-bold uppercase text-sm tracking-wider shadow-lg shadow-[#39FF14]/30 flex items-center gap-2 transition-all mx-auto\"\n            >\n              <Plus className=\"w-5 h-5\" />\n              Create First Workflow\n            </button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;AAYe,SAAS,kBAAkB,EAAE,eAAe,EAAE,WAAW,EAA0B;IAChG,yCAAyC;IACzC,MAAM,CAAC,SAAS,GAAG,IAAA,iNAAQ,EAAe;QACxC;YACE,IAAI;YACJ,MAAM;YACN,aAAa;YACb,OAAO;gBACL;oBACE,IAAI;oBACJ,MAAM;oBACN,OAAO;wBACL;4BAAE,IAAI;4BAAU,MAAM;4BAAS,MAAM;4BAAS,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;wBAAE;wBAC3E;4BAAE,IAAI;4BAAU,MAAM;4BAAY,MAAM;4BAAa,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,UAAU,EAAE;4BAAE,SAAS,EAAE;4BAAE,SAAS;4BAAM,UAAU;wBAAE;wBACzI;4BAAE,IAAI;4BAAU,MAAM;4BAAW,MAAM;4BAAY,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,SAAS;wBAAa;qBACxG;oBACD,aAAa;wBACX;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;wBAC7C;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;qBAC9C;gBACH;aACD;YACD,WAAW,CAAC;YACZ,YAAY;YACZ,YAAY;YACZ,QAAQ;YACR,SAAS;QACX;QACA;YACE,IAAI;YACJ,MAAM;YACN,aAAa;YACb,OAAO;gBACL;oBACE,IAAI;oBACJ,MAAM;oBACN,OAAO;wBACL;4BAAE,IAAI;4BAAU,MAAM;4BAAS,MAAM;4BAAS,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;wBAAE;wBAC3E;4BAAE,IAAI;4BAAU,MAAM;4BAAe,MAAM;4BAAuB,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,UAAU,EAAE;4BAAE,MAAM;4BAAG,SAAS;wBAAK;wBACrI;4BAAE,IAAI;4BAAU,MAAM;4BAAe,MAAM;4BAAc,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,UAAU,EAAE;4BAAE,YAAY;4BAAK,WAAW;4BAAK,SAAS;wBAAK;wBACpJ;4BAAE,IAAI;4BAAU,MAAM;4BAAW,MAAM;4BAAc,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,SAAS;wBAAa;qBAC1G;oBACD,aAAa;wBACX;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;wBAC7C;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;wBAC7C;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;qBAC9C;gBACH;aACD;YACD,WAAW,CAAC;YACZ,YAAY;YACZ,YAAY;YACZ,QAAQ;YACR,SAAS;QACX;QACA;YACE,IAAI;YACJ,MAAM;YACN,aAAa;YACb,OAAO;gBACL;oBACE,IAAI;oBACJ,MAAM;oBACN,OAAO;wBACL;4BAAE,IAAI;4BAAU,MAAM;4BAAS,MAAM;4BAAS,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;wBAAE;wBAC3E;4BAAE,IAAI;4BAAU,MAAM;4BAAa,MAAM;4BAAiB,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,UAAU,EAAE;4BAAE,gBAAgB;4BAAiB,WAAW;4BAAG,WAAW;4BAAI,SAAS;4BAAM,UAAU;wBAAE;wBAC/L;4BAAE,IAAI;4BAAU,MAAM;4BAAW,MAAM;4BAAkB,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,KAAK;4BAAkC,QAAQ;4BAAQ,kBAAkB;4BAAe,SAAS;wBAAM;wBAC9L;4BAAE,IAAI;4BAAU,MAAM;4BAAU,MAAM;4BAAgB,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,UAAU;4BAAe,YAAY,EAAE;4BAAE,eAAe;wBAAG;wBAC/I;4BAAE,IAAI;4BAAU,MAAM;4BAAW,MAAM;4BAAqB,UAAU;gCAAE,GAAG;gCAAM,GAAG;4BAAI;4BAAG,SAAS;4BAAY,gBAAgB;wBAAc;qBAC/I;oBACD,aAAa;wBACX;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;wBAC7C;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;wBAC7C;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;wBAC7C;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;qBAC9C;gBACH;aACD;YACD,WAAW;gBAAE,eAAe;gBAAI,aAAa;YAAG;YAChD,YAAY;YACZ,YAAY;YACZ,QAAQ;YACR,SAAS;QACX;QACA;YACE,IAAI;YACJ,MAAM;YACN,aAAa;YACb,OAAO;gBACL;oBACE,IAAI;oBACJ,MAAM;oBACN,OAAO;wBACL;4BAAE,IAAI;4BAAU,MAAM;4BAAS,MAAM;4BAAS,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;wBAAE;wBAC3E;4BAAE,IAAI;4BAAU,MAAM;4BAAY,MAAM;4BAAiB,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,UAAU,EAAE;4BAAE,SAAS,EAAE;4BAAE,SAAS;4BAAM,UAAU;wBAAE;wBAC7I;4BAAE,IAAI;4BAAU,MAAM;4BAAa,MAAM;4BAAgB,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,QAAQ;4BAAmB,WAAW,EAAE;wBAAC;wBAChI;4BAAE,IAAI;4BAAU,MAAM;4BAAW,MAAM;4BAAY,UAAU;gCAAE,GAAG;gCAAK,GAAG;4BAAI;4BAAG,SAAS;wBAAW;qBACtG;oBACD,aAAa;wBACX;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;wBAC7C;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;wBAC7C;4BAAE,IAAI;4BAAU,MAAM;4BAAU,IAAI;wBAAS;qBAC9C;gBACH;aACD;YACD,WAAW;gBAAE,kBAAkB;YAAK;YACpC,YAAY;YACZ,YAAY;YACZ,QAAQ;YACR,SAAS;QACX;KACD;IACD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAE7C,MAAM,mBAAmB,SAAS,MAAM,CAAC,CAAA,IACvC,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,OACpD,EAAE,WAAW,EAAE,cAAc,SAAS,WAAW,WAAW;IAG9D,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;0CACC,8OAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,8OAAC;gCAAE,WAAU;0CAAiB;;;;;;;;;;;;kCAEhC,8OAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,8OAAC,0MAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;0BAMhC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,gNAAM;wBAAC,WAAU;;;;;;kCAClB,8OAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,WAAU;;;;;;;;;;;;YAKb,iBAAiB,MAAM,GAAG,kBACzB,8OAAC;gBAAI,WAAU;0BACZ,iBAAiB,GAAG,CAAC,CAAA,wBACpB,8OAAC;wBAEC,WAAU;wBACV,SAAS,IAAM,gBAAgB;;0CAE/B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAG,WAAU;0DACX,QAAQ,IAAI;;;;;;0DAEf,8OAAC;gDAAE,WAAU;0DAAuC,QAAQ,WAAW;;;;;;;;;;;;kDAEzE,8OAAC;wCACC,SAAS,CAAC;4CACR,EAAE,eAAe;wCACnB;wCACA,WAAU;kDAEV,cAAA,8OAAC,sOAAY;4CAAC,WAAU;;;;;;;;;;;;;;;;;0CAI5B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DAA4D;;;;;;0DAC3E,8OAAC;gDAAI,WAAU;0DACZ,QAAQ,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE;;;;;;;;;;;;kDAGlE,8OAAC;;0DACC,8OAAC;gDAAI,WAAU;0DAA4D;;;;;;0DAC3E,8OAAC;gDAAI,WAAU;0DAAiC,QAAQ,KAAK,CAAC,MAAM;;;;;;;;;;;;;;;;;;0CAIxE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,sNAAQ;gDAAC,WAAU;;;;;;4CACnB,IAAI,KAAK,QAAQ,UAAU,EAAE,kBAAkB;;;;;;;kDAElD,8OAAC;wCACC,WAAW,CAAC,2CAA2C,EACrD,QAAQ,MAAM,KAAK,WACf,mCACA,QAAQ,MAAM,KAAK,UACnB,qCACA,kCACJ;kDAED,QAAQ,MAAM;;;;;;;;;;;;;uBAhDd,QAAQ,EAAE;;;;;;;;;qCAuDrB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,sNAAQ;4BAAC,WAAU;;;;;;;;;;;kCAEtB,8OAAC;wBAAG,WAAU;kCACX,aAAa,uBAAuB;;;;;;kCAEvC,8OAAC;wBAAE,WAAU;kCACV,aACG,mCACA;;;;;;oBAEL,CAAC,4BACA,8OAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,8OAAC,0MAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;;;;;;;AAQ1C"}},
    {"offset": {"line": 2451, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Voice/IVRBuilder.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport { IVRProvider, useIVR } from '../../contexts/IVRContext';\nimport IVRCanvas from './IVRCanvas';\nimport IVRToolbar from './IVRToolbar';\nimport IVRProperties from './IVRProperties';\nimport IVRProjectManager from './IVRProjectManager';\nimport { IVRNode, IVRProject } from '../../types/ivr';\nimport { X, Home } from 'lucide-react';\n\nfunction BuilderContent() {\n  const [mode, setMode] = useState<'list' | 'builder'>('list');\n  const [selectedNode, setSelectedNode] = useState<IVRNode | null>(null);\n  const { loadProject, createProject, project } = useIVR();\n\n  const handleCreateNew = () => {\n    createProject('New Workflow', 'Description of your workflow');\n    setMode('builder');\n  };\n\n  const handleProjectSelect = (selectedProject: IVRProject) => {\n    loadProject(selectedProject);\n    setMode('builder');\n  };\n\n  const handleBackToList = () => {\n    setMode('list');\n    setSelectedNode(null);\n  };\n\n  const handleNodeDoubleClick = (node: IVRNode) => {\n    setSelectedNode(node);\n  };\n\n  const handleCloseProperties = () => {\n    setSelectedNode(null);\n  };\n\n  if (mode === 'list') {\n    return (\n      <div className=\"h-full bg-slate-900\">\n        <IVRProjectManager\n          onProjectSelect={handleProjectSelect}\n          onCreateNew={handleCreateNew}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex overflow-hidden bg-slate-900\">\n      {/* Toolbar */}\n      <IVRToolbar />\n\n      {/* Main Canvas Area */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Top Bar */}\n        <div className=\"bg-slate-800/50 border-b border-white/10 px-4 py-3 flex items-center justify-between\">\n          <button\n            onClick={handleBackToList}\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/5 hover:bg-white/10 text-white transition-all\"\n          >\n            <Home className=\"w-4 h-4\" />\n            <span className=\"text-sm font-semibold\">Back to Projects</span>\n          </button>\n          \n          <div className=\"text-center\">\n            <div className=\"text-white font-bold text-lg\">\n              {project?.name || 'Workflow Builder'}\n            </div>\n            <div className=\"text-slate-400 text-xs\">\n              {project?.description || 'Visual IVR Designer'}\n            </div>\n          </div>\n\n          <div className=\"w-32\" /> {/* Spacer */}\n        </div>\n\n        {/* Canvas */}\n        <div className=\"flex-1\">\n          <IVRCanvas onNodeDoubleClick={handleNodeDoubleClick} />\n        </div>\n      </div>\n\n      {/* Properties Panel */}\n      {selectedNode && (\n        <IVRProperties node={selectedNode} onClose={handleCloseProperties} />\n      )}\n    </div>\n  );\n}\n\nexport default function IVRBuilder() {\n  return (\n    <IVRProvider>\n      <BuilderContent />\n    </IVRProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AATA;;;;;;;;;AAWA,SAAS;IACP,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAqB;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAiB;IACjE,MAAM,EAAE,WAAW,EAAE,aAAa,EAAE,OAAO,EAAE,GAAG,IAAA,wIAAM;IAEtD,MAAM,kBAAkB;QACtB,cAAc,gBAAgB;QAC9B,QAAQ;IACV;IAEA,MAAM,sBAAsB,CAAC;QAC3B,YAAY;QACZ,QAAQ;IACV;IAEA,MAAM,mBAAmB;QACvB,QAAQ;QACR,gBAAgB;IAClB;IAEA,MAAM,wBAAwB,CAAC;QAC7B,gBAAgB;IAClB;IAEA,MAAM,wBAAwB;QAC5B,gBAAgB;IAClB;IAEA,IAAI,SAAS,QAAQ;QACnB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,2JAAiB;gBAChB,iBAAiB;gBACjB,aAAa;;;;;;;;;;;IAIrB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC,oJAAU;;;;;0BAGX,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,8OAAC,0MAAI;wCAAC,WAAU;;;;;;kDAChB,8OAAC;wCAAK,WAAU;kDAAwB;;;;;;;;;;;;0CAG1C,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACZ,SAAS,QAAQ;;;;;;kDAEpB,8OAAC;wCAAI,WAAU;kDACZ,SAAS,eAAe;;;;;;;;;;;;0CAI7B,8OAAC;gCAAI,WAAU;;;;;;4BAAS;;;;;;;kCAI1B,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,mJAAS;4BAAC,mBAAmB;;;;;;;;;;;;;;;;;YAKjC,8BACC,8OAAC,uJAAa;gBAAC,MAAM;gBAAc,SAAS;;;;;;;;;;;;AAIpD;AAEe,SAAS;IACtB,qBACE,8OAAC,6IAAW;kBACV,cAAA,8OAAC;;;;;;;;;;AAGP"}},
    {"offset": {"line": 2641, "column": 0}, "map": {"version":3,"sources":["file:///Users/rakzzm/Documents/Applications/CPaaS%20Platform/src/components/Voice/Dialpad.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from 'react';\nimport { Phone, X, Delete, PhoneCall } from 'lucide-react';\n\ninterface DialpadProps {\n  onClose: () => void;\n}\n\nexport default function Dialpad({ onClose }: DialpadProps) {\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [callStatus, setCallStatus] = useState<'idle' | 'calling' | 'connected'>('idle');\n\n  const handleNumberClick = (num: string) => {\n    setPhoneNumber(prev => prev + num);\n  };\n\n  const handleDelete = () => {\n    setPhoneNumber(prev => prev.slice(0, -1));\n  };\n\n  const handleCall = () => {\n    if (phoneNumber.length > 0) {\n      setCallStatus('calling');\n      // Simulate call connection\n      setTimeout(() => setCallStatus('connected'), 2000);\n    }\n  };\n\n  const handleEndCall = () => {\n    setCallStatus('idle');\n    setPhoneNumber('');\n  };\n\n  const buttons = [\n    { label: '1', sub: '' },\n    { label: '2', sub: 'ABC' },\n    { label: '3', sub: 'DEF' },\n    { label: '4', sub: 'GHI' },\n    { label: '5', sub: 'JKL' },\n    { label: '6', sub: 'MNO' },\n    { label: '7', sub: 'PQRS' },\n    { label: '8', sub: 'TUV' },\n    { label: '9', sub: 'WXYZ' },\n    { label: '*', sub: '' },\n    { label: '0', sub: '+' },\n    { label: '#', sub: '' },\n  ];\n\n  return (\n    <div className=\"fixed bottom-6 right-6 w-80 bg-slate-900 border border-white/10 rounded-2xl shadow-2xl z-50 backdrop-blur-xl\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-white/10 flex items-center justify-between bg-gradient-to-r from-[#39FF14]/10 to-[#32e012]/10\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-[#39FF14]/20 rounded-full flex items-center justify-center\">\n            <Phone className=\"w-4 h-4 text-brand-lime\" />\n          </div>\n          <span className=\"text-white font-bold\">Dialpad</span>\n        </div>\n        <button \n          onClick={onClose}\n          className=\"p-1.5 hover:bg-white/10 rounded-lg transition-all text-slate-400 hover:text-white\"\n        >\n          <X className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Display */}\n      <div className=\"p-6 bg-white/5 relative\">\n        <div className=\"text-center mb-2\">\n          {callStatus === 'calling' && (\n            <span className=\"text-xs text-yellow-400 font-semibold uppercase tracking-wider animate-pulse\">Calling...</span>\n          )}\n          {callStatus === 'connected' && (\n            <span className=\"text-xs text-green-400 font-semibold uppercase tracking-wider\">Connected</span>\n          )}\n        </div>\n        <div className=\"bg-slate-800/50 rounded-xl p-4 min-h-[60px] flex items-center justify-center border border-white/5\">\n          <input\n            type=\"text\"\n            value={phoneNumber}\n            readOnly\n            placeholder=\"Enter number\"\n            className=\"bg-transparent text-white text-2xl font-mono text-center w-full outline-none\"\n          />\n        </div>\n        {phoneNumber.length > 0 && callStatus === 'idle' && (\n          <button\n            onClick={handleDelete}\n            className=\"absolute right-8 top-1/2 -translate-y-1/2 mt-1 p-2 hover:bg-white/10 rounded-lg transition-all text-slate-400 hover:text-white\"\n          >\n            <Delete className=\"w-4 h-4\" />\n          </button>\n        )}\n      </div>\n\n      {/* Keypad */}\n      <div className=\"p-4 grid grid-cols-3 gap-3\">\n        {buttons.map((btn) => (\n          <button\n            key={btn.label}\n            onClick={() => handleNumberClick(btn.label)}\n            disabled={callStatus !== 'idle'}\n            className={`aspect-square rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 transition-all flex flex-col items-center justify-center group ${\n              callStatus !== 'idle' ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n          >\n            <span className=\"text-2xl font-bold text-white group-hover:scale-110 transition-transform\">\n              {btn.label}\n            </span>\n            {btn.sub && (\n              <span className=\"text-[10px] text-slate-500 uppercase tracking-wider mt-1\">\n                {btn.sub}\n              </span>\n            )}\n          </button>\n        ))}\n      </div>\n\n      {/* Call Button */}\n      <div className=\"p-4 pt-0\">\n        {callStatus === 'idle' ? (\n          <button\n            onClick={handleCall}\n            disabled={phoneNumber.length === 0}\n            className=\"w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 disabled:from-slate-600 disabled:to-slate-700 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold uppercase text-sm tracking-wider shadow-lg shadow-green-500/30 flex items-center justify-center gap-2 transition-all\"\n          >\n            <PhoneCall className=\"w-5 h-5\" />\n            Call\n          </button>\n        ) : (\n          <button\n            onClick={handleEndCall}\n            className=\"w-full bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-600 hover:to-rose-600 text-white py-4 rounded-2xl font-bold uppercase text-sm tracking-wider shadow-lg shadow-red-500/30 flex items-center justify-center gap-2 transition-all\"\n          >\n            <Phone className=\"w-5 h-5 rotate-[135deg]\" />\n            End Call\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}